{"version":3,"file":"static/css/2846.b661e1fa223623565e26.css","mappings":"AAmBA,kBAMA,gBACA,kBACA,sCAHA,cADA,eAFA,YACA,kBAFA,UAgBA,CAPA,8BAKA,cAHA,eACA,gBACA,cAHA,kBAKA,CCiEA,4BAIA,mBADA,gBAFA,gBACA,gBAGA,eACA,CC0GA,UACA,gBAmEA,CAjEA,qBAGA,cAFA,eACA,aAEA,CAEA,qBAEA,YACA,gBAFA,UAyDA,CArDA,0CACA,aACA,sBACA,YACA,mBACA,CAEA,kCACA,cACA,cACA,CAEA,2BAKA,4BAEA,qBALA,oBAIA,cAHA,gBACA,sBAIA,CAEA,0BAIA,yBADA,WADA,4CADA,eAIA,CAEA,wBACA,iBACA,CAEA,2DAEA,SACA,CAEA,6BACA,yBACA,0CACA,mBACA,CAEA,6BACA,cACA,yBACA,CAEA,uBACA,cACA,oBACA,CAKA,gEACA,SACA,CAEA,qDACA,eACA,CAEA,0CAGA,iBAFA,iBACA,eAEA,CAEA,8CAEA,mBACA,6BAFA,YAQA,CAJA,gHAEA,aACA,CAGA,uCAIA,6BADA,cAFA,aACA,cAQA,CAJA,kDACA,cACA,cACA,CAGA,sCAGA,gBADA,kBAEA,uBACA,mBAJA,WAKA,CAEA,wCACA,eACA,gBACA,CAEA,6CACA,UACA,CC1PA,mBACA,WAWA,CATA,+BAGA,YAFA,YACA,aAEA,CAEA,4BACA,iBACA,CCsHA,4BACA,aACA,sBAkDA,CAhDA,8CACA,gBACA,CAEA,qDAGA,eACA,iBAFA,iBADA,WAIA,CAEA,yCAEA,mBACA,cACA,eAHA,YAmCA,CA9BA,gDAKA,WAJA,cAEA,WACA,iBAFA,UAIA,CAGA,uDACA,kBACA,CAIA,qDACA,kBACA,CAIA,4DACA,kBACA,CAGA,uDAEA,gBADA,gBAEA,CCpNA,yBACA,GACA,kBACA,CAEA,IACA,oBACA,CAEA,IACA,oBACA,CAEA,IACA,oBACA,CAEA,GACA,oBACA,CACA,CAEA,qBAIA,mBAGA,eANA,aAEA,sBADA,uBAGA,iBACA,iBAkCA,CA/BA,gCAEA,aAGA,YAFA,uBAGA,mBALA,kBAGA,WAGA,CAEA,iCAGA,cAFA,eACA,eAEA,CAEA,gCAEA,cADA,cAEA,CAEA,8BAEA,cADA,cAEA,CAEA,iCAIA,cADA,eAFA,kBACA,QAGA,CCYA,iCACA,0BA0BA,CAtBA,qDACA,iBACA,CAIA,6CAIA,mBAHA,aACA,sBAGA,YAFA,uBAGA,cACA,iBAQA,CANA,yDAEA,WAEA,iBADA,iBAFA,UAIA,CClBA,oBAGA,2BAFA,kBACA,UAwHA,CArHA,oCACA,YAEA,mBADA,kBAEA,CAEA,kCACA,WAKA,CAHA,sCACA,gBACA,CAGA,iCAMA,cACA,eANA,aACA,sBAGA,iBADA,kBADA,mBAmEA,CA7DA,uCACA,kBAKA,CAHA,oDACA,aACA,CAKA,6GACA,+BACA,CAIA,oDACA,8BACA,CAIA,uDACA,8BACA,CAIA,uDACA,+BACA,CAGA,0FAEA,YACA,CAEA,4CACA,cACA,CAEA,8CAEA,cADA,iBAEA,CAEA,+CAMA,mBADA,kBAJA,aACA,YAKA,uBAJA,cACA,kBAIA,CAEA,kDAEA,kBADA,iBAEA,CAGA,oCAKA,mBADA,aAEA,YALA,kBAEA,QADA,SA4BA,CArBA,yEAKA,eAHA,YAIA,iBAHA,eACA,UAGA,kBANA,UAOA,CAGA,gDAMA,gBACA,yBACA,kBAJA,cAFA,YACA,iBAEA,kBAJA,UAQA,CC9JA,WACA,aACA,qBA0EA,CAxEA,wBACA,aAEA,OADA,sBAEA,iBACA,CAEA,yBACA,aAKA,OADA,sBAFA,gBACA,gBAFA,cAKA,CAEA,uBACA,YAMA,CAJA,mCACA,aACA,kBACA,CAGA,sBACA,eAEA,kBADA,eAEA,CAEA,uBACA,cACA,CAEA,iCAEA,kBADA,sBAcA,CAXA,uCACA,qCAKA,CAHA,gDACA,4CACA,CAGA,4CACA,cACA,CAGA,wBACA,MACA,CAEA,oBACA,OACA,WACA,CAEA,wBAGA,mBAMA,6BADA,cAPA,aACA,sBAKA,eAFA,YADA,uBAEA,eAIA","sources":["webpack://job/./src/views/home/index/components/card.vue","webpack://job/./src/views/home/index/components/greeting.vue","webpack://job/./src/views/home/index/components/user.vue","webpack://job/./src/views/home/index/components/host-list.vue","webpack://job/./src/views/home/index/components/agent.vue","webpack://job/./src/views/home/index/components/work-statistics.vue","webpack://job/./src/views/home/index/components/favor-task.vue","webpack://job/./src/views/home/index/components/history-record.vue","webpack://job/./src/views/home/index/index.vue"],"sourcesContent":["\r\n\r\n<template>\r\n    <div>\r\n        <div class=\"home-card-layout\">\r\n            <div v-if=\"title\" class=\"card-title\">{{ title }}</div>\r\n            <slot />\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    export default {\r\n        name: '',\r\n        props: {\r\n            title: String,\r\n        },\r\n    };\r\n</script>\r\n<style lang='postcss'>\r\n    .home-card-layout {\r\n        width: 100%;\r\n        height: 100%;\r\n        padding: 18px 20px;\r\n        font-size: 12px;\r\n        color: #63656e;\r\n        background: #fff;\r\n        border-radius: 2px;\r\n        box-shadow: 0 1px 2px 0 rgb(0 0 0 / 10%);\r\n\r\n        .card-title {\r\n            margin-bottom: 20px;\r\n            font-size: 14px;\r\n            font-weight: bold;\r\n            line-height: 1;\r\n            color: #313238;\r\n        }\r\n    }\r\n</style>\r\n","\r\n\r\n<template>\r\n    <div class=\"greeting-box time-tips\">\r\n        {{ setAnalysisGreeting() }}\r\n    </div>\r\n</template>\r\n<script>\r\n    import I18n from '@/i18n';\r\n\r\n    export default {\r\n        methods: {\r\n            setAnalysisGreeting () {\r\n                const txtOne = (currentHour, currentMin) => {\r\n                    if (currentHour >= 1 && currentHour < 4) {\r\n                        return I18n.t('home.现在是凌晨 {HH:MM}！切忌劳累过度，影响身体还容易误操作，赶紧休息吧...', { 'HH:MM': `${currentHour}:${currentMin}` });\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtTwo = (currentHour, currentMin) => {\r\n                    if (currentHour === 4) {\r\n                        return I18n.t('home.感谢你来见证凌晨4点的作业平台，Mamba Forever！曼巴精神！共勉！');\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtThree = (currentHour, currentMin) => {\r\n                    if (currentHour >= 5 && currentHour < 7) {\r\n                        return I18n.t('home.一年之计在于春、一日之计在于晨！早起的鸟儿有虫吃~ 伙计，加油！', { 'HH:MM': `${currentHour}:${currentMin}` });\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtFour = (currentHour, currentMin) => {\r\n                    if ((currentHour >= 7 && currentHour <= 10) || (currentHour === 11 && currentMin < 40)) {\r\n                        return I18n.t('home.上午好！专注工作之时别忘了多饮水，促进身体新陈代谢，有益身体健康噢~', { 'HH:MM': `${currentHour}:${currentMin}` });\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtFive = (currentHour, currentMin) => {\r\n                    if ((currentHour === 11 && currentMin >= 40) || (currentHour === 12 && currentMin < 30)) {\r\n                        return I18n.t('home.午饭时间到了，肠胃很重要！记得按时就餐喔~');\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtSix = (currentHour, currentMin) => {\r\n                    if ((currentHour === 12 && currentMin >= 30) || currentHour === 13) {\r\n                        return I18n.t('home.午饭过后，闲庭几步、小憩片刻，下午办公精神更佳！');\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtSeven = (currentHour, currentMin) => {\r\n                    if (currentHour >= 14 && currentHour < 18) {\r\n                        return I18n.t('home.下午好！预防「久坐成疾」，记得多起来走动走动，松松肩颈，放松片刻。', { 'HH:MM': `${currentHour}:${currentMin}` });\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtEight = (currentHour, currentMin) => {\r\n                    if (currentHour === 18 || (currentHour === 19 && currentMin < 30)) {\r\n                        return I18n.t('home.晚上好！夜间人体内消化能力偏弱，饮食切忌太饱，健康绿色膳食为宜。', { 'HH:MM': `${currentHour}:${currentMin}` });\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtNight = (currentHour, currentMin) => {\r\n                    if ((currentHour === 19 && currentMin >= 30) || (currentHour >= 20 && currentHour < 23)) {\r\n                        return I18n.t('home.晚上好！少加班，多锻炼噢~ 只要每天做好规划，不怕事情做不好！', { 'HH:MM': `${currentHour}:${currentMin}` });\r\n                    }\r\n                    return false;\r\n                };\r\n                const txtTen = (currentHour, currentMin) => {\r\n                    if (currentHour >= 23 || currentHour < 1) {\r\n                        return I18n.t('home.现在是晚上 {HH:MM}，夜深了... 为了自己的身体健康，请早点休息，保持足够睡眠！', { 'HH:MM': `${currentHour}:${currentMin}` });\r\n                    }\r\n                    return false;\r\n                };\r\n\r\n                const greetingMap = {\r\n                    txtOne,\r\n                    txtTwo,\r\n                    txtThree,\r\n                    txtFour,\r\n                    txtFive,\r\n                    txtSix,\r\n                    txtSeven,\r\n                    txtEight,\r\n                    txtNight,\r\n                    txtTen,\r\n                };\r\n                const currentHour = new Date().getHours();\r\n                const currentMin = new Date().getMinutes() > 10 ? new Date().getMinutes() : `0${new Date().getMinutes()}`;\r\n                for (const greet in greetingMap) {\r\n                    const curTxt = greetingMap[greet](currentHour, currentMin);\r\n                    if (curTxt) {\r\n                        return curTxt;\r\n                    }\r\n                }\r\n                return '--';\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style lang='postcss' scoped>\r\n    .time-tips {\r\n        max-height: 40px;\r\n        min-height: 20px;\r\n        margin-top: 15px;\r\n        margin-bottom: 15px;\r\n        overflow: hidden;\r\n    }\r\n</style>\r\n","\r\n\r\n<template>\r\n    <div class=\"user-box\" v-bkloading=\"{ isLoading }\">\r\n        <div class=\"user-name\">Hi, {{ userInfo.username }}</div>\r\n        <greeting />\r\n        <div\r\n            class=\"work-tips\"\r\n            @mousemove=\"handleStopSwiper\"\r\n            @mouseleave=\"handleBeginSwiper\">\r\n            <div class=\"work-tips-container\" :style=\"workTipsStyles\">\r\n                <div v-for=\"(analysis, index) in analysisList\" :key=\"index\" class=\"item\">\r\n                    <div v-html=\"analysis.description\" @click=\"handleShowList\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- <jb-dialog\r\n            v-model=\"isShowList\"\r\n            :title=\"listInfo.dialogTitle\"\r\n            :width=\"520\"\r\n            class=\"home-analysis-detail-dialog\">\r\n            <div class=\"list-wraper\">\r\n                <div class=\"data-row-header\">\r\n                    <div class=\"td-name\">{{ listInfo.columnName }}</div>\r\n                    <div class=\"td-action\">{{ $t('home.操作') }}</div>\r\n                </div>\r\n                <div\r\n                    v-for=\"(item, index) in listData\"\r\n                    class=\"data-row\"\r\n                    :key=\"`${item.id}_${index}`\">\r\n                    <div class=\"td-name\">{{ item.content }}</div>\r\n                    <div class=\"td-action\" @click=\"handleGoDetail(item)\">{{ $t('home.查看详情') }}</div>\r\n                </div>\r\n            </div>\r\n            <template #footer>\r\n                <bk-button\r\n                    class=\"list-close-btn\"\r\n                    @click=\"handleHideList\">\r\n                    {{ $t('home.关闭') }}\r\n                </bk-button>\r\n            </template>\r\n        </jb-dialog> -->\r\n    </div>\r\n</template>\r\n<script>\r\n    import _ from 'lodash';\r\n    import marked from 'marked';\r\n    import I18n from '@/i18n';\r\n    import StatisticsIndexService from '@service/statistics-index';\r\n    import UserService from '@service/user';\r\n    import Greeting from './greeting';\r\n\r\n    const dialogTitleMap = {\r\n        ForbiddenScriptFinder: I18n.t('home.使用禁用脚本的作业模板/执行方案'),\r\n        TaskPlanTargetChecker: I18n.t('home.存在异常 Agent 的执行方案'),\r\n        TimerTaskFailRateWatcher: I18n.t('home.周期成功率低于60%的定时任务'),\r\n        TimerTaskFailWatcher: I18n.t('home.近期执行失败的定时任务'),\r\n    };\r\n    const columnNameMap = {\r\n        ForbiddenScriptFinder: I18n.t('home.作业模板/执行方案'),\r\n        TaskPlanTargetChecker: I18n.t('home.作业执行方案'),\r\n        TimerTaskFailRateWatcher: I18n.t('home.定时任务'),\r\n        TimerTaskFailWatcher: I18n.t('home.定时任务'),\r\n    };\r\n\r\n    export default {\r\n        components: {\r\n            Greeting,\r\n        },\r\n        data () {\r\n            return {\r\n                isLoading: true,\r\n                isShowList: false,\r\n                dialogTitle: '',\r\n                analysisIndex: 0,\r\n                userInfo: {},\r\n                analysisList: {},\r\n                greetingInfo: {},\r\n                listType: '',\r\n                listData: [],\r\n            };\r\n        },\r\n        computed: {\r\n            workTipsStyles () {\r\n                const classes = {\r\n                    transform: `translateY(${-100 * this.analysisIndex}%)`,\r\n                };\r\n                if (this.analysisIndex === 0) {\r\n                    classes.transition = 'unset';\r\n                }\r\n                return classes;\r\n            },\r\n            listInfo () {\r\n                return {\r\n                    dialogTitle: dialogTitleMap[this.listType],\r\n                    columnName: columnNameMap[this.listType],\r\n                };\r\n            },\r\n        },\r\n        created () {\r\n            this.analysisResultTimer = '';\r\n            this.analysisMap = {};\r\n            Promise.all([\r\n                this.fetchUserInfo(),\r\n                this.fetchAnalysisResult(),\r\n            ]).finally(() => {\r\n                this.isLoading = false;\r\n            });\r\n        },\r\n        methods: {\r\n            fetchUserInfo () {\r\n                return UserService.fetchUserInfo()\r\n                    .then((data) => {\r\n                        this.userInfo = Object.freeze(data);\r\n                    });\r\n            },\r\n            fetchAnalysisResult () {\r\n                return StatisticsIndexService.fetchAnalysisResult()\r\n                    .then((data) => {\r\n                        const analysisList = [];\r\n                        const analysisMap = {};\r\n                        data.forEach((item) => {\r\n                            const formatLink = link => link.replace(/(?=( href))/g, ' target=\"_blank\"');\r\n                            let description = _.trim(formatLink(marked(item.description)), '\\n');\r\n                            if (dialogTitleMap[item.analysisTaskCode]) {\r\n                                description = description.replace(/(?=<\\/p>$)/, `<span data-id=\"${item.id}\" class=\"action-list\">${I18n.t('home.查看列表')}</span>`);\r\n                            }\r\n                            const analysis = {\r\n                                ...item,\r\n                                description,\r\n                            };\r\n                            analysisList.push(analysis);\r\n                            analysisMap[analysis.id] = analysis;\r\n                        });\r\n                        this.analysisList = Object.freeze(analysisList);\r\n                        this.analysisMap = analysisMap;\r\n                        this.swiperAnalysisResult();\r\n                    });\r\n            },\r\n            handleHideList () {\r\n                this.isShowList = false;\r\n            },\r\n            handleShowList (event) {\r\n                const $target = event.target;\r\n                if ($target.className !== 'action-list') {\r\n                    return;\r\n                }\r\n                const id = $target.getAttribute('data-id');\r\n                this.listType = this.analysisMap[id].analysisTaskCode;\r\n                this.listData = Object.freeze(this.analysisMap[id].contents);\r\n                this.isShowList = true;\r\n            },\r\n            handleGoDetail (payload) {\r\n                let router = {};\r\n                if (payload.type === 'TEMPLATE') {\r\n                    router = this.$router.resolve({\r\n                        name: 'templateDetail',\r\n                        params: {\r\n                            id: payload.location.content,\r\n                        },\r\n                    });\r\n                }\r\n                if (payload.type === 'TASK_PLAN') {\r\n                    const [templateId, planId] = payload.location.content.split(',');\r\n                    router = this.$router.resolve({\r\n                        name: 'viewPlan',\r\n                        params: {\r\n                            templateId,\r\n                        },\r\n                        query: {\r\n                            viewPlanId: planId,\r\n                        },\r\n                    });\r\n                }\r\n                if (payload.type === 'TIMER_TASK') {\r\n                    router = this.$router.resolve({\r\n                        name: 'cronList',\r\n                        query: {\r\n                            name: payload.location.content,\r\n                            mode: 'detail',\r\n                        },\r\n                    });\r\n                }\r\n                window.open(router.href);\r\n            },\r\n            handleStopSwiper () {\r\n                clearTimeout(this.analysisResultTimer);\r\n            },\r\n            handleBeginSwiper () {\r\n                this.swiperAnalysisResult();\r\n            },\r\n            swiperAnalysisResult () {\r\n                if (this.analysisList.length < 1) {\r\n                    return;\r\n                }\r\n                clearTimeout(this.analysisResultTimer);\r\n                this.analysisResultTimer = setTimeout(() => {\r\n                    this.swiperAnalysisResult();\r\n                    if (this.isShowList) {\r\n                        return;\r\n                    }\r\n                    if (this.analysisIndex < this.analysisList.length - 1) {\r\n                        this.analysisIndex += 1;\r\n                    } else {\r\n                        this.analysisIndex = 0;\r\n                    }\r\n                }, 3000);\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style lang='postcss'>\r\n    .user-box {\r\n        line-height: 20px;\r\n\r\n        .user-name {\r\n            font-size: 24px;\r\n            line-height: 1;\r\n            color: #313238;\r\n        }\r\n\r\n        .work-tips {\r\n            width: 100%;\r\n            height: 60px;\r\n            overflow: hidden;\r\n\r\n            .work-tips-container {\r\n                display: flex;\r\n                flex-direction: column;\r\n                height: 100%;\r\n                transition: all 0.15s;\r\n            }\r\n\r\n            .action-list {\r\n                color: #3a84ff;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .item {\r\n                /* stylelint-disable value-no-vendor-prefix */\r\n                display: -webkit-box;\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n                -webkit-box-orient: vertical;\r\n                flex: 0 0 100%;\r\n                -webkit-line-clamp: 3;\r\n            }\r\n\r\n            code {\r\n                padding: 2px 4px;\r\n                font-family: Consolas, monospace, tahoma, Arial;\r\n                color: #d14;\r\n                border: 1px solid #e1e1e8;\r\n            }\r\n\r\n            em {\r\n                font-style: italic;\r\n            }\r\n\r\n            a:hover,\r\n            a:active {\r\n                outline: 0;\r\n            }\r\n\r\n            a:focus {\r\n                outline: thin dotted #333;\r\n                outline: 5px auto -webkit-focus-ring-color;\r\n                outline-offset: -2px;\r\n            }\r\n\r\n            a:hover {\r\n                color: #5590cc;\r\n                text-decoration: underline;\r\n            }\r\n\r\n            a {\r\n                color: #6293e2;\r\n                text-decoration: none;\r\n            }\r\n        }\r\n    }\r\n\r\n    .home-analysis-detail-dialog {\r\n        .bk-dialog-wrapper .bk-dialog-body {\r\n            padding: 0;\r\n        }\r\n\r\n        .bk-dialog-header-inner {\r\n            text-align: left;\r\n        }\r\n\r\n        .list-wraper {\r\n            max-height: 450px;\r\n            overflow-y: auto;\r\n            line-height: 41px;\r\n        }\r\n\r\n        .data-row-header {\r\n            display: flex;\r\n            background: #fafbfd;\r\n            border-top: 1px solid #dcdee5;\r\n\r\n            .td-name,\r\n            .td-action {\r\n                color: #313238;\r\n            }\r\n        }\r\n\r\n        .data-row {\r\n            display: flex;\r\n            font-size: 12px;\r\n            color: #63656e;\r\n            border-top: 1px solid #dcdee5;\r\n\r\n            .td-action {\r\n                color: #3a84ff;\r\n                cursor: pointer;\r\n            }\r\n        }\r\n\r\n        .td-name {\r\n            width: 390px;\r\n            padding-left: 24px;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n        }\r\n\r\n        .td-action {\r\n            flex: 0 0 100px;\r\n            margin-left: auto;\r\n        }\r\n\r\n        .list-close-btn {\r\n            width: 76px;\r\n        }\r\n    }\r\n\r\n</style>\r\n","\r\n\r\n<template>\r\n    <div class=\"host-list-wrapper\" v-bkloading=\"{ isLoading }\">\r\n        <bk-table\r\n            ext-cls=\"host-table\"\r\n            :data=\"hostList\"\r\n            :pagination=\"pagination\"\r\n            width=\"100%\"\r\n            @page-change=\"handlePageChange\"\r\n            @page-limit-change=\"handleLimitChange\">\r\n            <bk-table-column prop=\"ip\" label=\"IP\" class-name=\"ip-item\" />\r\n            <bk-table-column :label=\"$t('home.云区域')\">\r\n                <template slot-scope=\"{ row }\">{{ row.cloudAreaInfo.name || '--' }}</template>\r\n            </bk-table-column>\r\n            <bk-table-column :label=\"$t('home.主机名')\">\r\n                <template slot-scope=\"{ row }\">{{ row.ipDesc || '--' }}</template>\r\n            </bk-table-column>\r\n            <bk-table-column :label=\"$t('home.操作系统名称')\">\r\n                <template slot-scope=\"{ row }\">{{ row.os || '--' }}</template>\r\n            </bk-table-column>\r\n        </bk-table>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import HomeService from '@service/home';\r\n\r\n    export default {\r\n        props: {\r\n            statusType: {\r\n                type: String,\r\n                default: '',\r\n            },\r\n        },\r\n        data () {\r\n            return {\r\n                isLoading: false,\r\n                hostList: [{},{},{}],\r\n                pagination: {\r\n                    count: 30,\r\n                    current: 1,\r\n                    limit: 10,\r\n                },\r\n            };\r\n        },\r\n        created () {\r\n            this.fetchData();\r\n        },\r\n        methods: {\r\n            fetchData () {\r\n                const pageSize = this.pagination.limit;\r\n                const start = parseInt(this.pagination.current - 1, 10) * pageSize;\r\n                const params = {\r\n                    agentStatus: this.statusType === 'fail' ? 0 : 1,\r\n                    start,\r\n                    pageSize,\r\n                };\r\n                this.$request(HomeService.fetchAgentStatus(params), () => {\r\n                    this.isLoading = true;\r\n                }).then((data) => {\r\n                    this.hostList = data.data;\r\n                    this.pagination = {\r\n                        ...this.pagination,\r\n                        count: data.total || 0,\r\n                    };\r\n                })\r\n                    .finally(() => {\r\n                        this.isLoading = false;\r\n                    });\r\n            },\r\n            handlePageChange (value) {\r\n                this.pagination.current = value;\r\n                this.fetchData();\r\n            },\r\n            handleLimitChange (value) {\r\n                this.pagination.current = 1;\r\n                this.pagination.limit = value;\r\n                this.fetchData();\r\n            },\r\n        },\r\n    };\r\n</script>\r\n\r\n<style lang=\"postcss\">\r\n    .host-list-wrapper {\r\n        height: 100%;\r\n\r\n        .host-table {\r\n            height: 100%;\r\n            overflow: auto;\r\n            border: none;\r\n        }\r\n\r\n        .ip-item {\r\n            padding-left: 40px;\r\n        }\r\n    }\r\n</style>\r\n","\r\n\r\n<template>\r\n    <div class=\"agent-box\" v-bkloading=\"{ isLoading }\">\r\n        <div class=\"agent-statistics\">\r\n            <div ref=\"agentStatistics\" style=\"width: 126px; height: 126px;\" />\r\n        </div>\r\n        <div class=\"agent-statistics-detail\">\r\n            <div class=\"detail-item normal\"\r\n                @mouseover=\"handlePieScale($t('home.正常'))\"\r\n                @click=\"handleShowAgentDetail('normal', agentInfo.normalNum)\">\r\n                <span>{{ $t('home.正常') }}</span>\r\n                <span class=\"detail-value\">{{ agentInfo.normalNum }}</span>\r\n            </div>\r\n            <div class=\"detail-item fail\"\r\n                @mouseover=\"handlePieScale($t('home.异常'))\"\r\n                @click=\"handleShowAgentDetail('fail', agentInfo.normalNum)\">\r\n                <span>{{ $t('home.异常') }}</span>\r\n                <span class=\"detail-value\">{{ agentInfo.abnormalNum }}</span>\r\n            </div>\r\n        </div>\r\n        <sideslider-box :value=\"isShow\" @change=\"handleClose\">\r\n            <div slot=\"title\">{{ listTitle }}</div>\r\n            <div slot=\"desc\">\r\n                <action-extend>\r\n                    <div class=\"action-item\" @click=\"handleCopyAll\">{{ $t('home.复制全部') }}</div>\r\n                </action-extend>\r\n            </div>\r\n            <host-list :status-type=\"statusType\" />\r\n        </sideslider-box>\r\n    </div>\r\n</template>\r\n<script>\r\n    import I18n from '@/i18n';\r\n    import echarts from 'lib/echarts.min.js';\r\n    import HomeService from '@service/home';\r\n    import SidesliderBox from '@components/choose-ip/components/sideslider-box';\r\n    import ActionExtend from '@components/choose-ip/components/action-extend';\r\n    import HostList from './host-list';\r\n    import {\r\n        execCopy,\r\n    } from '@utils/assist';\r\n\r\n    export default {\r\n        name: '',\r\n        components: {\r\n            SidesliderBox,\r\n            ActionExtend,\r\n            HostList,\r\n        },\r\n        data () {\r\n            return {\r\n                isLoading: false,\r\n                isShow: false,\r\n                statusType: '',\r\n                allHostList: [{},{},{}],\r\n                agentInfo: {},\r\n            };\r\n        },\r\n        computed: {\r\n            listTitle () {\r\n                const statusListMap = {\r\n                    normal: I18n.t('home.Agent 正常的机器列表：'),\r\n                    fail: I18n.t('home.Agent 异常的机器列表：'),\r\n                };\r\n                return statusListMap[this.statusType];\r\n            },\r\n            defaultHighlight () {\r\n                return (this.agentInfo.abnormalNum || !this.agentInfo.normalNum)\r\n                    ? this.$t('home.异常')\r\n                    : this.$t('home.正常');\r\n            },\r\n        },\r\n        created () {\r\n            this.fetchStatisticsAgent();\r\n        },\r\n        methods: {\r\n            fetchStatisticsAgent () {\r\n                this.$request(HomeService.fetchStatisticsAgent(), () => {\r\n                    this.isLoading = true;\r\n                }).then((data) => {\r\n                    this.agentInfo = data;\r\n                    this.initAgentStatistics();\r\n                })\r\n                    .finally(() => {\r\n                        this.isLoading = false;\r\n                    });\r\n            },\r\n            handleShowAgentDetail (status, count) {\r\n                if (!count) {\r\n                    return;\r\n                }\r\n                this.isShow = true;\r\n                this.statusType = status;\r\n                this.fetchAllAgentStatus();\r\n            },\r\n            handleClose () {\r\n                this.isShow = false;\r\n            },\r\n            handleCopyAll () {\r\n                const allIP = this.allHostList.map(_ => _.split(':').pop());\r\n                execCopy(allIP.join('\\n'), `${I18n.t('home.复制成功')}（${allIP.length}${I18n.t('home.个IP')}）`);\r\n            },\r\n            fetchAllAgentStatus () {\r\n                const agentStatus = this.statusType === 'fail' ? 0 : 1;\r\n                HomeService.fetchAllAgentStatus({\r\n                    agentStatus,\r\n                }).then((data) => {\r\n                    this.allHostList = data.data;\r\n                });\r\n            },\r\n            handlePieScale (curName) {\r\n                const statusMap = [\r\n                    this.$t('home.正常'),\r\n                    this.$t('home.异常'),\r\n                ];\r\n                const selectItem = [\r\n                    curName,\r\n                ];\r\n                const unSelectItems = statusMap.filter(item => item !== selectItem[0]);\r\n                this.myChart.dispatchAction({ type: 'highlight', name: selectItem });\r\n                this.myChart.dispatchAction({ type: 'downplay', name: unSelectItems });\r\n            },\r\n            initAgentStatistics () {\r\n                this.myChart = echarts.init(this.$refs.agentStatistics);\r\n                const option = {\r\n                    series: [\r\n                        {\r\n                            type: 'pie',\r\n                            radius: [\r\n                                '43',\r\n                                '53',\r\n                            ],\r\n                            selectedMode: 'single',\r\n                            hoverOffset: 5,\r\n                            selectedOffset: 0,\r\n                            avoidLabelOverlap: false,\r\n                            label: {\r\n                                normal: {\r\n                                    show: false,\r\n                                    position: 'center',\r\n                                },\r\n                                emphasis: {\r\n                                    show: true,\r\n                                    label: {\r\n                                        fontSize: '12',\r\n                                        fontWeight: 'bold',\r\n                                    },\r\n                                    formatter: [\r\n                                        '{value|{d}%}',\r\n                                        '{b}',\r\n                                    ].join('\\n'),\r\n\r\n                                    rich: {\r\n                                        name: {\r\n                                            fontSize: 12,\r\n                                            lineHieght: 16,\r\n                                        },\r\n                                        value: {\r\n                                            fontSize: 20,\r\n                                            fontWeight: 600,\r\n                                            lineHeight: 26,\r\n                                            color: '#000',\r\n                                        },\r\n                                    },\r\n                                },\r\n                            },\r\n                            labelLine: {\r\n                                normal: {\r\n                                    show: false,\r\n                                },\r\n                            },\r\n                            data: [\r\n                                {\r\n                                    value: this.agentInfo.normalNum,\r\n                                    key: 'normal',\r\n                                    name: this.$t('home.正常'),\r\n                                    itemStyle: {\r\n                                        color: '#2DCB9D',\r\n                                    },\r\n                                    emphasis: {\r\n                                        label: {\r\n                                            show: true,\r\n                                        },\r\n                                    },\r\n                                },\r\n                                {\r\n                                    value: this.agentInfo.abnormalNum,\r\n                                    key: 'fail',\r\n                                    name: this.$t('home.异常'),\r\n                                    itemStyle: {\r\n                                        color: '#FF565C',\r\n                                    },\r\n                                },\r\n                            ],\r\n                        },\r\n                    ],\r\n                };\r\n                this.myChart.setOption(option);\r\n                this.myChart.on('click', (params) => {\r\n                    this.handleShowAgentDetail(params.data.key, params.data.value);\r\n                });\r\n                this.myChart.on('mouseover', (params) => {\r\n                    this.handlePieScale(params.data.name);\r\n                });\r\n                this.myChart.dispatchAction({\r\n                    type: 'highlight',\r\n                    name: this.defaultHighlight,\r\n                });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style lang='postcss' scoped>\r\n    .agent-box {\r\n        display: flex;\r\n        justify-content: center;\r\n\r\n        .agent-statistics {\r\n            margin-top: -10px;\r\n        }\r\n\r\n        .agent-statistics-detail {\r\n            width: 102px;\r\n            margin-left: 7.4%;\r\n            font-size: 12px;\r\n            line-height: 30px;\r\n        }\r\n\r\n        .detail-item {\r\n            display: flex;\r\n            align-items: center;\r\n            color: #63656e;\r\n            cursor: pointer;\r\n\r\n            &::before {\r\n                display: block;\r\n                width: 12px;\r\n                height: 3px;\r\n                margin-right: 8px;\r\n                content: \"\";\r\n            }\r\n\r\n            &.normal {\r\n                &::before {\r\n                    background: #2dcb9d;\r\n                }\r\n            }\r\n\r\n            &.fail {\r\n                &::before {\r\n                    background: #ff565c;\r\n                }\r\n            }\r\n\r\n            &.uninstalled {\r\n                &::before {\r\n                    background: #dcdee5;\r\n                }\r\n            }\r\n\r\n            .detail-value {\r\n                margin-left: auto;\r\n                font-weight: bold;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n","\r\n\r\n<template>\r\n    <router-link class=\"work-statistics-box\" :to=\"{ name: link }\">\r\n        <div class=\"work-flag\">\r\n            <Icon class=\"hexagon\" type=\"hexagon\" svg />\r\n            <Icon class=\"statistics\" :type=\"type\" svg />\r\n        </div>\r\n        <div class=\"work-total\">\r\n            <slot v-bind:jobNum=\"jobNum\" v-bind:scriptNum=\"scriptNum\" />\r\n        </div>\r\n        <div class=\"work-name\">\r\n            <slot name=\"name\" />\r\n        </div>\r\n    </router-link>\r\n</template>\r\n<script>\r\n    import HomeService from '@service/home';\r\n\r\n    export default {\r\n        name: '',\r\n        props: {\r\n            type: {\r\n                type: String,\r\n                default: '',\r\n            },\r\n            link: {\r\n                type: String,\r\n                default: '',\r\n            },\r\n        },\r\n        data () {\r\n            return {\r\n                jobNum: 0,\r\n                scriptNum: 0,\r\n            };\r\n        },\r\n        created () {\r\n            this.fetchStatisticsJobAndScript();\r\n        },\r\n        methods: {\r\n            fetchStatisticsJobAndScript () {\r\n                HomeService.fetchStatisticsJobAndScript()\r\n                    .then(({ jobNum, scriptNum }) => {\r\n                        this.jobNum = jobNum;\r\n                        this.scriptNum = scriptNum;\r\n                    });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style lang='postcss'>\r\n    @keyframes hexagon-scale {\r\n        0% {\r\n            transform: scale(0);\r\n        }\r\n\r\n        70% {\r\n            transform: scale(1.5);\r\n        }\r\n\r\n        80% {\r\n            transform: scale(1.2);\r\n        }\r\n\r\n        90% {\r\n            transform: scale(1.4);\r\n        }\r\n\r\n        100% {\r\n            transform: scale(1.3);\r\n        }\r\n    }\r\n\r\n    .work-statistics-box {\r\n        display: flex;\r\n        justify-content: center;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        padding-top: 18px;\r\n        text-align: center;\r\n        cursor: pointer;\r\n\r\n        .work-flag {\r\n            position: relative;\r\n            display: flex;\r\n            justify-content: center;\r\n            width: 100px;\r\n            height: 60px;\r\n            margin-bottom: 15px;\r\n        }\r\n\r\n        .work-total {\r\n            font-size: 24px;\r\n            font-weight: bold;\r\n            color: #313238;\r\n        }\r\n\r\n        .work-name {\r\n            margin-top: 2px;\r\n            color: #979ba5;\r\n        }\r\n\r\n        .hexagon {\r\n            font-size: 60px;\r\n            color: #e3edff;\r\n        }\r\n\r\n        .statistics {\r\n            position: absolute;\r\n            top: 15px;\r\n            font-size: 30px;\r\n            color: #3a84ff;\r\n        }\r\n    }\r\n</style>\r\n","\r\n\r\n<template>\r\n    <div class=\"favor-task-box\" ref=\"container\" v-bkloading=\"{ isLoading }\">\r\n        <template v-if=\"!isLoading\">\r\n            <bk-table v-if=\"favorList.length > 0\" :data=\"favorList\" :height=\"height\">\r\n                <bk-table-column prop=\"name\" :label=\"$t('home.作业模板名称')\" show-overflow-tooltip>\r\n                    <template slot-scope=\"{ row }\">\r\n                        <auth-router-link\r\n                            :permission=\"row.canView\"\r\n                            auth=\"job_template/view\"\r\n                            :resource-id=\"row.id\"\r\n                            class=\"task-name-text\"\r\n                            :to=\"{\r\n                                name: 'templateDetail',\r\n                                params: {\r\n                                    id: 4 || row.id,\r\n                                },\r\n                            }\">\r\n                            {{ row.name }}\r\n                        </auth-router-link>\r\n                    </template>\r\n                </bk-table-column>\r\n                <bk-table-column\r\n                    width=\"100\"\r\n                    prop=\"status\"\r\n                    :label=\"$t('home.状态')\">\r\n                    {{ $t('home.已上线') }}\r\n                </bk-table-column>\r\n                <bk-table-column\r\n                    width=\"180\"\r\n                    prop=\"lastModifyUser\"\r\n                    :label=\"$t('home.更新人')\" />\r\n                <bk-table-column\r\n                    width=\"180\"\r\n                    prop=\"lastModifyTime\"\r\n                    :label=\"$t('home.更新时间')\" />\r\n                <bk-table-column :label=\"$t('home.操作')\" width=\"200\" class-name=\"task-action\">\r\n                    <template slot-scope=\"{ row }\">\r\n                        <auth-router-link\r\n                            :permission=\"row.canView\"\r\n                            auth=\"job_template/view\"\r\n                            :resource-id=\"row.id\"\r\n                            :to=\"{\r\n                                name: 'viewPlan',\r\n                                params: {\r\n                                    templateId: 4 || row.id,\r\n                                },\r\n                            }\">\r\n                            {{ $t('home.执行方案') }}\r\n                        </auth-router-link>\r\n                        <auth-router-link\r\n                            :permission=\"row.canDebug\"\r\n                            auth=\"job_template/debug\"\r\n                            :resource-id=\"row.id\"\r\n                            :to=\"{\r\n                                name: 'debugPlan',\r\n                                params: {\r\n                                    id: 4 || row.id,\r\n                                },\r\n                            }\">\r\n                            {{ $t('home.调试') }}\r\n                        </auth-router-link>\r\n                        <auth-router-link\r\n                            :permission=\"row.canEdit\"\r\n                            auth=\"job_template/edit\"\r\n                            :resource-id=\"row.id\"\r\n                            :to=\"{\r\n                                name: 'templateEdit',\r\n                                params: {\r\n                                    id: 4 || row.id,\r\n                                },\r\n                            }\">\r\n                            {{ $t('home.编辑') }}\r\n                        </auth-router-link>\r\n                    </template>\r\n                </bk-table-column>\r\n            </bk-table>\r\n            <div v-else class=\"list-empty\">\r\n                <img class=\"empty-flag\" src=\"/static/images/favor-task-empty.png\">\r\n                <div style=\"margin-top: 12px; font-size: 14px; color: #63656e;\">{{ $t('home.暂无收藏的作业') }}</div>\r\n                <div style=\"margin-top: 10px; font-size: 12px; color: #979ba5;\">{{ $t('home.将鼠标悬浮到作业模板行，点击收藏图标') }}</div>\r\n            </div>\r\n        </template>\r\n    </div>\r\n</template>\r\n<script>\r\n    import HomeService from '@service/home';\r\n\r\n    export default {\r\n        data () {\r\n            return {\r\n                isLoading: true,\r\n                height: undefined,\r\n                favorList: [{},{},{}],\r\n            };\r\n        },\r\n        created () {\r\n            this.fetchMyFavorList();\r\n        },\r\n        mounted () {\r\n            this.init();\r\n            window.addEventListener('resize', this.init);\r\n            this.$once('hook:beforeDestroy', () => {\r\n                window.removeEventListener('resize', this.init);\r\n            });\r\n        },\r\n        methods: {\r\n            fetchMyFavorList () {\r\n                HomeService.fetchMyFavorList()\r\n                    .then((data) => {\r\n                        this.favorList = Object.freeze(data);\r\n                    })\r\n                    .finally(() => {\r\n                        this.isLoading = false;\r\n                    });\r\n            },\r\n            init () {\r\n                const { height } = this.$refs.container.getBoundingClientRect();\r\n                this.height = height;\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style lang='postcss' scoped>\r\n    .favor-task-box {\r\n        height: calc(100vh - 484px);\r\n\r\n        .task-action {\r\n            .cell {\r\n                & > * {\r\n                    margin-right: 10px;\r\n                }\r\n            }\r\n        }\r\n\r\n        .list-empty {\r\n            display: flex;\r\n            flex-direction: column;\r\n            justify-content: center;\r\n            align-items: center;\r\n            height: 100%;\r\n            margin: 0 auto;\r\n            text-align: center;\r\n\r\n            .empty-flag {\r\n                width: auto;\r\n                height: 50%;\r\n                max-height: 240px;\r\n                margin-top: -40px;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n","\r\n\r\n<template>\r\n    <div class=\"history-record-box\" v-bkloading=\"{ isLoading }\">\r\n        <div v-if=\"!isLoading\" class=\"history-record\">\r\n            <template v-if=\"recordList.length > 0\">\r\n                <scroll-faker>\r\n                    <div\r\n                        v-for=\"record in recordList\"\r\n                        :key=\"record.id\"\r\n                        class=\"record-item\"\r\n                        :class=\"record.statusClass\"\r\n                        @click=\"handleViewExecuteDetail(record)\">\r\n                        <div class=\"item-header\">\r\n                            <div class=\"record-name\">{{ record.name }}</div>\r\n                            <div class=\"record-label\" v-html=\"record.statusDescHtml\" />\r\n                        </div>\r\n                        <div class=\"item-body\">\r\n                            <span>{{ record.startTime }}</span>\r\n                            <span class=\"record-operator\">{{ record.operator }}</span>\r\n                            <div class=\"record-total-time\">{{ record.totalTimeText }}</div>\r\n                        </div>\r\n                    </div>\r\n                </scroll-faker>\r\n            </template>\r\n            <Empty v-else :title=\"$t('home.暂无执行记录')\" class=\"record-empty\" />\r\n            <div class=\"record-actions\">\r\n                <bk-radio-group\r\n                    :value=\"recordOperator\"\r\n                    @change=\"handleRecordFilterChange\"\r\n                    class=\"record-filter\">\r\n                    <bk-radio-button value=\"\">\r\n                        {{ $t('home.全部') }}\r\n                    </bk-radio-button>\r\n                    <bk-radio-button :value=\"userInfo.username\">\r\n                        {{ $t('home.我执行') }}\r\n                    </bk-radio-button>\r\n                </bk-radio-group>\r\n                <router-link :to=\"{ name: 'historyList' }\" class=\"action-btn\">\r\n                    {{ $t('home.更多') }}\r\n                </router-link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import TaskExecuteService from '@service/task-execute';\r\n    import UserService from '@service/user';\r\n    import Empty from '@components/empty';\r\n\r\n    export default {\r\n        components: {\r\n            Empty,\r\n        },\r\n        data () {\r\n            return {\r\n                userInfo: {},\r\n                isLoading: true,\r\n                recordOperator: '',\r\n                recordList: [{},{},{}],\r\n            };\r\n        },\r\n        created () {\r\n            this.fetchUserInfo();\r\n            this.fetchExecuteHistory();\r\n        },\r\n        methods: {\r\n            /**\r\n             * @desc 获取登录用户信息\r\n            */\r\n            fetchUserInfo () {\r\n                UserService.fetchUserInfo()\r\n                    .then((data) => {\r\n                        this.userInfo = Object.freeze(data);\r\n                    });\r\n            },\r\n            /**\r\n             * @desc 获取任务执行历史\r\n             *\r\n             * 时间返回默认是 30 天\r\n            */\r\n            fetchExecuteHistory () {\r\n                this.isLoading = true;\r\n\r\n                const params = {\r\n                    timeRange: 30,\r\n                };\r\n                if (this.recordOperator) {\r\n                    params.operator = this.recordOperator;\r\n                    params.startupModes = '1,2';\r\n                }\r\n                TaskExecuteService.fetchExecutionHistoryList(params)\r\n                    .then((data) => {\r\n                        this.recordList = Object.freeze(data.data);\r\n                    })\r\n                    .finally(() => {\r\n                        this.isLoading = false;\r\n                    });\r\n            },\r\n            /**\r\n             * @desc 筛选登录用户执行列表\r\n             * @param {String} operator 登录用户名\r\n            */\r\n            handleRecordFilterChange (operator) {\r\n                this.recordOperator = operator;\r\n                this.fetchExecuteHistory();\r\n            },\r\n            /**\r\n             * @desc 跳转任务执行详情页面\r\n             * @param {Object} taskInstance 任务执行实例\r\n            */\r\n            handleViewExecuteDetail (taskInstance) {\r\n                if (taskInstance.isTask) {\r\n                    this.$router.push({\r\n                        name: 'historyTask',\r\n                        params: {\r\n                            id: taskInstance.id,\r\n                        },\r\n                    });\r\n                    return;\r\n                }\r\n                this.$router.push({\r\n                    name: 'historyStep',\r\n                    params: {\r\n                        taskInstanceId: taskInstance.id,\r\n                    },\r\n                });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style lang='postcss'>\r\n    .history-record-box {\r\n        position: relative;\r\n        width: 100%;\r\n        height: calc(100vh - 484px);\r\n\r\n        .history-record {\r\n            height: 100%;\r\n            padding-right: 15px;\r\n            margin-right: -15px;\r\n        }\r\n\r\n        .record-empty {\r\n            height: 100%;\r\n\r\n            img {\r\n                margin-top: -30px;\r\n            }\r\n        }\r\n\r\n        .record-item {\r\n            display: flex;\r\n            flex-direction: column;\r\n            padding: 3px 6px 5px;\r\n            margin-bottom: 5px;\r\n            line-height: 16px;\r\n            color: #c4c6cc;\r\n            cursor: pointer;\r\n\r\n            &:hover {\r\n                background: #fafbfd;\r\n\r\n                .record-name {\r\n                    color: #3a84ff;\r\n                }\r\n            }\r\n\r\n            &.success,\r\n            &.forced {\r\n                .record-label {\r\n                    background: rgb(45 203 157 / 14%);\r\n                }\r\n            }\r\n\r\n            &.fail {\r\n                .record-label {\r\n                    background: rgb(255 86 92 / 14%);\r\n                }\r\n            }\r\n\r\n            &.confirm {\r\n                .record-label {\r\n                    background: rgb(255 156 1 / 14%);\r\n                }\r\n            }\r\n\r\n            &.loading {\r\n                .record-label {\r\n                    background: rgb(58 132 255 / 14%);\r\n                }\r\n            }\r\n\r\n            .item-header,\r\n            .item-body {\r\n                display: flex;\r\n            }\r\n\r\n            .item-body {\r\n                margin-top: 6px;\r\n            }\r\n\r\n            .record-name {\r\n                margin-right: auto;\r\n                color: #63656e;\r\n            }\r\n\r\n            .record-label {\r\n                display: flex;\r\n                height: 17px;\r\n                padding: 0 3px;\r\n                white-space: nowrap;\r\n                border-radius: 2px;\r\n                align-items: center;\r\n                justify-content: center;\r\n            }\r\n\r\n            .record-operator {\r\n                padding-left: 10px;\r\n                margin-right: auto;\r\n            }\r\n        }\r\n\r\n        .record-actions {\r\n            position: absolute;\r\n            top: -30px;\r\n            right: 0;\r\n            display: flex;\r\n            align-items: center;\r\n            height: 20px;\r\n\r\n            .record-filter {\r\n                .bk-radio-button-text {\r\n                    width: 50px;\r\n                    height: 22px;\r\n                    min-width: 50px;\r\n                    padding: 0;\r\n                    font-size: 12px;\r\n                    line-height: 22px;\r\n                    text-align: center;\r\n                }\r\n            }\r\n\r\n            .action-btn {\r\n                width: 50px;\r\n                height: 22px;\r\n                line-height: 22px;\r\n                color: #63656e;\r\n                text-align: center;\r\n                background: #fff;\r\n                border: 1px solid #c4c6cc;\r\n                border-radius: 2px;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n","\r\n\r\n<template>\r\n    <div class=\"page-home\">\r\n        <div class=\"layout-row\">\r\n            <div class=\"layout-left\">\r\n                <div class=\"layout-row content-top\">\r\n                    <layout-card class=\"user-card\">\r\n                        <user />\r\n                    </layout-card>\r\n                    <layout-card class=\"agent-card\" :title=\"$t('home.Agent 状态分布')\">\r\n                        <agent />\r\n                    </layout-card>\r\n                </div>\r\n                <div class=\"layout-row\">\r\n                    <layout-card :title=\"$t('home.我收藏的作业')\" class=\"my-task\">\r\n                        <favor-task />\r\n                    </layout-card>\r\n                </div>\r\n            </div>\r\n            <div class=\"layout-right\">\r\n                <div class=\"layout-row content-top\">\r\n                    <layout-card class=\"work-statistics-card\">\r\n                        <work-statistics type=\"job-statistics\" link=\"taskList\">\r\n                            <template #default=\"{ jobNum }\">\r\n                                <span>{{ jobNum }}</span>\r\n                            </template>\r\n                            <span slot=\"name\">{{ $t('home.作业量') }}</span>\r\n                        </work-statistics>\r\n                    </layout-card>\r\n                    <layout-card class=\"work-statistics-card\">\r\n                        <work-statistics type=\"script-statistics\" link=\"scriptList\">\r\n                            <template #default=\"{ scriptNum }\">\r\n                                <span>{{ scriptNum }}</span>\r\n                            </template>\r\n                            <span slot=\"name\">{{ $t('home.脚本量') }}</span>\r\n                        </work-statistics>\r\n                    </layout-card>\r\n                </div>\r\n                <div class=\"layout-row\">\r\n                    <layout-card :title=\"$t('home.最近执行记录')\" class=\"record-card\">\r\n                        <history-record />\r\n                    </layout-card>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"page-footer\">\r\n            <div v-html=\"footerLink\" />\r\n            <div v-html=\"footerCopyRight\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n    import marked from 'marked';\r\n    import QueryGlobalSettingService from '@service/query-global-setting';\r\n    import LayoutCard from './components/card';\r\n    import User from './components/user';\r\n    import Agent from './components/agent';\r\n    import WorkStatistics from './components/work-statistics';\r\n    import FavorTask from './components/favor-task';\r\n    import HistoryRecord from './components/history-record';\r\n\r\n    export default {\r\n        name: '',\r\n        components: {\r\n            LayoutCard,\r\n            User,\r\n            Agent,\r\n            WorkStatistics,\r\n            FavorTask,\r\n            HistoryRecord,\r\n        },\r\n        data () {\r\n            return {\r\n                footerLink: '',\r\n                footerCopyRight: '',\r\n            };\r\n        },\r\n        created () {\r\n            this.fetchTitleAndFooter();\r\n        },\r\n        methods: {\r\n            fetchTitleAndFooter () {\r\n                const formatLink = link => link.replace(/(?=( href))/g, ' target=\"_blank\"');\r\n                QueryGlobalSettingService.fetchFooterConfig()\r\n                    .then((data) => {\r\n                        this.footerLink = formatLink(marked(`${data.footerLink}`));\r\n                        this.footerCopyRight = marked(data.footerCopyRight);\r\n                    });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style lang='postcss'>\r\n    .page-home {\r\n        display: flex;\r\n        flex-direction: column;\r\n\r\n        .layout-left {\r\n            display: flex;\r\n            flex-direction: column;\r\n            flex: 1;\r\n            margin-right: 20px;\r\n        }\r\n\r\n        .layout-right {\r\n            display: flex;\r\n            width: 28.6168%;\r\n            max-width: 480px;\r\n            min-width: 360px;\r\n            flex-direction: column;\r\n            flex: 1;\r\n        }\r\n\r\n        .layout-row {\r\n            display: flex;\r\n\r\n            &.content-top {\r\n                height: 196px;\r\n                margin-bottom: 20px;\r\n            }\r\n        }\r\n\r\n        .user-card {\r\n            flex: 1 0 480px;\r\n            min-width: 480px;\r\n            margin-right: 20px;\r\n        }\r\n\r\n        .agent-card {\r\n            flex: 1 1 378px;\r\n        }\r\n\r\n        .work-statistics-card {\r\n            width: calc(50% - 10px);\r\n            margin-right: 20px;\r\n\r\n            &:hover {\r\n                box-shadow: 0 2px 6px 0 rgb(0 0 0 / 10%);\r\n\r\n                .hexagon {\r\n                    animation: hexagon-scale 0.3s ease-in forwards;\r\n                }\r\n            }\r\n\r\n            &:last-child {\r\n                margin-right: 0;\r\n            }\r\n        }\r\n\r\n        .record-card {\r\n            flex: 1;\r\n        }\r\n\r\n        .my-task {\r\n            flex: 1;\r\n            width: 878px;\r\n        }\r\n\r\n        .page-footer {\r\n            display: flex;\r\n            flex-direction: column;\r\n            align-items: center;\r\n            justify-content: center;\r\n            height: 52px;\r\n            margin-top: 20px;\r\n            font-size: 12px;\r\n            color: #63656e;\r\n            border-top: 1px solid #dcdee5;\r\n        }\r\n    }\r\n</style>\r\n"],"names":[],"sourceRoot":""}