{"version":3,"file":"js/2025.55f7717ab16327b9d4a4.js","mappings":"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","sources":["webpack://job/src/views/file-manage/file-list/index.vue","webpack://job/./src/views/file-manage/file-list/index.vue?a308","webpack://job/./src/views/file-manage/file-list/index.vue?e6e5","webpack://job/./src/views/file-manage/file-list/index.vue?9526","webpack://job/./src/views/file-manage/file-list/index.vue?a581"],"sourcesContent":["<template>\n    <div class=\"file-node-list-page\">\n        <list-action-layout>\n            <jb-breadcrumb\n                class=\"list-breadcrumb\"\n                @on-last=\"handleBackLast\"\n                :key=\"`${fileSourceInfo.alias}_${path}`\">\n                <jb-breadcrumb-item>\n                    <Icon type=\"folder-open\" style=\"font-size: 20px;\" />\n                    <span @click=\"handleGoFileSource\">{{ '文件源列表' }}</span>\n                </jb-breadcrumb-item>\n                <jb-breadcrumb-item>\n                    <span @click=\"handlePathLocation('')\">{{ fileSourceInfo.alias }}</span>\n                </jb-breadcrumb-item>\n                <jb-breadcrumb-item\n                    v-for=\"(item) in pathStack\"\n                    role=\"path\"\n                    :key=\"item.path\">\n                    <span @click=\"handlePathLocation(item.path)\">{{ item.name }}</span>\n                </jb-breadcrumb-item>\n            </jb-breadcrumb>\n            <template #right>\n                <jb-input\n                    :placeholder=\"'搜索关键字'\"\n                    :value=\"name\"\n                    enter-trigger\n                    style=\"width: 480px;\"\n                    @submit=\"handleSearch\" />\n            </template>\n        </list-action-layout>\n        <render-list\n            ref=\"list\"\n            :data-source=\"getBucketList\"\n            @on-refresh=\"handleListRefresh\">\n            <template v-for=\"(column, index) in renderColumns\">\n                <render-file-list-column\n                    :column=\"column\"\n                    :key=\"`${path}_${index}`\"\n                    :file-source-id=\"fileSourceId\"\n                    :link-handler=\"handleLink\"\n                    :action-handler=\"handleAction\"\n                    @on-link=\"handleLink\"\n                    @on-action=\"handleAction\" />\n            </template>\n        </render-list>\n    </div>\n</template>\n<script>\n    import _ from 'lodash';\n       import FileService from '@service/file';\n    import ListActionLayout from '@components/list-action-layout';\n    import RenderList from '@components/render-list';\n    import RenderFileListColumn from '@components/render-file-list-column';\n\n    export default {\n        name: 'FileList',\n        components: {\n            ListActionLayout,\n            RenderList,\n            RenderFileListColumn,\n        },\n        data () {\n            return {\n                renderColumns: [],\n                path: 'a/b/c/d',\n                fileSourceInfo: { alias: 'alias' },\n            };\n        },\n        computed: {\n            isSkeletonLoading () {\n                return this.$refs.list.isLoading;\n            },\n            /**\n             * @desc 面包屑路径\n             * @return {Array}\n             */\n            pathStack () {\n                return this.path.split('/').reduce((result, item) => {\n                    if (item) {\n                        const last = result.length > 0 ? result[result.length - 1].path : '';\n                         \n                        result.push({\n                            path: `${last}${item}/`,\n                            name: item,\n                        });\n                    }\n                    return result;\n                }, []);\n            },\n        },\n        created () {\n            this.parseUrl();\n            this.getBucketList = FileService.fetchgetListFileNode;\n        },\n        mounted () {\n            this.fetchData();\n        },\n        methods: {\n            /**\n             * @desc 获取bucket储存桶数据\n             */\n            fetchData () {\n                this.$refs.list.$emit('onFetch', {\n                    fileSourceId: this.fileSourceId,\n                    path: this.path,\n                    name: this.name,\n                });\n            },\n            /**\n             * @desc 解析url参数\n             */\n            parseUrl () {\n                const {\n                    fileSourceId = '',\n                    path = '',\n                    name = '',\n                } = this.$route.query;\n\n                this.fileSourceId = fileSourceId;\n                this.path = path;\n                this.name = name;\n            },\n            /**\n             * @desc 文件路径返回上一级\n             */\n            handleBackLast () {\n                const lastPath = this.pathStack[this.pathStack.length - 2];\n                this.handlePathLocation(lastPath.path);\n            },\n            /**\n             * @desc 表格数据刷新回调\n             * @param {Object} data 用户输入的过滤数据\n             *\n             * 重新拉取数据\n             */\n            handleListRefresh (data) {\n                // 过滤掉 checkbox 列\n                this.renderColumns = Object.freeze(data.metaData.properties.filter(_ => _.type !== 'checkbox'));\n                this.fileSourceInfo = Object.freeze(data.fileSourceInfo);\n            },\n            /**\n             * @desc 搜索\n             * @param {String} name 搜索文件名\n             *\n             * 重新拉取数据\n             */\n            handleSearch (name) {\n                this.name = name;\n                this.fetchData();\n            },\n            /**\n             * @desc 跳转到文件源列表\n             */\n            handleGoFileSource () {\n                this.$router.push({\n                    name: 'sourceFileList',\n                });\n            },\n            /**\n             * @desc 面包屑切换列表\n             * @param {String} path 文件路径\n             */\n            handlePathLocation (path) {\n                if (_.trim(path, '/') === _.trim(this.path, '/')) {\n                    return;\n                }\n                this.name = '';\n                this.path = path;\n                this.fetchData();\n            },\n            /**\n             * @desc 行数据跳转链接\n             * @param {String} path 文件路径\n             */\n            handleLink (path) {\n                this.name = '';\n                this.path = path;\n                this.fetchData();\n            },\n            /**\n             * @desc 行数据执行操作\n             * @param {String} actionCode 操作类型code\n             * @param {Object} params 操作所需参数\n             */\n            handleAction (actionCode, params) {\n                return FileService.executeAction({\n                    fileSourceId: this.fileSourceId,\n                    actionCode,\n                    params,\n                }).then(() => {\n                    this.messageSuccess('操作成功');\n                    this.fetchData();\n                });\n            },\n            /**\n             * @desc 跳转到文件源列表页面\n             */\n            routerBack () {\n                this.$router.push({\n                    name: 'sourceFileList',\n                });\n            },\n        },\n    };\n</script>\n<style lang=\"postcss\">\n    .file-node-list-page {\n        .list-action-layout {\n            .right-box {\n                flex: 1;\n            }\n\n            .list-breadcrumb {\n                width: 100%;\n            }\n        }\n    }\n</style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"file-node-list-page\" },\n    [\n      _c(\n        \"list-action-layout\",\n        {\n          scopedSlots: _vm._u([\n            {\n              key: \"right\",\n              fn: function () {\n                return [\n                  _c(\"jb-input\", {\n                    staticStyle: { width: \"480px\" },\n                    attrs: {\n                      placeholder: \"搜索关键字\",\n                      value: _vm.name,\n                      \"enter-trigger\": \"\",\n                    },\n                    on: { submit: _vm.handleSearch },\n                  }),\n                ]\n              },\n              proxy: true,\n            },\n          ]),\n        },\n        [\n          _c(\n            \"jb-breadcrumb\",\n            {\n              key: _vm.fileSourceInfo.alias + \"_\" + _vm.path,\n              staticClass: \"list-breadcrumb\",\n              on: { \"on-last\": _vm.handleBackLast },\n            },\n            [\n              _c(\n                \"jb-breadcrumb-item\",\n                [\n                  _c(\"Icon\", {\n                    staticStyle: { \"font-size\": \"20px\" },\n                    attrs: { type: \"folder-open\" },\n                  }),\n                  _vm._v(\" \"),\n                  _c(\"span\", { on: { click: _vm.handleGoFileSource } }, [\n                    _vm._v(_vm._s(\"文件源列表\")),\n                  ]),\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\"jb-breadcrumb-item\", [\n                _c(\n                  \"span\",\n                  {\n                    on: {\n                      click: function ($event) {\n                        return _vm.handlePathLocation(\"\")\n                      },\n                    },\n                  },\n                  [_vm._v(_vm._s(_vm.fileSourceInfo.alias))]\n                ),\n              ]),\n              _vm._v(\" \"),\n              _vm._l(_vm.pathStack, function (item) {\n                return _c(\n                  \"jb-breadcrumb-item\",\n                  { key: item.path, attrs: { role: \"path\" } },\n                  [\n                    _c(\n                      \"span\",\n                      {\n                        on: {\n                          click: function ($event) {\n                            return _vm.handlePathLocation(item.path)\n                          },\n                        },\n                      },\n                      [_vm._v(_vm._s(item.name))]\n                    ),\n                  ]\n                )\n              }),\n            ],\n            2\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"render-list\",\n        {\n          ref: \"list\",\n          attrs: { \"data-source\": _vm.getBucketList },\n          on: { \"on-refresh\": _vm.handleListRefresh },\n        },\n        [\n          _vm._l(_vm.renderColumns, function (column, index) {\n            return [\n              _c(\"render-file-list-column\", {\n                key: _vm.path + \"_\" + index,\n                attrs: {\n                  column: column,\n                  \"file-source-id\": _vm.fileSourceId,\n                  \"link-handler\": _vm.handleLink,\n                  \"action-handler\": _vm.handleAction,\n                },\n                on: {\n                  \"on-link\": _vm.handleLink,\n                  \"on-action\": _vm.handleAction,\n                },\n              }),\n            ]\n          }),\n        ],\n        2\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=140aaf2f&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('140aaf2f')) {\n      api.createRecord('140aaf2f', component.options)\n    } else {\n      api.reload('140aaf2f', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=140aaf2f&\", function () {\n      api.rerender('140aaf2f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/file-manage/file-list/index.vue\"\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"43fdc8c4\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\", function() {\n     var newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}"],"names":["name","components","ListActionLayout","RenderList","RenderFileListColumn","data","renderColumns","path","fileSourceInfo","alias","computed","isSkeletonLoading","pathStack","result","created","mounted","methods","fetchData","fileSourceId","parseUrl","handleBackLast","handleListRefresh","handleSearch","handleGoFileSource","handlePathLocation","handleLink","handleAction","actionCode","params","then","routerBack","render","_vm","this","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","staticStyle","width","attrs","placeholder","value","on","submit","proxy","type","_v","click","_s","$event","_l","item","role","ref","getBucketList","column","index","_withStripped","component","options","__file","content","__esModule","default","module","id","locals","exports","add"],"sourceRoot":""}