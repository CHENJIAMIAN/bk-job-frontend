{"version":3,"file":"js/9406.99f55934d509d2f0da38.js","mappings":"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","sources":["webpack://job/src/views/script-manage/sync-task/components/script-detail.vue","webpack://job/src/views/script-manage/sync-task/index.vue","webpack://job/./src/views/script-manage/sync-task/components/script-detail.vue?4b98","webpack://job/./src/views/script-manage/sync-task/components/script-detail.vue?f74c","webpack://job/./src/views/script-manage/sync-task/components/script-detail.vue?3ce9","webpack://job/./src/views/script-manage/sync-task/index.vue?495c","webpack://job/./src/views/script-manage/sync-task/index.vue?0db1","webpack://job/./src/views/script-manage/sync-task/index.vue?d3ec","webpack://job/./src/views/script-manage/sync-task/components/script-detail.vue?577e","webpack://job/./src/views/script-manage/sync-task/index.vue?3255"],"sourcesContent":["<template>\n    <jb-sideslider\n        :is-show=\"isShow\"\n        :show-footer=\"false\"\n        @update:isShow=\"handleCancel\"\n        :quick-close=\"true\"\n        :width=\"900\"\n        :title=\"'查看脚本'\">\n        <div v-if=\"isShow\" v-bkloading=\"{ isLoading }\">\n            <script-detail v-if=\"!isLoading\" :script-info=\"scriptInfo\" :offset-bottom=\"0\" />\n        </div>\n    </jb-sideslider>\n</template>\n<script>\n    import ScriptService from '@service/script-manage';\n    import PublicScriptService from '@service/public-script-manage';\n    import {\n        checkPublicScript,\n    } from '@utils/assist';\n    import ScriptDetail from '../../common/detail';\n\n    export default {\n        name: '',\n        components: {\n            ScriptDetail,\n        },\n        props: {\n            isShow: {\n                type: Boolean,\n                default: false,\n            },\n            scriptVersionId: {\n                type: Number,\n                required: true,\n            },\n        },\n        data () {\n            return {\n                isLoading: false,\n                scriptInfo: {},\n            };\n        },\n        watch: {\n            isShow (isShow) {\n                if (isShow && this.scriptVersionId > 0) {\n                    this.fetchScriptDetail();\n                }\n            },\n        },\n        created () {\n            this.publicScript = checkPublicScript(this.$route);\n            this.serviceHandler = this.publicScript ? PublicScriptService : ScriptService;\n        },\n        methods: {\n            fetchScriptDetail () {\n                this.isLoading = true;\n                this.serviceHandler.versionDetail({\n                    id: this.scriptVersionId,\n                }).then((data) => {\n                    this.scriptInfo = Object.freeze(data);\n                })\n                    .finally(() => {\n                        this.isLoading = false;\n                    });\n            },\n            handleCancel () {\n                this.$emit('update:isShow', false);\n            },\n        },\n    };\n</script>\n<style lang='postcss' scoped>\n    %tab-item {\n        display: flex;\n        align-items: center;\n        height: 43px;\n        padding-left: 20px;\n        font-size: 12px;\n    }\n\n    .script-detail {\n        position: relative;\n\n        .detail-layout {\n            margin-bottom: 20px;\n\n            .script-detail-version {\n                font-size: 18px;\n                color: #000;\n            }\n\n            .script-detail-status {\n                width: 46px;\n                height: 16px;\n                padding: 0 5px;\n                margin-right: 10px;\n                margin-left: 8px;\n                font-size: 12px;\n                text-align: center;\n            }\n\n            .status-online {\n                color: #45c272;\n                background-color: #e5f6ea;\n            }\n\n            .status-disabled {\n                color: #9fa2ac;\n                background: #f0f1f5;\n            }\n\n            .detail-item {\n                margin-top: 10px;\n                margin-bottom: 0;\n            }\n        }\n\n        .render-script-version {\n            display: flex;\n            margin-bottom: 60px;\n        }\n\n        .version-tab {\n            display: flex;\n            flex-direction: column;\n            flex: 0 0 280px;\n            border: 1px solid #dcdee5;\n            user-select: none;\n\n            .version-tab-title {\n                @extend %tab-item;\n\n                color: #313238;\n                border-bottom: 1px solid #dcdee5;\n            }\n\n            .version-tab-item {\n                @extend %tab-item;\n\n                color: #63656e;\n                cursor: pointer;\n                background: #fff;\n                border-bottom: 1px solid #dcdee5;\n\n                &.active {\n                    color: #3a84ff;\n                    background: #f0f1f5 !important;\n\n                    .version-active {\n                        display: block;\n                    }\n                }\n\n                &:hover {\n                    background: #fafbfd;\n                }\n\n                .text {\n                    max-width: 150px;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n                    white-space: normal;\n                }\n\n                .online-flag {\n                    display: flex;\n                    width: 50px;\n                    height: 16px;\n                    margin-left: 8px;\n                    color: #fff;\n                    background: #ea3636;\n                    border-radius: 8px;\n                    align-items: center;\n                    justify-content: center;\n                }\n\n                .version-active {\n                    display: none;\n                    margin-right: 12px;\n                    margin-left: auto;\n                    font-size: 14px;\n                    color: #979ba5;\n                }\n            }\n        }\n\n        .version-content {\n            display: flex;\n            background-color: #f0f1f5;\n            border: 1px solid #dcdee5;\n            flex-direction: column;\n            flex: 1;\n\n            .content-tab {\n                display: flex;\n                border-bottom: 1px solid #dcdee5;\n            }\n\n            .content-tab-item {\n                @extend %tab-item;\n\n                padding-left: 0;\n                color: #313238;\n                cursor: pointer;\n                border-right: 1px solid #dcdee5;\n                flex: 0 0 120px;\n                align-items: center;\n                justify-content: center;\n\n                &.active {\n                    color: #3a84ff;\n                    background: #fff;\n                    border-top: 2px solid #3a84ff;\n                }\n            }\n\n            .content-dispaly {\n                min-height: 300px;\n                background: #fff;\n                flex: 1;\n            }\n        }\n\n        .render-version-log {\n            min-height: 480px;\n            padding: 12px 10px;\n            font-size: 12px;\n            line-height: 20px;\n            color: #63656e;\n            white-space: pre-line;\n        }\n\n        .action-btn {\n            width: 100px;\n            margin-right: 10px;\n        }\n    }\n</style>\n","<template>\n    <div class=\"script-manage-sync-task-page\" v-bkloading=\"{ isLoading }\">\n        <div class=\"retry-btn\">\n            <bk-button  @click=\"handleAllRetry\">{{ '全部重试' }}</bk-button>\n        </div>\n        <div class=\"table-top\">\n            {{ '同步作业模板' }}\n            <span class=\"version-sum\">\n                （{{ '共' }} {{ data.length }} {{ '个'}}）\n            </span>\n        </div>\n        <bk-table :data=\"data\" row-class-name=\"sync-script-record\">\n            <bk-table-column\n                :label=\"'作业模板名称'\"\n                prop=\"name\"\n                sortable>\n                <template slot-scope=\"{ row }\">\n                    <router-link\n                        target=\"_blank\"\n                        :to=\"{\n                            name: 'templateDetail',\n                            params: {\n                                id: 4 || row.templateId,\n                            },\n                        }\">\n                        {{ row.templateName }}\n                        <Icon type=\"edit\" class=\"template-link\" />\n                    </router-link>\n                </template>\n            </bk-table-column>\n            <bk-table-column :label=\"'步骤名称'\" prop=\"stepName\" />\n            <bk-table-column :label=\"'引用的版本号'\" prop=\"version\">\n                <template slot-scope=\"{ row }\">\n                    <bk-button\n                        text\n                        @click=\"handleShowDetail(row.scriptVersionId)\">\n                        {{ row.scriptVersion }}\n                    </bk-button>\n                </template>\n            </bk-table-column>\n            <bk-table-column\n                :label=\"'引用版本状态'\"\n                prop=\"status\"\n                :filters=\"statusFilters\"\n                :filter-method=\"statusFilterMethod\"\n                :filter-multiple=\"true\">\n                <template slot-scope=\"{ row }\">\n                    <span v-html=\"row.statusHtml\" />\n                </template>\n            </bk-table-column>\n            <bk-table-column\n                :label=\"'状态'\"\n                width=\"350\"\n                prop=\"syncStatus\">\n                <template slot-scope=\"{ row, $index }\">\n                    <Icon :type=\"row.syncIcon\" svg class=\"mr10\" />\n                    <span>{{ row.syncStatusMsg }}</span>\n                    <bk-button\n                        v-if=\"row.isSyncFailed\"\n                        :tippy-tips=\"row.failMsg\"\n                        text\n                        style=\"margin-left: 15px;\"\n                        @click=\"handleRetry(row, $index)\">\n                        {{ '重试' }}\n                    </bk-button>\n                </template>\n            </bk-table-column>\n        </bk-table>\n        <div class=\"footer-action\">\n            <bk-button\n                class=\"w120\"\n                theme=\"primary\"\n                @click=\"handleFinish\">\n                {{ '完成' }}\n            </bk-button>\n        </div>\n        <script-detail :is-show.sync=\"isShowDetail\" :script-version-id=\"selectScriptVersionId\" />\n        <element-teleport v-if=\"lastVersionScriptInfo.version\">\n            <span> - {{ '同步至' }}</span>\n            <span>{{ lastVersionScriptInfo.version }}</span>\n        </element-teleport>\n    </div>\n</template>\n<script>\n       import {\n        checkPublicScript,\n        leaveConfirm,\n    } from '@utils/assist';\n    import ScriptService from '@service/script-manage';\n    import PublicScriptService from '@service/public-script-manage';\n    import TaskPlanService from '@service/task-plan';\n    import ScriptDetail from './components/script-detail';\n\n    export default {\n        components: {\n            ScriptDetail,\n        },\n        data () {\n            return {\n                data: [{},{},{}],\n                isLoading: false,\n                isShowDetail: false,\n                selectScriptVersionId: 0,\n                lastVersionScriptInfo: {},\n            };\n        },\n        computed: {\n            isRetryAllDisable () {\n                // eslint-disable-next-line no-plusplus\n                for (let i = 0; i < this.data.length; i++) {\n                    if (this.data[i].isSyncFailed) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n        },\n        created () {\n            this.statusFilters = [\n                { value: 0, text: '未上线' },\n                { value: 1, text: '已上线' },\n                { value: 2, text: '已下线' },\n                { value: 3, text: '已禁用' },\n            ];\n            this.publicScript = checkPublicScript(this.$route);\n            this.serviceHandler = this.publicScript ? PublicScriptService : ScriptService;\n            this.scriptId = this.$route.params.scriptId;\n            this.scriptVersionId = this.$route.params.scriptVersionId;\n            this.stepList = JSON.parse(localStorage.getItem('SYNC_TEMPLATE_STEP_SCRIPT'));\n            if (this.stepList.length < 1) {\n                this.messageError('请先选择作业模板步骤');\n                return;\n            }\n            this.fetchData();\n            this.fetchLastScriptVersionDetail();\n        },\n        methods: {\n            /**\n             * @desc 开始同步脚本\n             */\n            fetchData () {\n                this.isLoading = true;\n                this.serviceHandler.scriptVersionSync({\n                    scriptId: this.scriptId,\n                    scriptVersionId: this.scriptVersionId,\n                    steps: this.stepList,\n                }).then((data) => {\n                    this.data = data;\n                })\n                    .finally(() => {\n                        this.isLoading = false;\n                    });\n            },\n            /**\n             * @desc 脚本的最新版本信息\n             */\n            fetchLastScriptVersionDetail () {\n                this.serviceHandler.versionDetail({\n                    id: this.$route.params.scriptVersionId,\n                }).then((data) => {\n                    this.lastVersionScriptInfo = Object.freeze(data);\n                });\n            },\n            /**\n             * @desc 脚本详情\n             * @param { Number } id\n             */\n            handleShowDetail (id) {\n                this.selectScriptVersionId = id;\n                this.isShowDetail = true;\n            },\n            /**\n             * @desc 全部重试\n             */\n            handleAllRetry () {\n                this.fetchData();\n            },\n            /**\n             * @desc 单个重试\n             */\n            handleRetry (row, index) {\n                this.serviceHandler.scriptVersionSync({\n                    scriptId: this.scriptId,\n                    scriptVersionId: this.scriptVersionId,\n                    steps: [\n                        {\n                            templateid: 4 || row.templateId,\n                            stepid: 4 || row.stepId,\n                        },\n                    ],\n                }).then((data) => {\n                    this.data.splice(index, 1, data[0]);\n                });\n            },\n            /**\n             * @desc 数据过滤\n             * @param {Number} value 选中的状态\n             * @param {Object} row 单条数据\n             */\n            statusFilterMethod (value, row) {\n                return row.scriptStatus === value;\n            },\n            /**\n             * @desc 完成同步任务\n             */\n            handleFinish () {\n                this.routerBack();\n            },\n            /**\n             * @desc 路由回退\n             */\n            routerBack () {\n                window.changeAlert = !this.isRetryAllDisable;\n                this.isSyncPlanLoading = false;\n                leaveConfirm('部分作业模板同步失败，请留意')\n                    .then(() => {\n                        this.$bkInfo({\n                            title: '是否需要进行执行方案同步？',\n                            closeIcon: false,\n                            subHeader: (() => (\n                                <div>\n                                    <span>{ '点击' }</span>\n                                    <span style=\"font-weight: bold\"> { '“立即前往”' } </span>\n                                    <span>{ '将进入关联的执行方案同步确认页面，点击' }</span>\n                                    <span style=\"font-weight: bold\"> { '“暂时不用”' } </span>\n                                    <span>{ '结束本次操作并退出。' }</span>\n                                </div>\n                            ))(),\n                            okText: '立即前往',\n                            cancelText: '暂时不用',\n                            // 获取同步的作业模板对应的执行方案列表，批量同步需要同步的执行方案\n                            confirmFn: () => TaskPlanService.fetchBatchTaskPlan({\n                                templateIds: this.stepList.map(({ templateId }) => templateId).join(','),\n                            }).then((planList) => {\n                                // 跳转批量同步执行方案页面\n                                this.$router.push({\n                                    name: 'syncPlanBatch',\n                                    query: {\n                                        planIds: planList.reduce((result, plan) => {\n                                            if (plan.needUpdate) {\n                                                result.push(plan.id);\n                                            }\n                                            return result;\n                                        }, []).join(','),\n                                    },\n                                });\n                            }),\n                            cancelFn: () => {\n                                const routerName = this.publicScript ? 'publicScriptVersion' : 'scriptVersion';\n                                this.$router.push({\n                                    name: routerName,\n                                    params: {\n                                        id: this.scriptId,\n                                    },\n                                });\n                            },\n                        });\n                    });\n            },\n        },\n    };\n</script>\n<style lang=\"postcss\">\n    .script-manage-sync-task-page {\n        .sync-script-record {\n            &:hover {\n                .template-link {\n                    opacity: 100%;\n                }\n            }\n        }\n\n        .template-link {\n            font-size: 12px;\n            opacity: 0%;\n        }\n\n        .retry-btn {\n            display: flex;\n            align-items: center;\n            justify-content: flex-end;\n            margin-bottom: 20px;\n        }\n\n        .table-top {\n            height: 42px;\n            padding: 0 20px;\n            margin-top: 16px;\n            font-size: 12px;\n            line-height: 42px;\n            background-color: #f0f1f5;\n        }\n\n        .version-sum {\n            color: #a3a6af;\n        }\n\n        .status-action {\n            display: inline-block;\n            width: 46px;\n            height: 16px;\n            font-size: 12px;\n            color: #9fa2ac;\n            text-align: center;\n            background-color: #f0f1f5;\n        }\n\n        .failed-sync-status {\n            border-bottom: 1px dashed #c4c6cc;\n        }\n\n        .try-show {\n            display: visible;\n            padding-left: 10px;\n        }\n\n        .try-hide {\n            display: none;\n        }\n\n        .footer-action {\n            position: fixed;\n            bottom: 0;\n            left: 0;\n            display: flex;\n            width: 100%;\n            height: 52px;\n            padding-right: 24px;\n            background: #fff;\n            border-top: 1px solid #e2e2e2;\n            align-items: center;\n            justify-content: flex-end;\n        }\n    }\n</style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"jb-sideslider\",\n    {\n      attrs: {\n        \"is-show\": _vm.isShow,\n        \"show-footer\": false,\n        \"quick-close\": true,\n        width: 900,\n        title: \"查看脚本\",\n      },\n      on: { \"update:isShow\": _vm.handleCancel },\n    },\n    [\n      _vm.isShow\n        ? _c(\n            \"div\",\n            {\n              directives: [\n                {\n                  name: \"bkloading\",\n                  rawName: \"v-bkloading\",\n                  value: { isLoading: _vm.isLoading },\n                  expression: \"{ isLoading }\",\n                },\n              ],\n            },\n            [\n              !_vm.isLoading\n                ? _c(\"script-detail\", {\n                    attrs: {\n                      \"script-info\": _vm.scriptInfo,\n                      \"offset-bottom\": 0,\n                    },\n                  })\n                : _vm._e(),\n            ],\n            1\n          )\n        : _vm._e(),\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./script-detail.vue?vue&type=template&id=06891118&scoped=true&\"\nimport script from \"./script-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./script-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./script-detail.vue?vue&type=style&index=0&id=06891118&lang=postcss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06891118\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('06891118')) {\n      api.createRecord('06891118', component.options)\n    } else {\n      api.reload('06891118', component.options)\n    }\n    module.hot.accept(\"./script-detail.vue?vue&type=template&id=06891118&scoped=true&\", function () {\n      api.rerender('06891118', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/script-manage/sync-task/components/script-detail.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      directives: [\n        {\n          name: \"bkloading\",\n          rawName: \"v-bkloading\",\n          value: { isLoading: _vm.isLoading },\n          expression: \"{ isLoading }\",\n        },\n      ],\n      staticClass: \"script-manage-sync-task-page\",\n    },\n    [\n      _c(\n        \"div\",\n        { staticClass: \"retry-btn\" },\n        [\n          _c(\"bk-button\", { on: { click: _vm.handleAllRetry } }, [\n            _vm._v(_vm._s(\"全部重试\")),\n          ]),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"table-top\" }, [\n        _vm._v(\"\\n        \" + _vm._s(\"同步作业模板\") + \"\\n        \"),\n        _c(\"span\", { staticClass: \"version-sum\" }, [\n          _vm._v(\n            \"\\n            （\" +\n              _vm._s(\"共\") +\n              \" \" +\n              _vm._s(_vm.data.length) +\n              \" \" +\n              _vm._s(\"个\") +\n              \"）\\n        \"\n          ),\n        ]),\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"bk-table\",\n        { attrs: { data: _vm.data, \"row-class-name\": \"sync-script-record\" } },\n        [\n          _c(\"bk-table-column\", {\n            attrs: { label: \"作业模板名称\", prop: \"name\", sortable: \"\" },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function (ref) {\n                  var row = ref.row\n                  return [\n                    _c(\n                      \"router-link\",\n                      {\n                        attrs: {\n                          target: \"_blank\",\n                          to: {\n                            name: \"templateDetail\",\n                            params: {\n                              id: 4 || row.templateId,\n                            },\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n                    \" +\n                            _vm._s(row.templateName) +\n                            \"\\n                    \"\n                        ),\n                        _c(\"Icon\", {\n                          staticClass: \"template-link\",\n                          attrs: { type: \"edit\" },\n                        }),\n                      ],\n                      1\n                    ),\n                  ]\n                },\n              },\n            ]),\n          }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: { label: \"步骤名称\", prop: \"stepName\" },\n          }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: { label: \"引用的版本号\", prop: \"version\" },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function (ref) {\n                  var row = ref.row\n                  return [\n                    _c(\n                      \"bk-button\",\n                      {\n                        attrs: { text: \"\" },\n                        on: {\n                          click: function ($event) {\n                            return _vm.handleShowDetail(row.scriptVersionId)\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n                    \" +\n                            _vm._s(row.scriptVersion) +\n                            \"\\n                \"\n                        ),\n                      ]\n                    ),\n                  ]\n                },\n              },\n            ]),\n          }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: {\n              label: \"引用版本状态\",\n              prop: \"status\",\n              filters: _vm.statusFilters,\n              \"filter-method\": _vm.statusFilterMethod,\n              \"filter-multiple\": true,\n            },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function (ref) {\n                  var row = ref.row\n                  return [\n                    _c(\"span\", {\n                      domProps: { innerHTML: _vm._s(row.statusHtml) },\n                    }),\n                  ]\n                },\n              },\n            ]),\n          }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: { label: \"状态\", width: \"350\", prop: \"syncStatus\" },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function (ref) {\n                  var row = ref.row\n                  var $index = ref.$index\n                  return [\n                    _c(\"Icon\", {\n                      staticClass: \"mr10\",\n                      attrs: { type: row.syncIcon, svg: \"\" },\n                    }),\n                    _vm._v(\" \"),\n                    _c(\"span\", [_vm._v(_vm._s(row.syncStatusMsg))]),\n                    _vm._v(\" \"),\n                    row.isSyncFailed\n                      ? _c(\n                          \"bk-button\",\n                          {\n                            staticStyle: { \"margin-left\": \"15px\" },\n                            attrs: { \"tippy-tips\": row.failMsg, text: \"\" },\n                            on: {\n                              click: function ($event) {\n                                return _vm.handleRetry(row, $index)\n                              },\n                            },\n                          },\n                          [\n                            _vm._v(\n                              \"\\n                    \" +\n                                _vm._s(\"重试\") +\n                                \"\\n                \"\n                            ),\n                          ]\n                        )\n                      : _vm._e(),\n                  ]\n                },\n              },\n            ]),\n          }),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"footer-action\" },\n        [\n          _c(\n            \"bk-button\",\n            {\n              staticClass: \"w120\",\n              attrs: { theme: \"primary\" },\n              on: { click: _vm.handleFinish },\n            },\n            [_vm._v(\"\\n            \" + _vm._s(\"完成\") + \"\\n        \")]\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"script-detail\", {\n        attrs: {\n          \"is-show\": _vm.isShowDetail,\n          \"script-version-id\": _vm.selectScriptVersionId,\n        },\n        on: {\n          \"update:isShow\": function ($event) {\n            _vm.isShowDetail = $event\n          },\n          \"update:is-show\": function ($event) {\n            _vm.isShowDetail = $event\n          },\n        },\n      }),\n      _vm._v(\" \"),\n      _vm.lastVersionScriptInfo.version\n        ? _c(\"element-teleport\", [\n            _c(\"span\", [_vm._v(\" - \" + _vm._s(\"同步至\"))]),\n            _vm._v(\" \"),\n            _c(\"span\", [_vm._v(_vm._s(_vm.lastVersionScriptInfo.version))]),\n          ])\n        : _vm._e(),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=552267b0&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('552267b0')) {\n      api.createRecord('552267b0', component.options)\n    } else {\n      api.reload('552267b0', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=552267b0&\", function () {\n      api.rerender('552267b0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/script-manage/sync-task/index.vue\"\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=style&index=0&id=06891118&lang=postcss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"642e24d8\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=style&index=0&id=06891118&lang=postcss&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=style&index=0&id=06891118&lang=postcss&scoped=true&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"09084e52\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\", function() {\n     var newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}"],"names":["name","components","ScriptDetail","props","isShow","type","default","scriptVersionId","required","data","isLoading","scriptInfo","watch","created","methods","fetchScriptDetail","id","then","finally","handleCancel","isShowDetail","selectScriptVersionId","lastVersionScriptInfo","computed","isRetryAllDisable","value","text","fetchData","scriptId","steps","fetchLastScriptVersionDetail","handleShowDetail","handleAllRetry","handleRetry","templateid","stepid","statusFilterMethod","handleFinish","routerBack","window","title","closeIcon","subHeader","okText","cancelText","confirmFn","templateIds","query","planIds","result","join","cancelFn","params","render","_vm","this","_h","$createElement","_c","_self","attrs","width","on","directives","rawName","expression","_e","_withStripped","component","options","__file","staticClass","click","_v","_s","length","label","prop","sortable","scopedSlots","_u","key","fn","ref","row","target","to","templateName","$event","scriptVersion","filters","statusFilters","domProps","innerHTML","statusHtml","$index","syncIcon","svg","syncStatusMsg","isSyncFailed","staticStyle","failMsg","theme","version","content","__esModule","module","locals","exports","add"],"sourceRoot":""}