(self.webpackChunkjob=self.webpackChunkjob||[]).push([[1456],{67527:function(t,e,a){"use strict";a(35927),a(45974),a(43364);var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(87033),a(35948),a(94522),a(71959),a(9042),a(23232),a(80433),a(7170);var i=s(a(33610)),n=s(a(38502)),r=s(a(15399)),l=s(a(47124)),o=s(a(52189)),c=s(a(81920)),f=s(a(63715));function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}var u={name:"",components:{GlobalVariableLayout:o.default,GlobalVariable:c.default,Empty:f.default},props:{data:{type:Object,default:function(){return{}}},variableList:{type:Array,required:!0}},data:()=>({isLoading:!1,isEmpty:!1,isEditing:!1,isSubmiting:!1,info:{name:"",enable:!0,hasConfirm:!1,variableValue:[]}}),computed:{readonly(){return!this.data.enable||!this.isEditing&&this.info.hasConfirm}},created(){this.data.id&&(this.info=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){(0,i.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},this.data),this.isEditing=!this.info.hasConfirm,this.info.hasConfirm||(this.info.variableValue=Object.freeze((0,n.default)(this.variableList)),this.fetchData()))},methods:{fetchData(){var t=this;this.isLoading=!0,l.default.getDetail({id:this.data.id}).then((function(e){var a=e.name,s=e.variableValue;if(t.info.name=a,t.variableList.length<1)return t.isEmpty=!0,void t.$emit("on-change",[]);var i=s.reduce((function(t,e){return t[e.id]=e,t}),{});t.info.variableValue.forEach((function(t){if(i[t.id]){var e=i[t.id],a=e.value,s=e.targetValue;t.defaultValue=a,t.defaultTargetValue=s}}))})).finally((function(){t.isLoading=!1}))},handleToggleEdit(){this.isEditing=!0,this.$emit("on-update-confirm",!1)},handleSubmit(){var t=this;Promise.all(this.$refs.variable.map((function(t){return t.validate()}))).then((function(e){window.changeAlert=!1,t.isEditing=!1,t.info.hasConfirm=!0,t.info.variableValue=Object.freeze(e),t.messageSuccess(r.default.t("template.定时任务确认成功")),t.$emit("on-change",Object.freeze(e))}))},handleReset(){this.$refs.variable.forEach((function(t){return t.reset()}))}}};e.Z=u},1468:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(70969),a(87033),a(9042),a(90004);var i=s(a(39986)),n=s(a(94498)),r=s(a(29637)),l=a(88777),o=a(54051),c=function(t){return!t||!t.variable&&(!(t.hostNodeInfo.topoNodeList.length>0)&&(!(t.hostNodeInfo.ipList.length>0)&&!(t.hostNodeInfo.dynamicGroupList.length>0)))},f={name:"",components:{ScrollFaker:n.default,ServerPanel:r.default},props:{preHost:{type:Object,required:!0},lastHost:{type:Object,required:!0}},data:()=>({isShowDetail:!1,isShowDiff:!1,variableName:"",ipText:"",hostEqual:!0,hostNodeInfo:{},nodeDiff:{},hostDiff:{},groupDiff:{}}),computed:{isNotEmpty(){return this.variableName||this.ipText},diffEnable(){return!c(this.preHost)&&!c(this.lastHost)&&!this.hostEqual}},created(){var t=new i.default({}).hostNodeInfo;this.originHostNodeInfo=Object.freeze(t),this.hostNodeInfo=Object.freeze(t),this.composeNode=[],this.diffNodeMemo={},this.composeHost=[],this.diffHostMemo={},this.composeGroup=[],this.diffGroupMemo={}},mounted(){this.stepParent=(0,l.findParent)(this,"DiffTaskStep"),this.dataSourceParent=(0,l.findParent)(this,"SyncPlanStep2"),this.init(),this.checkDiff()},methods:{init(){var t=this.preHost;if("sync-after"===this.stepParent.type&&(t=this.lastHost),t.variable){this.variableName=t.variable;var e=(0,o.findVariable)(this.dataSourceParent.planVariableList,this.variableName);this.originHostNodeInfo=Object.freeze(e.defaultTargetValue.hostNodeInfo)}else this.originHostNodeInfo=Object.freeze(t.hostNodeInfo),this.ipText=t.text;this.hostNodeInfo=this.originHostNodeInfo},checkDiff(){var t=this,e=this.preHost.hostNodeInfo,a=this.lastHost.hostNodeInfo;if(this.preHost.variable){var s=(0,o.findVariable)(this.dataSourceParent.planVariableList,this.preHost.variable);s&&(e=s.defaultTargetValue.hostNodeInfo)}if(this.lastHost.variable){var i=(0,o.findVariable)(this.dataSourceParent.templateVariableList,this.lastHost.variable);i&&(a=i.defaultTargetValue.hostNodeInfo)}var n={},r=[],l=function(t){return"#".concat(t.type,"#").concat(t.id)};a.topoNodeList.forEach((function(t){n[l(t)]="new",r.push(t)})),e.topoNodeList.forEach((function(t){var e=l(t);n[e]?n[e]="same":(n[e]="delete",r.push(t))})),this.composeNode=Object.freeze(r),this.diffNodeMemo=Object.freeze(n),Object.values(this.diffNodeMemo).forEach((function(e){"same"!==e&&(t.hostEqual=!1)}));var c={},f=[],d=function(t){return"".concat(t.cloudAreaInfo.id,":").concat(t.ip)};a.ipList.forEach((function(t){c[d(t)]="new",f.push(t)})),e.ipList.forEach((function(t){var e=d(t);c[e]?c[e]="same":(c[e]="delete",f.push(t))})),this.composeHost=Object.freeze(f),this.diffHostMemo=Object.freeze(c),Object.values(this.diffHostMemo).forEach((function(e){"same"!==e&&(t.hostEqual=!1)}));var u={},p=[];a.dynamicGroupList.forEach((function(t){u[t]="new",p.push(t)})),e.dynamicGroupList.forEach((function(t){u[t]?u[t]="same":(u[t]="delete",p.push(t))})),this.composeGroup=Object.freeze(p),this.diffGroupMemo=Object.freeze(u),Object.values(this.diffGroupMemo).forEach((function(e){"same"!==e&&(t.hostEqual=!1)}))},handlerView(){this.hostNodeInfo=this.originHostNodeInfo,this.nodeDiff={},this.hostDiff={},this.groupDiff={},this.isShowDetail=!0,this.isShowDiff=!1},handleToggleDiff(t){t?(this.hostNodeInfo=Object.freeze({dynamicGroupList:this.composeGroup,ipList:this.composeHost,topoNodeList:this.composeNode}),this.nodeDiff=this.diffNodeMemo,this.hostDiff=this.diffHostMemo,this.groupDiff=this.diffGroupMemo):this.handlerView()}}};e.Z=f},70576:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var i={name:"",components:{HostDetail:s(a(66095)).default},props:{data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}},type:{type:String,default:""}},computed:{classes(){var t="".concat(this.data.realId);return this.diff[t]?this.diff[t].type:""},diffValue(){var t="".concat(this.data.realId);return this.diff[t]&&this.diff[t].value||{}}}};e.Z=i},43772:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(70969),a(87033),a(9042);var i=s(a(93435)),n=s(a(15399)),r=s(a(39986)),l=a(88777),o=s(a(94498)),c=s(a(29637)),f={name:"StepViewGlobalVariable",components:{ScrollFaker:o.default,ServerPanel:c.default},props:{type:{type:String,default:""},name:{type:String,required:!0},data:{type:Object,default:function(){return{}}},diffEnable:{type:Boolean,default:!1}},data:()=>({isShowDetail:!1,isShowDiff:!1,hostNodeInfo:{dynamicGroupList:[],ipList:[],topoNodeList:[]},nodeDiff:{},hostDiff:{},groupDiff:{}}),computed:{title(){return this.type?this.type:"".concat(n.default.t("template.全局变量.label")," - ").concat(this.name)}},mounted(){this.composeNode=[],this.diffNodeMemo={},this.composeHost=[],this.diffHostMemo={},this.composeGroup=[],this.diffGroupMemo={},this.checkDiff()},methods:{checkDiff(){var t=this,e=function(){return{defaultTargetValue:{hostNodeInfo:new r.default({}).hostNodeInfo}}},a=(0,l.findParent)(this,"SyncPlanStep2"),s=(0,i.default)(a.planVariableList,(function(e){return e.name===t.name}));s||(s=e());var n=(0,i.default)(a.templateVariableList,(function(e){return e.name===t.name}));n||(n=e());var o=s.defaultTargetValue.hostNodeInfo,c=n.defaultTargetValue.hostNodeInfo,f={},d=[],u=function(t){return"".concat(t.type,"_").concat(t.id)};c.topoNodeList.forEach((function(t){f[u(t)]="new",d.push(t)})),o.topoNodeList.forEach((function(t){f[u(t)]?f[u(t)]="normal":(f[u(t)]="delete",d.push(t))})),this.composeNode=Object.freeze(d),this.diffNodeMemo=Object.freeze(f);var p={},v=[],h=function(t){return"".concat(t.cloudAreaInfo.id,"_").concat(t.ip)};c.ipList.forEach((function(t){p[h(t)]="new",v.push(t)})),o.ipList.forEach((function(t){p[h(t)]?p[h(t)]="normal":(p[h(t)]="delete",v.push(t))})),this.composeHost=Object.freeze(v),this.diffHostMemo=Object.freeze(p);var m={},_=[];c.dynamicGroupList.forEach((function(t){m[t]="new",_.push(t)})),o.dynamicGroupList.forEach((function(t){m[t]?m[t]="normal":(m[t]="delete",_.push(t))})),this.composeGroup=Object.freeze(_),this.diffGroupMemo=Object.freeze(m)},handlerView(){this.hostNodeInfo=Object.freeze(this.data.hostNodeInfo),this.nodeDiff={},this.hostDiff={},this.groupDiff={},this.isShowDetail=!0},handleToggleDiff(t){t?(this.hostNodeInfo=Object.freeze({dynamicGroupList:this.composeGroup,ipList:this.composeHost,topoNodeList:this.composeNode}),this.nodeDiff=this.diffNodeMemo,this.hostDiff=this.diffHostMemo,this.groupDiff=this.diffGroupMemo):this.handlerView()}}};e.Z=f},66204:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(87033),a(35948),a(94522),a(23232),a(80433),a(9042),a(7170);var i=s(a(1249)),n=s(a(46117)),r={name:"",inheritAttrs:!1,props:{data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}}},data:()=>({renderRoleList:[],renderChannel:""}),created(){var t=this;Promise.all([this.fetchRoleList(),this.fetchAllChannel()]).finally((function(){t.isLoading=!1}))},methods:{fetchRoleList(){var t=this;n.default.fetchRoleList().then((function(e){var a={};e.forEach((function(t){a[t.code]=t.name})),t.renderRoleList=t.data.approvalUser.roleList.map((function(t){return a[t]}))}))},fetchAllChannel(){var t=this;i.default.fetchActiveNotifyChannel().then((function(e){var a={};e.forEach((function(t){a[t.code]=t.name})),t.renderChannel=t.data.notifyChannel.map((function(t){return a[t]})).join("，")}))}}};e.Z=r},57942:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var i=a(88777),n=s(a(59926)),r=a(54051),l={name:"SyncPlanFileExecuteTarget",components:{IpDetail:n.default},data:()=>({preHost:{},lastHost:{}}),created(){var t=(0,i.findParent)(this,"SyncPlanStep2"),e=(0,i.findParent)(this,"DiffTaskStep").data.realId,a=(0,r.findStep)(t.planStepList,e),s=(0,r.findStep)(t.templateStepList,e);this.preHost=Object.freeze(a.fileStepInfo.fileDestination.server),this.lastHost=Object.freeze(s.fileStepInfo.fileDestination.server)}};e.Z=l},68656:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var i=s(a(39986)),n=s(a(59926)),r=function(){return new i.default({})},l={name:"SyncPlanFileSourceServer",components:{IpDetail:n.default},props:{preHost:{type:Object,default:function(){return{}}},lastHost:{type:Object,default:function(){return{}}}},created(){this.preHost&&this.preHost.hostNodeInfo?this.realPreHost=this.preHost:this.realPreHost=r(),this.lastHost&&this.lastHost.hostNodeInfo?this.realLastHost=this.lastHost:this.realLastHost=r()}};e.Z=l},77501:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(57024),a(5580),a(87033),a(9042),a(7170),a(77036),a(70969),a(71959);var i=s(a(24437)),n=s(a(36166)),r=s(a(12584)),l=a(88777),o=a(54051),c=s(a(12471)),f={name:"",components:{JbCollapseItem:r.default,FileSourceServer:c.default},props:{id:{type:Number,required:!0},data:{type:Array,default:function(){return[]}},account:{type:Array,default:function(){return[]}}},data:()=>({activeResult:["local","server"],localFileCount:0,serverFileCount:0,localFileList:[],serverFileList:[],localFileDiff:{},serverFileDiff:{}}),computed:{isShowLocalFile(){return this.localFileList.length>0},isShowServerFile(){return this.serverFileList.length>0}},created(){this.preServerList=[],this.lastServerList=[],this.checkDiff()},methods:{generatorAccountAlias(t){var e=this.account.find((function(e){return e.id===t}));return e?e.alias:""},checkDiff(){var t=(0,l.findParent)(this,"SyncPlanStep2"),e=(0,o.findStep)(t.planStepList,this.id),a=(0,o.findStep)(t.templateStepList,this.id),s=[],r=[],c=[],f=[];a.fileStepInfo.fileSourceList.forEach((function(t){var e=new n.default(t);e.isServerFile?r.push(e):s.push(e)})),e.fileStepInfo.fileSourceList.forEach((function(t){var e=new n.default(t);e.isServerFile?f.push(e):c.push(e)}));var d=(0,l.findParent)(this,"DiffTaskStep");if("sync-after"===d.type?(this.localFileCount=s.length,this.serverFileCount=r.length):(this.localFileCount=c.length,this.serverFileCount=f.length),!t.stepDiff[this.id]||t.stepDiff[this.id]&&"new"===t.stepDiff[this.id].type)return this.localFileList=Object.freeze(s),this.localFileDiff=Object.freeze({}),this.preServerList=Object.freeze(r.map((function(t){return{}}))),this.lastServerList=Object.freeze(r),void(this.serverFileDiff=Object.freeze({}));var u=function(t,e){var a={};return["host","account"].forEach((function(s){a[s]=JSON.stringify(t[s])===JSON.stringify(e[s])?"":"changed"})),a},p={},v=[];s.forEach((function(t){v.push(t),p[t.realId]="new"}));for(var h=null,m=0,_=function(t){var e=c[t];if(p[e.realId]){if(p[e.realId]="same",m+=1,h){var a=(0,i.default)(v,(function(t){return t.realId===e.realId}));v.splice(a,0,h),h=null}return"continue"}h&&(m+=1,v.splice(m,0,h)),p[e.realId]="delete",h=e},b=0;b<c.length;b++)_(b);h&&(m+=1,v.splice(m,0,h));for(var y={},g={},C=[],S=0;S<r.length;S++){var I=r[S];if(y[I.realId]){y[I.realId].push(I);var w="".concat(I.realId,"_").concat(Math.random(),"_").concat(Math.random());I.sameFileKey=w,g[w]={type:"new"}}else y[I.realId]=[I];C.push(I),g[I.realId]={type:"new"}}for(var L=null,k=0,j=function(t){var e=f[t];if(g[e.realId]){if(k+=1,L){var a=(0,i.default)(C,(function(t){return t.realId===e.realId}));C.splice(a,0,L),L=null}var s=y[e.realId].shift();if(s)s.sameFileKey?(g[s.sameFileKey]={type:"different",value:u(s,e)},e.sameFileKey=s.sameFileKey):g[e.realId]={type:"different",value:u(s,e)};else{var n=(0,i.default)(C,(function(t){return t.realId===e.realId}));C.splice(n+1,0,L),L=null}return"continue"}L&&(k+=1,C.splice(k,0,L)),g[e.realId]={type:"delete"},L=e},O=0;O<f.length;O++)j(O);L&&(k+=1,C.splice(k,0,L)),this.lastServerList=C,"sync-after"===d.type&&(this.localFileList=Object.freeze(v),this.localFileDiff=Object.freeze(p),this.serverFileList=Object.freeze(C),this.serverFileDiff=Object.freeze(g));for(var $=v.map((function(t){return"new"===p[t.realId]?{}:t})),x=Object.keys(p).reduce((function(t,e){return"different"===p[e].type&&(t[e]=p[e]),t}),{}),D=[],T={},E=0;E<C.length;E++){var P=C[E];if(g[P.sameFileKey]&&"new"===g[P.sameFileKey].type)D.push({});else if("new"!==g[P.realId].type)for(var V=0;V<f.length;V++){var Z=f[V];if(!T[V]&&(P.sameFileKey&&P.sameFileKey===Z.sameFileKey||P.realId===Z.realId)){T[V]=!0,D.push(Z);break}}else D.push({})}var N=Object.keys(g).reduce((function(t,e){return"different"===g[e].type&&(t[e]=g[e]),t}),{});"sync-before"===d.type&&(this.localFileList=Object.freeze($),this.localFileDiff=Object.freeze(x),this.serverFileList=Object.freeze(D),this.serverFileDiff=Object.freeze(N)),this.preServerList=D},checkRowClass(t){return this.serverFileDiff[t.realId]?this.serverFileDiff[t.sameFileKey]?this.serverFileDiff[t.sameFileKey].type:this.serverFileDiff[t.realId].type:""},checkDiffClass(t,e){return this.serverFileDiff[t.realId]?"different"!==this.serverFileDiff[t.realId].type?"":this.serverFileDiff[t.realId].value[e]||"":""}}};e.Z=f},41777:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var i=s(a(56318));a(87033),a(35948),a(94522),a(23232),a(80433);var n=a(1064),r=s(a(44068)),l=a(88777),o=a(54051),c={name:"",data:()=>({isLoading:!0,isShowContent:!1,content:""}),computed:{dialogStyles:()=>({"z-index":window.__bk_zIndex_manager.nextZIndex()})},created(){var t=this,e=(0,l.findParent)(this,"DiffTaskStep"),a=(0,l.findParent)(this,"SyncPlanStep2"),s=(0,o.findStep)(a.planStepList,e.data.realId),n=(0,o.findStep)(a.templateStepList,e.data.realId);Promise.all([this.fetchContent(s),this.fetchContent(n)]).then((function(e){var a=(0,i.default)(e,2),s=a[0],n=a[1];t.oldCode=s,t.newCode=n})).finally((function(){t.isLoading=!1}))},methods:{fetchContent(t){var e=t.scriptStepInfo;return 1===e.scriptSource?Promise.resolve(n.Base64.decode(e.content)):e.scriptVersionId?r.default.versionDetail({id:e.scriptVersionId}).then((function(t){return n.Base64.decode(t.content)})):Promise.resolve("")},handleView(){var t=this;this.isShowContent=!0,this.$nextTick((function(){document.body.appendChild(t.$refs.dialog)}))},handleClose(){this.$refs.dialog&&document.body.removeChild(this.$refs.dialog),this.isShowContent=!1}}};e.Z=c},1261:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var i=a(88777),n=s(a(59926)),r=a(54051),l={name:"SyncPlanScriptExecuteTarget",components:{IpDetail:n.default},data:()=>({preHost:{},lastHost:{}}),created(){var t=(0,i.findParent)(this,"SyncPlanStep2"),e=(0,i.findParent)(this,"DiffTaskStep").data.realId,a=(0,r.findStep)(t.planStepList,e),s=(0,r.findStep)(t.templateStepList,e);this.preHost=Object.freeze(a.scriptStepInfo.executeTarget),this.lastHost=Object.freeze(s.scriptStepInfo.executeTarget)}};e.Z=l},42529:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(57024),a(5580),a(87033);var i=s(a(17679)),n=s(a(88151)),r={name:"",components:{FileSource:i.default,FileExecuteTarget:n.default},props:{id:{type:Number,required:!0},data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}},account:{type:Array,default:function(){return[]}}},methods:{findName(t){var e=this.account.find((function(e){return e.id===t}));return e?e.alias:"-"}}};e.Z=r},64023:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var i=s(a(72075)),n=s(a(4880)),r=s(a(80307)),l=s(a(85074)),o={[i.default.TYPE_SCRIPT]:n.default,[i.default.TYPE_FILE]:r.default,[i.default.TYPE_APPROVAL]:l.default},c={name:"DiffTaskStep",inheritAttrs:!1,props:{data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}},type:{type:String,default:""}},computed:{infoCom(){return o[this.data.type]},info(){var t={[i.default.TYPE_SCRIPT]:"scriptStepInfo",[i.default.TYPE_FILE]:"fileStepInfo",[i.default.TYPE_APPROVAL]:"approvalStepInfo"};return this.data[t[this.data.type]]},classes(){var t="".concat(this.data.realId);return this.diff[t]?this.diff[t].type:""},diffValue(){var t="".concat(this.data.realId);return this.diff[t]&&this.diff[t].value||{}}}};e.Z=c},26906:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(5580),a(87033);var i=s(a(81203)),n=s(a(63804)),r={name:"",components:{ScriptContent:i.default,ScriptExecuteTarget:n.default},props:{data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}},account:{type:Array,default:function(){return[]}}},methods:{findName(t){var e=this.account.find((function(e){return e.id===t}));return e?e.alias:""}}};e.Z=r},40137:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var i={name:"",components:{Empty:s(a(63715)).default},props:{loading:{type:Boolean,default:!1},empty:{type:Boolean,default:!1}}};e.Z=i},59277:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(70969),a(87033),a(9042);var i=s(a(56318)),n=s(a(45812)),r=a(41980),l={name:"",components:{Tips:s(a(67672)).default},props:{variable:{type:Array,required:!0},step:{type:Array,required:!0}},data:()=>({active:"",tips:{name:"",target:""}}),created(){if(this.variable.length>0){var t=(0,i.default)(this.variable,1)[0],e=t.id,a=t.name;this.active="variable_".concat(e,"_").concat(a)}else this.active="".concat(this.step[0].id,"_").concat(this.step[0].name);this.scrollNum=0,this.offsetTopMap={}},mounted(){var t=this,e=document.querySelector("#asynContent").querySelector(".scroll-faker-content");e.addEventListener("scroll",this.setActive),this.$once("hook:beforeDestroy",(function(){e.removeEventListener("scroll",t.setActive)})),this.init()},methods:{init(){var t=this;this.$refs.anchor.querySelectorAll(".item").forEach((function(e){var a="".concat(e.getAttribute("data-anchor"));t.offsetTopMap[a]=document.querySelector("#sync-after_".concat(a)).offsetTop}))},setActive:(0,n.default)((function(t){var e=this;this.scrollNum=0;var a=t.target.scrollTop;for(var s in this.offsetTopMap){if(!(this.offsetTopMap[s]<a+60))break;this.active=s,this.scrollNum+=1}this.$nextTick((function(){e.$refs.scroll.scrollTo(26*e.scrollNum)}))}),50),handleShowTips(t,e){this.tips={name:t,target:e}},handleChoose(t){var e=document.querySelector("#sync-after_".concat(t)).offsetTop-24;this.active=t,(0,r.scrollTopSmooth)(document.querySelector("#asynContent").querySelector(".scroll-faker-content"),e)}}};e.Z=l},10194:function(t,e,a){"use strict";Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var s=a(41980),i={props:{data:{type:Object,required:!0}},data:()=>({position:"left",top:0,left:0}),computed:{styles(){return{position:"absolute",top:"".concat(this.top,"px"),left:"".concat(this.left,"px"),"z-index":window.__bk_zIndex_manager.nextZIndex()}}},mounted(){var t=this;this.$target=document.querySelector(".sync-plan-side-anchor").querySelector('[data-anchor="'.concat(this.data.target,'"]'));var e=(0,s.getScrollParent)(this.$target);e&&(e.addEventListener("scroll",this.calcPosition),this.$once("hook:beforeDestroy",(function(){e.removeEventListener("scroll",t.calcPosition)}))),this.init()},beforeDestroy(){try{this.$refs.detail&&document.body.removeChild(this.$refs.detail)}catch(t){}},methods:{init(){var t=this;this.$nextTick((function(){t.calcPosition()})),document.body.appendChild(this.$refs.tips)},calcPosition(){var t=this.$refs.tips.getBoundingClientRect().height,e=this.$target.getBoundingClientRect(),a=e.top,s=e.left,i=e.height;this.top=a-(t-i)/2,this.left=s}}};e.Z=i},98229:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(87033),a(35948),a(94522),a(9042),a(61026);var i=s(a(15399)),n=s(a(84484)),r=s(a(27666)),l=s(a(30267)),o=s(a(45839)),c={name:"",components:{Step1:r.default,Step2:l.default,Step3:o.default},data:()=>({isLoading:!0,curStep:1,templateInfo:{},planInfo:{}}),computed:{stepCom(){return{1:r.default,2:l.default,3:o.default}[this.curStep]}},created(){this.id=this.$route.params.id,this.templateId=this.$route.params.templateId,this.stepList=[{title:i.default.t("template.差异总览"),icon:1},{title:i.default.t("template.差异明细"),icon:2},{title:i.default.t("template.确认定时任务"),icon:3}],"view"===this.$route.query.mode&&this.stepList.pop(),this.fetchData()},methods:{fetchData(t){var e=this;this.$request(n.default.fetchSyncInfo({id:this.id,templateId:this.templateId},{permission:"page"}),(function(){e.isLoading=!0})).then((function(t){var a=t.templateInfo,s=t.planInfo,i={};s.variableList.forEach((function(t){t.realId=t.id,i[t.realId]={defaultTargetValue:t.defaultTargetValue,defaultValue:t.defaultValue}})),s.stepList.forEach((function(t){t.realId=t.templateStepId})),e.planInfo=Object.freeze(s),a.variables.forEach((function(t){t.realId=t.id,i[t.realId]&&(t.defaultTargetValue=i[t.realId].defaultTargetValue,t.defaultValue=i[t.realId].defaultValue)})),a.stepList.forEach((function(t){t.realId=t.id})),e.templateInfo=Object.freeze(a)})).catch((function(t){[1241002,400].includes(t.code)&&setTimeout((function(){e.$router.push({name:"taskList"})}),3e3)})).finally((function(){e.isLoading=!1}))},handleStepChange(t){this.curStep=t},handleCancel(){this.routerBack()},routerBack(){"viewPlan"!==this.$route.query.from?this.$router.push({name:"planList",query:{viewTemplateId:this.templateId,viewPlanId:this.id}}):this.$router.push({name:"viewPlan",params:{templateId:this.templateId},query:{viewPlanId:this.id}})}}};e.Z=c},62377:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0;var i=s(a(56318)),n=s(a(15621)),r=s(a(4027)),l=s(a(81139)),o=s(a(40515)),c=s(a(14617)),f=a(36075),d={name:"SyncPlanStep1",components:{DetailLayout:n.default,DetailItem:r.default,Layout:l.default,RenderGlobalVar:o.default,RenderTaskStep:c.default},props:{templateInfo:{type:Object,default:function(){return{variables:[],stepList:[]}}},planInfo:{type:Object,default:function(){return{variableList:[],stepList:[]}}}},data:()=>({templateVariableList:[],templateStepList:[],variableDiff:{},stepDiff:{}}),created(){this.templateVariableList=Object.freeze((0,f.mergeList)(this.templateInfo.variables,this.planInfo.variableList)),this.variableDiff=Object.freeze((0,f.diffVariableSimple)(this.templateInfo.variables,this.planInfo.variableList));var t=(0,f.diffStepSimple)(this.templateInfo.stepList,this.planInfo.stepList),e=(0,i.default)(t,2),a=e[0],s=e[1];this.templateStepList=Object.freeze(a),this.stepDiff=Object.freeze(s)},methods:{handleNext(){this.$emit("on-change",2)},handleCancel(){this.$emit("on-cancel")}}};e.Z=d},19589:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(71959),a(87033);var i=s(a(56318)),n=s(a(38502)),r=s(a(6089)),l=s(a(94498)),o=s(a(81139)),c=s(a(17414)),f=s(a(85328)),d=s(a(46299)),u=a(36075),p={name:"SyncPlanStep2",components:{ScrollFaker:l.default,Layout:o.default,DiffGlobalVariable:c.default,DiffTaskStep:f.default,SideAnchor:d.default},props:{templateInfo:{type:Object,default:function(){return{variables:[],stepList:[]}}},planInfo:{type:Object,default:function(){return{variableList:[],stepList:[]}}}},data:()=>({accountList:[],templateVariableList:[],templateStepList:[],planVariableList:[],planStepList:[],beforeVariableDiff:{},variableDiff:{},beforeStepDiff:{},stepDiff:{}}),created(){this.isView="view"===this.$route.query.mode,this.fetchAccount(),this.init()},methods:{init(){var t=(0,n.default)(this.templateInfo.variables),e=(0,n.default)(this.templateInfo.stepList),a=(0,n.default)(this.planInfo.variableList),s=(0,n.default)(this.planInfo.stepList),r=(0,u.composeList)(t,a),l=(0,i.default)(r,2),o=l[0],c=l[1];this.templateVariableList=Object.freeze(o),this.planVariableList=Object.freeze(c);var f=(0,u.composeList)(e,s),d=(0,i.default)(f,2),p=d[0],v=d[1];this.templateStepList=Object.freeze(p),this.planStepList=Object.freeze(v);var h=Object.freeze((0,u.diffVariable)(t,a));this.beforeVariableDiff=Object.keys(h).reduce((function(t,e){return"delete"!==h[e].type&&"new"!==h[e].type&&(t[e]=h[e]),t}),{}),this.variableDiff=h;var m=Object.freeze((0,u.diffStep)(e,s));this.beforeStepDiff=Object.keys(m).reduce((function(t,e){return"delete"!==m[e].type&&"new"!==m[e].type&&(t[e]=m[e]),t}),{}),this.stepDiff=m},fetchAccount(){var t=this;r.default.fetchAccountWhole().then((function(e){t.accountList=e}))},handleLast(){this.$emit("on-change",1)},handleNext(){this.$emit("on-change",3)},handleCancel(){this.$emit("on-cancel")}}};e.Z=p},10643:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"X",{value:!0}),e.Z=void 0,a(5580),a(87033),a(35948),a(94522),a(7170),a(45974);var i=s(a(15399)),n=s(a(84484)),r=s(a(47124)),l=a(41980),o=s(a(94498)),c=s(a(81139)),f=s(a(55029)),d={name:"",components:{ScrollFaker:o.default,Layout:c.default,CrontabDetail:f.default},props:{templateInfo:{type:Object,default:function(){return{}}}},data:()=>({isLoading:!0,isEmpty:!1,timeTaskList:[],currentTaskId:0}),computed:{detailInfo(){var t=this;return this.timeTaskList.find((function(e){return e.id===t.currentTaskId}))||{}}},created(){this.id=this.$route.params.id,this.templateId=this.$route.params.templateId,this.templateVariableList=this.templateInfo.variables,this.fetchTimeTaskList()},methods:{fetchTimeTaskList(){var t=this;this.isLoading=!0,r.default.fetchTaskOfPlan({id:this.id}).then((function(e){e.length<1?t.isEmpty=!0:(t.timeTaskList=e.map((function(t){return{id:(e=t).id,name:e.name,enable:e.enable,hasConfirm:!1,variableValue:[]};var e})),e.length>0&&(t.currentTaskId=e[0].id))})).finally((function(){t.isLoading=!1}))},handleTabChange(t){this.currentTaskId=t},handleEnableChange(t,e){this.timeTaskList.find((function(e){return e.id===t})).enable=e,window.changeAlert=!0},handleVariableChange(t){var e=this,a=this.timeTaskList.find((function(t){return t.id===e.currentTaskId}));a.variableValue=t,a.hasConfirm=!0,window.changeAlert=!0},handleUpdateConfirm(t){var e=this;this.timeTaskList.find((function(t){return t.id===e.currentTaskId})).hasConfirm=t,window.changeAlert=!0},handleSubmit(){var t=this;if(this.timeTaskList.filter((function(t){return t.enable})).every((function(t){return t.hasConfirm})))return n.default.planSyncInfo({planId:this.id,templateId:this.templateId,templateVersion:this.templateInfo.version}).then((function(){return r.default.updatePlanTask({cronJobInfoList:t.timeTaskList})}),(function(){t.messageError(i.default.t("template.执行方案同步失败"))})).then((function(){return window.changeAlert=!1,t.messageSuccess(i.default.t("template.同步成功"),(function(){t.$router.push({name:"viewPlan",params:{templateId:t.templateId},query:{viewPlanId:t.id}})})),!0}),(function(){t.messageError(i.default.t("template.定时任务更新失败"))}));this.messageWarn(i.default.t("template.有定时任务还未确认"))},handleLast(){var t=this;(0,l.leaveConfirm)().then((function(){t.$emit("on-change",2)}))},handleCancel(){this.$emit("on-cancel")}}};e.Z=d},54051:function(t,e,a){"use strict";var s=a(22696);Object.defineProperty(e,"__esModule",{value:!0}),e.ipStatistics=e.findVariable=e.findStep=void 0,a(70969);var i=s(a(93435)),n=s(a(15399)),r=s(a(72075)),l=s(a(42472));e.ipStatistics=function(t){var e=[];return t.ipList.length>0&&e.push("".concat(t.ipList.length).concat(n.default.t("template.个主机"))),t.topoNodeList.length>0&&e.push("".concat(t.topoNodeList.length).concat(n.default.t("template.个节点"))),t.dynamicGroupList.length>0&&e.push("".concat(t.dynamicGroupList.length).concat(n.default.t("template.个分组"))),e.join("，")};e.findStep=function(t,e,a){var s=(0,i.default)(t,(function(t){return t.realId===e}));return s||new r.default({approvalStepInfo:{},fileStepInfo:{},scriptStepInfo:{}})};e.findVariable=function(t,e){var a=(0,i.default)(t,(function(t){return t.name===e}));return a||new l.default({type:3})}},36075:function(t,e,a){"use strict";a(35927),a(45974),a(9042),a(43364);var s=a(22696);Object.defineProperty(e,"__esModule",{value:!0}),e.mergeList=e.diffVariableSimple=e.diffVariable=e.diffStepSimple=e.diffStep=e.composeList=void 0,a(87033),a(90004),a(61026),a(60259),a(77036),a(23232),a(80433);var i=s(a(56318)),n=s(a(33610)),r=s(a(38502)),l=s(a(24437)),o=s(a(32558));function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){(0,n.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d=function(t,e){return"".concat(t.realId)==="".concat(e.realId)},u=function(t,e,a){for(var s=[];e<=a;)s.push(t[e].realId),e++;return s},p=function t(e,a){if((0,o.default)(e)){if(e.length!==a.length)return!1;for(var s=0;s<e.length;s++)if(!t(e[s],a[s]))return!1;return!0}if("[object Object]"===Object.prototype.toString.call(e)&&"[object Object]"===Object.prototype.toString.call(a)){for(var i in e)if("id"!==i&&!t(e[i],a[i]))return!1;return!0}return e===a},v=function(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s={},i=a.length>0?a:Object.keys(t),n=0;n<i.length;n++){var r=i[n];s[r]=p(t[r],e[r])?"":"changed"}return Object.freeze(s)},h=function(t,e){return v(t,e,["name","type","defaultValue","defaultTargetValue","description","changeable","required"])},m=function(t,e){var a=v(t,e,["name","type"]),s={};switch(t.type){case 1:s=v(t.scriptStepInfo,e.scriptStepInfo);break;case 2:s=v(t.fileStepInfo,e.fileStepInfo);break;case 3:s=v(t.approvalStepInfo,e.approvalStepInfo);break;default:s={}}return f(f({},a),s)},_=function(t){for(var e={},a=0;a<t.length;a++)e[t[a].realId]=t[a];return e},b=function(t){return"".concat(t.realId)},y=function(t,e){return(0,l.default)(t,(function(t){return t.realId===e.realId}))};e.mergeList=function(t,e){for(var a={},s=[],i=0;i<t.length;i++){var n=t[i];a[n.realId]=1,s.push(n)}for(var r=0;r<e.length;r++){var l=e[r];a[l.realId]||s.push(l)}return s};e.diffStepSimple=function(t,e){t=(0,r.default)(t),e=(0,r.default)(e);for(var a=0,s=t.length-1,i=0,n=e.length-1,l=[],o={};a<=s;){i=0;var c=t[a],f=y(e,c);if(++a,f<0)l.push(c),o[c.id]={type:"new"};else{for(;i<=f;){var d=e[i];++i,y(t,d)>-1||(o[d.id]||(l.push(d),o[d.id]={type:"delete"}))}var u=f-(l.push(c)-0)+1;if(0===u){var p=m(c,e[f]);""!==Object.values(p).join("")?o[c.id]={type:"different"}:o[c.id]={type:"same"}}else o[c.id]={type:"move",value:u}}}for(i=0;i<=n;){var v=e[i];++i,y(l,v)<0&&(l.push(v),o[v.id]={type:"delete"})}return[l,o]};e.diffVariableSimple=function(t,e){t=(0,r.default)(t),e=(0,r.default)(e);for(var a=0,s=t.length-1,n=t,o=(0,i.default)(n,1)[0],c=t[s],f=0,p=e.length-1,v=e,m=(0,i.default)(v,1)[0],_=e[p],b=function(t){return"".concat(t.realId)},y=function(t,e){var a=h(t,e);return""===Object.values(a).join("")?{type:"same"}:{type:"different"}},g={},C=function(t){return t.realId===m.realId};a<=s&&f<=p;)if(d(o,m))g[b(o)]=y(o,m),o=t[++a],m=e[++f];else if(d(c,_))g[b(c)]=y(c,_),c=t[--s],_=e[--p];else if(d(o,_))g[b(o)]=y(o,_),o=t[++a],_=e[--p];else if(d(c,m))g[b(c)]=y(c,m),c=t[--c],m=e[++f];else{if(u(t,a,s).includes(m.realId)){var S=(0,l.default)(t,C);g[b(m)]=y(t[S],m),t.splice(S,1),--s}else g[b(m)]={type:"delete"};m=e[++f]}for(;a<=s;){var I=t[a];++a,I&&(g[b(I)]={type:"new"})}for(;f<=p;){var w=e[f];++f,w&&(g[b(w)]={type:"delete"})}return g};e.composeList=function(t,e){for(var a=t.length,s=e.length,i=[],n=[],r=_(t),l=_(e),o=0,c=0;o<a&&c<s;){var f=t[o],d=e[c];d.realId===f.realId?(n.push(d),i.push(f),delete r[f.realId],delete l[d.realId]):(r[f.realId]&&(i.push(f),l[f.realId]?(n.push(l[f.realId]),delete l[f.realId]):n.push(""),delete r[f.realId]),l[d.realId]&&(n.push(d),r[d.realId]?(i.push(r[d.realId]),delete r[d.realId]):i.push(l[d.realId]),delete l[d.realId])),o++,c++}for(;c<s;){var u=e[c];l[u.realId]&&(n.push(u),i.push(u)),c++}for(;o<a;){var p=t[o];r[p.realId]&&(n.push(""),i.push(p)),o++}return[i,n]};var g=function(t,e,a){t=[...t],e=[...e];for(var s=0,n=t.length-1,r=t,o=(0,i.default)(r,1)[0],c=t[n],f=0,p=e.length-1,v=e,h=(0,i.default)(v,1)[0],m=e[p],_={},y=function(t){return t.realId===h.realId};s<=n&&f<=p;)if(d(o,h))_[b(o)]={type:"different",value:a(o,h)},o=t[++s],h=e[++f];else if(d(c,m))_[b(c)]={type:"different",value:a(c,m)},c=t[--n],m=e[--p];else if(d(o,m))_[b(o)]={type:"different",value:a(o,m)},o=t[++s],m=e[--p];else if(d(c,h))_[b(c)]={type:"different",value:a(c,h)},c=t[--n],h=e[++f];else{if(u(t,s,n).includes(h.realId)){var g=(0,l.default)(t,y);_[b(t[g])]={type:"different",value:a(t[g],h)},t.splice(g,1),--n}else _[b(h)]={type:"delete"};h=e[++f]}for(;s<=n;){var C=t[s];++s,C&&(_[b(C)]={type:"new"})}for(;f<=p;){var S=e[f];++f,S&&(_[b(S)]={type:"delete"})}return _};e.diffVariable=function(t,e){return g(t,e,h)};e.diffStep=function(t,e){return g(t,e,m)}},33391:function(){},84193:function(){},71966:function(){},70772:function(){},44623:function(){},91281:function(){},44042:function(){},80793:function(){},14867:function(){},99263:function(){},74665:function(){},72291:function(){},63998:function(){},42870:function(){},67869:function(){},68334:function(){},3015:function(){},18130:function(){},55029:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading }"}],staticClass:"job-detail",class:{"is-loading":t.isLoading}},[a("bk-alert",{attrs:{title:t.$t("template.同步执行方案需要重新确认定时任务的全局变量，不使用的定时任务可以直接停用。")}}),t._v(" "),a("div",{staticClass:"title"},[a("span",[t._v("「"+t._s(t.info.name)+"」"+t._s(t.$t("template.的全局变量")))]),t._v(" "),t.data.enable?t.data.hasConfirm?a("span",{staticClass:"confirm"},[t._v(t._s(t.$t("template.已确认")))]):a("span",{staticClass:"waiting"},[t._v(t._s(t.$t("template.待确认")))]):a("span",{staticClass:"disable"},[t._v(t._s(t.$t("template.已停用")))])]),t._v(" "),t.isLoading?t._e():a("div",[t.isEmpty?a("empty",[a("p",[t._v(t._s(t.$t("template.无关联的全局变量")))]),t._v(" "),a("p",{staticStyle:{"margin-top":"8px"}},[t._v(t._s(t.$t("template.已直接确认")))])]):a("global-variable-layout",[a("div",t._l(t.info.variableValue,(function(e){return a("global-variable",{key:e.id,ref:"variable",refInFor:!0,attrs:{type:e.type,readonly:t.readonly,data:e}})})),1),t._v(" "),a("div",{staticClass:"global-variable-action"},[a("div",{staticClass:"variable-name"},[a("span")]),t._v(" "),a("div",{staticClass:"variable-value"},[t.isEditing?[a("bk-button",{staticClass:"job-button",attrs:{theme:"primary",disabled:!t.data.enable},on:{click:t.handleSubmit}},[t._v("\n                            "+t._s(t.$t("template.确认"))+"\n                        ")]),t._v(" "),a("bk-button",{staticClass:"job-button",attrs:{disabled:!t.data.enable},on:{click:t.handleReset}},[t._v("\n                            "+t._s(t.$t("template.重置"))+"\n                        ")])]:a("bk-button",{staticClass:"job-button",attrs:{theme:"primary",disabled:!t.data.enable},on:{click:t.handleToggleEdit}},[t._v("\n                        "+t._s(t.$t("template.编辑"))+"\n                    ")])],2)])])],1)],1)};s._withStripped=!0;var i=a(67527),n=i.Z,r=(a(93916),(0,a(35471).Z)(n,s,[],!1,null,"3de37a30",null));r.options.__file="src/views/task-manage/sync-plan/components/crontab-detail.vue";var l=r.exports},59926:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sync-plan-ip-detail"},[t.variableName?a("div",{staticClass:"sync-plan-step-variable",on:{click:t.handlerView}},[a("div",{staticClass:"variable-flag"},[a("Icon",{attrs:{type:"host"}})],1),t._v(" "),a("div",{staticClass:"variable-name",attrs:{"tippy-tips":t.variableName}},[t._v(t._s(t.variableName))])]):a("div",{directives:[{name:"bk-overflow-tips",rawName:"v-bk-overflow-tips"}],staticClass:"ip-text"},[t._v(t._s(t.ipText))]),t._v(" "),t.isNotEmpty?a("Icon",{staticClass:"look-ip-detail",attrs:{type:"audit"},on:{click:t.handlerView}}):t._e(),t._v(" "),a("jb-dialog",{staticClass:"sync-ip-detail-dialog",attrs:{width:1020,"ok-text":t.$t("template.关闭")},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",[t._v(t._s(t.$t("template.执行目标")))]),t._v(" "),a("div",{staticClass:"display-diff"},[t.diffEnable?[a("bk-switcher",{attrs:{value:t.isShowDiff,theme:"primary",size:"large"},on:{change:t.handleToggleDiff}})]:[a("bk-switcher",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:t.$t("template.无差异"),expression:"$t('template.无差异')"}],attrs:{value:!1,disabled:"",theme:"primary",size:"large"}})],t._v("\n                "+t._s(t.$t("template.显示差异"))+"\n            ")],2)]},proxy:!0}]),model:{value:t.isShowDetail,callback:function(e){t.isShowDetail=e},expression:"isShowDetail"}},[t._v(" "),a("div",{staticClass:"content-wraper"},[a("scroll-faker",[a("server-panel",{attrs:{"detail-mode":"dialog","host-node-info":t.hostNodeInfo,"node-diff":t.nodeDiff,"host-diff":t.hostDiff,"group-diff":t.groupDiff}})],1)],1)])],1)};s._withStripped=!0;var i=a(1468),n=i.Z,r=(a(56e3),a(46434),(0,a(35471).Z)(n,s,[],!1,null,"21fe3c58",null));r.options.__file="src/views/task-manage/sync-plan/components/diff/common/ip-detail.vue";var l=r.exports},17414:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"diff-global-variable",class:t.classes,attrs:{id:t.type+"_variable_"+t.data.id+"_"+t.data.name}},[a("div",{staticClass:"name"},[a("div",{staticClass:"type-flag"},[a("Icon",{attrs:{type:t.data.icon}})],1),t._v(" "),a("span",[t._v(t._s(t.data.name))])]),t._v(" "),a("div",{staticClass:"info"},[a("div",{class:t.diffValue.type},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.变量类型：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.typeText))])]),t._v(" "),a("div",{class:t.diffValue.name},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.变量名称：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.name))])]),t._v(" "),t.data.isHost?[a("div",{class:t.diffValue.defaultTargetValue},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.变量值：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.valueText))]),t._v(" "),a("host-detail",{staticClass:"host-value-detail",attrs:{"diff-enable":"changed"===t.diffValue.defaultTargetValue,data:t.data.defaultTargetValue,name:t.data.name}})],1)]:[a("div",{class:t.diffValue.defaultValue},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.变量值：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.valueText))])])],t._v(" "),a("div",{class:t.diffValue.description},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.变量描述：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.description||"-"))])]),t._v(" "),a("div",{class:t.diffValue.changeable},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.赋值可变：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.changeableText))])]),t._v(" "),a("div",{class:t.diffValue.required},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.必填：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.requiredText))])])],2)])};s._withStripped=!0;var i=a(70576),n=i.Z,r=(a(82342),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/diff/global-variable.vue";var l=r.exports},66095:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"step-view-global-variable",on:{click:t.handlerView}},[a("Icon",{staticClass:"type-flag",attrs:{type:"audit"}}),t._v(" "),a("jb-dialog",{staticClass:"host-variable-detail-dialog",attrs:{title:t.title,width:1020,"ok-text":t.$t("template.关闭")},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"display-diff"},[t.diffEnable?[a("bk-switcher",{attrs:{value:t.isShowDiff,theme:"primary",size:"large"},on:{change:t.handleToggleDiff}})]:[a("bk-switcher",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:t.$t("template.无差异"),expression:"$t('template.无差异')"}],attrs:{value:!1,disabled:"",theme:"primary",size:"large"}})],t._v("\n                "+t._s(t.$t("template.显示差异"))+"\n            ")],2)]},proxy:!0}]),model:{value:t.isShowDetail,callback:function(e){t.isShowDetail=e},expression:"isShowDetail"}},[t._v(" "),a("div",{staticClass:"content-wraper"},[a("scroll-faker",[a("server-panel",{attrs:{"detail-mode":"dialog","host-node-info":t.hostNodeInfo,"node-diff":t.nodeDiff,"host-diff":t.hostDiff,"group-diff":t.groupDiff}})],1)],1)])],1)};s._withStripped=!0;var i=a(43772),n=i.Z,r=(a(3476),a(91515),(0,a(35471).Z)(n,s,[],!1,null,"743fa1e5",null));r.options.__file="src/views/task-manage/sync-plan/components/diff/host-detail.vue";var l=r.exports},85074:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row",class:t.diff.approvalUser},[a("div",{staticClass:"label"},[t._v(t._s(t.$t("template.确认人：")))]),t._v(" "),a("div",{staticClass:"value"},[a("div",{staticClass:"approval-wraper"},[t._l(t.renderRoleList,(function(e){return a("div",{key:e,staticClass:"item"},[a("Icon",{staticClass:"approval-flag",attrs:{type:"user-group-gray"}}),t._v("\n                    "+t._s(e)+"\n                ")],1)})),t._v(" "),t._l(t.data.approvalUser.userList,(function(e){return a("div",{key:e,staticClass:"item"},[a("Icon",{staticClass:"approval-flag",attrs:{type:"user"}}),t._v("\n                    "+t._s(e)+"\n                ")],1)}))],2)])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.notifyChannel},[a("div",{staticClass:"label"},[t._v(t._s(t.$t("template.通知方式：")))]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.renderChannel))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.approvalMessage},[a("div",{staticClass:"label"},[t._v(t._s(t.$t("template.确认描述：")))]),t._v(" "),a("div",{staticClass:"value"},[t._v(t._s(t.data.approvalMessage||"-"))])])])};s._withStripped=!0;var i=a(66204),n=i.Z,r=(a(84612),(0,a(35471).Z)(n,s,[],!1,null,"d0a7a542",null));r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/approval.vue";var l=r.exports},88151:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("ip-detail",{attrs:{"pre-host":t.preHost,"last-host":t.lastHost}})};s._withStripped=!0;var i=a(57942),n=i.Z,r=(0,a(35471).Z)(n,s,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/file-execute-target.vue";var l=r.exports},12471:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("ip-detail",{attrs:{"pre-host":t.realPreHost,"last-host":t.realLastHost}})};s._withStripped=!0;var i=a(68656),n=i.Z,r=(0,a(35471).Z)(n,s,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/file-source-server.vue";var l=r.exports},17679:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sync-step-server-file"},[t.isShowLocalFile||t.isShowServerFile?a("bk-collapse",{staticClass:"host-detail",attrs:{value:t.activeResult}},[t.isShowLocalFile?a("jb-collapse-item",{attrs:{name:"local",active:t.activeResult},scopedSlots:t._u([{key:"content",fn:function(){return[a("table",{staticClass:"file-table"},[a("tbody",t._l(t.localFileList,(function(e,s){return a("tr",{key:s,class:t.localFileDiff[e.realId]},[a("td",[a("div",{directives:[{name:"bk-overflow-tips",rawName:"v-bk-overflow-tips"}],staticClass:"file-path-text"},[t._v(t._s(e.fileLocationText))])]),t._v(" "),a("td",[t._v(t._s(e.fileSizeText))])])})),0)])]},proxy:!0}],null,!1,3095449856)},[a("span",{staticClass:"collapse-title"},[t._v(t._s(t.$t("template.已选择"))),a("span",{staticClass:"number"},[t._v(t._s(t.localFileCount))]),t._v(t._s(t.$t("template.个本地文件")))])]):t._e(),t._v(" "),t.isShowServerFile?a("jb-collapse-item",{attrs:{name:"server",active:t.activeResult},scopedSlots:t._u([{key:"content",fn:function(){return[a("table",{staticClass:"file-table"},[a("thead",[a("th",[t._v(t._s(t.$t("template.文件路径")))]),t._v(" "),a("th",[t._v(t._s(t.$t("template.服务器列表")))]),t._v(" "),a("th",[t._v(t._s(t.$t("template.服务器账号")))])]),t._v(" "),a("tbody",t._l(t.serverFileList,(function(e,s){return a("tr",{key:s,class:t.checkRowClass(e)},[a("td",[a("div",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:e.fileLocationText,expression:"row.fileLocationText"}],staticClass:"file-path-text"},[t._v(t._s(e.fileLocationText))])]),t._v(" "),a("td",{class:t.checkDiffClass(e,"host")},[a("file-source-server",{attrs:{"pre-host":t.preServerList[s].host,"last-host":t.lastServerList[s].host}})],1),t._v(" "),a("td",{class:t.checkDiffClass(e,"account")},[t._v("\n                                "+t._s(t.generatorAccountAlias(e.account))+"\n                            ")])])})),0)])]},proxy:!0}],null,!1,1948348812)},[a("span",{staticClass:"collapse-title"},[t._v(t._s(t.$t("template.已选择"))),a("span",{staticClass:"number"},[t._v(t._s(t.serverFileCount))]),t._v(t._s(t.$t("template.个服务器文件")))])]):t._e()],1):t._e()],1)};s._withStripped=!0;var i=a(77501),n=i.Z,r=(a(91495),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/file-source.vue";var l=r.exports},81203:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sync-plan-script-content"},[a("span",{staticClass:"sript-content-text"},[t._v(t._s(t.$t("template.查看脚本")))]),t._v(" "),a("Icon",{staticClass:"script-content-detail",attrs:{type:"audit"},on:{click:t.handleView}}),t._v(" "),t.isShowContent?a("div",{ref:"dialog",staticClass:"script-diff-dialog",style:t.dialogStyles},[a("div",{staticClass:"content-title"},[a("div",{staticClass:"content-old"},[t._v(t._s(t.$t("template.同步前")))]),t._v(" "),a("div",{staticClass:"content-new"},[t._v(t._s(t.$t("template.同步后")))])]),t._v(" "),a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading }"}],staticClass:"content-wraper"},[a("scroll-faker",[a("jb-diff",{attrs:{"old-content":t.oldCode,"new-content":t.newCode,format:"side-by-side",context:1/0,theme:"dark"}})],1)],1),t._v(" "),a("Icon",{staticClass:"content-close",attrs:{type:"close"},on:{click:t.handleClose}})],1):t._e()],1)};s._withStripped=!0;var i=a(41777),n=i.Z,r=(a(39964),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/script-content.vue";var l=r.exports},63804:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("ip-detail",{attrs:{"pre-host":t.preHost,"last-host":t.lastHost}})};s._withStripped=!0;var i=a(1261),n=i.Z,r=(0,a(35471).Z)(n,s,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/script-execute-target.vue";var l=r.exports},80307:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row",class:t.diff.timeout},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.超时时长：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.timeout)+"(s)")])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.ignoreError},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.错误处理：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.ignoreErrorText))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.uploadSpeedLimit},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.上传限速：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.uploadSpeedLimitText))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.downloadSpeedLimit},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.下载限速：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.downloadSpeedLimitText))])]),t._v(" "),a("div",[a("p",{staticClass:"label"},[t._v(t._s(t.$t("template.文件来源：")))]),t._v(" "),a("file-source",{attrs:{account:t.account,id:t.id,data:t.data.originFileList}})],1),t._v(" "),a("div",{staticClass:"row",class:t.diff.destinationFileLocation},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.目标路径：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.destinationFileLocation))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.transferMode},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.传输模式：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.transferModeText))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.executeAccount},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.执行帐号：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.findName(t.data.executeAccount)))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.destination},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.执行目标：")))]),t._v(" "),a("file-execute-target")],1)])};s._withStripped=!0;var i=a(42529),n=i.Z,r=(0,a(35471).Z)(n,s,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/file.vue";var l=r.exports},85328:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"diff-task-step",class:t.classes,attrs:{id:t.type+"_step_"+t.data.id}},[a("div",{staticClass:"name"},[a("div",{staticClass:"type-flag"},[a("Icon",{attrs:{type:t.data.icon}})],1),t._v("\n        "+t._s(t.data.name)+"\n    ")]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"row",class:t.diffValue.type},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.步骤类型：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.typeText))])]),t._v(" "),a("div",{staticClass:"row",class:t.diffValue.name},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.步骤名称：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.name))])]),t._v(" "),a(t.infoCom,t._b({tag:"component",attrs:{id:t.data.realId,data:t.info,diff:t.diffValue}},"component",t.$attrs,!1))],1)])};s._withStripped=!0;var i=a(64023),n=i.Z,r=(a(16050),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/index.vue";var l=r.exports},4880:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row",class:t.diff.scriptSourceText},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.脚本来源：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.scriptSourceText))])]),t._v(" "),a("div",{staticClass:"row",class:[t.diff.content,t.diff.scriptVersionId]},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.脚本内容：")))]),t._v(" "),a("script-content")],1),t._v(" "),a("div",{staticClass:"row",class:t.diff.scriptParam},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.脚本参数：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.scriptParam||"-"))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.timeout},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.超时时长：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.timeout)+"(s)")])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.ignoreError},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.错误处理：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.data.ignoreErrorText))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.executeAccount},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.执行账号：")))]),t._v(" "),a("span",{staticClass:"value"},[t._v(t._s(t.findName(t.data.executeAccount)||"-"))])]),t._v(" "),a("div",{staticClass:"row",class:t.diff.executeTarget},[a("span",{staticClass:"label"},[t._v(t._s(t.$t("template.执行目标：")))]),t._v(" "),a("script-execute-target")],1)])};s._withStripped=!0;var i=a(26906),n=i.Z,r=(0,a(35471).Z)(n,s,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/script.vue";var l=r.exports},81139:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.loading},expression:"{ isLoading: loading }"}],staticClass:"sync-plan-layout"},[a("div",{staticClass:"wraper",class:{loading:t.loading}},[t.empty?a("Empty",{staticClass:"layout-empty"},[a("div",{staticClass:"empty-text"},[t._v(t._s(t.$t("template.暂无关联的定时任务")))]),t._v(" "),a("div",[t._t("empty")],2)]):[t._t("default")],t._v(" "),a("div",{staticClass:"layout-footer"},[t._t("footer")],2)],2)])};s._withStripped=!0;var i=a(40137),n=i.Z,r=(a(44498),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/layout.vue";var l=r.exports},46299:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sync-plan-side-anchor"},[a("scroll-faker",{ref:"scroll"},[a("div",{ref:"anchor",staticClass:"anchor-wraper"},[a("div",{staticClass:"item-title"},[t._v(t._s(t.$t("template.全局变量.label")))]),t._v(" "),t._l(t.variable,(function(e){return a("div",{key:"variable_"+e.id+"_"+e.name,staticClass:"item",class:{active:t.active==="variable_"+e.id+"_"+e.name},attrs:{"data-anchor":"variable_"+e.id+"_"+e.name},on:{mouseenter:function(a){return t.handleShowTips(e.name,"variable_"+e.id+"_"+e.name)},mouseleave:function(e){return t.handleShowTips("","")},click:function(a){return t.handleChoose("variable_"+e.id+"_"+e.name)}}},[a("div",{staticClass:"anchor-text"},[t._v(t._s(e.name))])])})),t._v(" "),a("div",{staticClass:"item-title"},[t._v(t._s(t.$t("template.作业步骤.label")))]),t._v(" "),t._l(t.step,(function(e){return a("div",{key:"step_"+e.id,staticClass:"item",class:{active:t.active==="step_"+e.id},attrs:{"data-anchor":"step_"+e.id},on:{mouseenter:function(a){return t.handleShowTips(e.name,"step_"+e.id)},mouseleave:function(e){return t.handleShowTips("","")},click:function(a){return t.handleChoose("step_"+e.id)}}},[a("div",{staticClass:"anchor-text"},[t._v(t._s(e.name))])])}))],2),t._v(" "),t.tips.name?a("tips",{key:t.tips.name,attrs:{data:t.tips}}):t._e()],1)],1)};s._withStripped=!0;var i=a(59277),n=i.Z,r=(a(16431),(0,a(35471).Z)(n,s,[],!1,null,"6e674925",null));r.options.__file="src/views/task-manage/sync-plan/components/side-anchor/index.vue";var l=r.exports},67672:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"tips",staticClass:"sync-plan-side-anchor-tips",style:t.styles},[a("div",{ref:"content",staticClass:"wraper"},[t._v("\n        "+t._s(t.data.name)+"\n    ")])])};s._withStripped=!0;var i=a(10194),n=i.Z,r=(a(72262),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/side-anchor/tips.vue";var l=r.exports},1456:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:t.isLoading},expression:"{ isLoading }"}],staticClass:"do-sync-plan"},[a("div",{staticClass:"sync-plan-step"},[a("bk-steps",{staticClass:"step-process",attrs:{steps:t.stepList,"cur-step":t.curStep},on:{"update:curStep":function(e){t.curStep=e},"update:cur-step":function(e){t.curStep=e}}})],1),t._v(" "),a("div",{staticClass:"step-wraper"},[t.isLoading?t._e():a(t.stepCom,{tag:"component",attrs:{"template-info":t.templateInfo,"plan-info":t.planInfo},on:{"on-change":t.handleStepChange,"on-cancel":t.handleCancel}})],1)])};s._withStripped=!0;var i=a(98229),n=i.Z,r=(a(96978),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/index.vue";var l=r.exports},27666:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout",{scopedSlots:t._u([{key:"footer",fn:function(){return[a("bk-button",{on:{click:t.handleCancel}},[t._v("\n            "+t._s(t.$t("template.取消"))+"\n        ")]),t._v(" "),a("bk-button",{staticClass:"w120",attrs:{theme:"primary"},on:{click:t.handleNext}},[t._v("\n            "+t._s(t.$t("template.下一步"))+"\n        ")])]},proxy:!0}])},[a("div",{staticClass:"sync-plan-step1"},[a("detail-layout",[a("detail-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:t.$t("template.全局变量.label")}},[a("render-global-var",{attrs:{list:t.templateVariableList,mode:"diff","default-field":t.$t("template.变量值"),diff:t.variableDiff}})],1),t._v(" "),a("detail-item",{attrs:{label:t.$t("template.执行步骤")}},[a("render-task-step",{attrs:{list:t.templateStepList,mode:"diff",diff:t.stepDiff}})],1)],1)],1)])};s._withStripped=!0;var i=a(62377),n=i.Z,r=(a(55610),a(89530),(0,a(35471).Z)(n,s,[],!1,null,"24a1c54c",null));r.options.__file="src/views/task-manage/sync-plan/pages/step1.vue";var l=r.exports},30267:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout",{staticClass:"sync-step2",scopedSlots:t._u([{key:"footer",fn:function(){return[a("bk-button",{on:{click:t.handleCancel}},[t._v(t._s(t.$t("template.取消")))]),t._v(" "),a("bk-button",{on:{click:t.handleLast}},[t._v(t._s(t.$t("template.上一步")))]),t._v(" "),t.isView?t._e():a("bk-button",{staticClass:"w120",attrs:{theme:"primary"},on:{click:t.handleNext}},[t._v("\n            "+t._s(t.$t("template.下一步"))+"\n        ")])]},proxy:!0}])},[a("div",{staticClass:"container"},[a("div",{staticClass:"sync-wraper"},[a("div",{staticClass:"sync-layout sync-header"},[a("div",{staticClass:"sync-before"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("template.同步前")))])]),t._v(" "),a("div",{staticClass:"sync-after"},[a("div",{staticClass:"title"},[t._v(t._s(t.$t("template.同步后")))])])]),t._v(" "),a("div",{staticClass:"sync-content"},[a("scroll-faker",{attrs:{id:"asynContent"}},[a("div",{staticClass:"sync-layout"},[a("div",{staticClass:"sync-before block-title"},[t._v("\n                            "+t._s(t.$t("template.全局变量.label"))+"\n                            "),a("span",{staticClass:"global-variable-tips"},[t._v(t._s(t.$t("template.全局变量的 “初始值” 不会被同步到执行方案")))])]),t._v(" "),a("div",{staticClass:"sync-after block-title"},[t._v("\n                            "+t._s(t.$t("template.全局变量.label"))+"\n                            "),a("span",{staticClass:"global-variable-tips"},[t._v(t._s(t.$t("template.全局变量的 “初始值” 不会被同步到执行方案")))])])]),t._v(" "),t._l(t.templateVariableList.length,(function(e){return[a("div",{key:"variable"+e,staticClass:"sync-layout"},[a("div",{staticClass:"sync-before"},[t.planVariableList[e-1]?a("diff-global-variable",{attrs:{data:t.planVariableList[e-1],diff:t.beforeVariableDiff}}):t._e()],1),t._v(" "),a("div",{staticClass:"sync-after"},[t.templateVariableList[e-1]?a("diff-global-variable",{attrs:{data:t.templateVariableList[e-1],diff:t.variableDiff,type:"sync-after"}}):t._e()],1)])]})),t._v(" "),a("div",{staticClass:"sync-layout"},[a("div",{staticClass:"sync-before block-title"},[t._v(t._s(t.$t("template.作业步骤.label")))]),t._v(" "),a("div",{staticClass:"sync-after block-title"},[t._v(t._s(t.$t("template.作业步骤.label")))])]),t._v(" "),t._l(t.templateStepList.length,(function(e){return[a("div",{key:"step"+e,staticClass:"sync-layout"},[a("div",{staticClass:"sync-before"},[t.planStepList[e-1]?a("diff-task-step",{attrs:{type:"sync-before",data:t.planStepList[e-1],account:t.accountList,diff:t.beforeStepDiff}}):t._e()],1),t._v(" "),a("div",{staticClass:"sync-after"},[t.templateStepList[e-1]?a("diff-task-step",{attrs:{type:"sync-after",data:t.templateStepList[e-1],account:t.accountList,diff:t.stepDiff}}):t._e()],1)])]}))],2)],1)]),t._v(" "),a("side-anchor",{staticClass:"side-anchor",attrs:{variable:t.templateVariableList,step:t.templateStepList}})],1)])};s._withStripped=!0;var i=a(19589),n=i.Z,r=(a(5109),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/pages/step2.vue";var l=r.exports},45839:function(t,e,a){"use strict";a.r(e),a.d(e,{__esModule:function(){return i.X},default:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout",{staticClass:"sync-plan-step3",attrs:{empty:t.isEmpty,loading:t.isLoading},scopedSlots:t._u([{key:"footer",fn:function(){return[a("bk-button",{on:{click:t.handleCancel}},[t._v(t._s(t.$t("template.取消")))]),t._v(" "),a("bk-button",{on:{click:t.handleLast}},[t._v(t._s(t.$t("template.上一步")))]),t._v(" "),a("jb-popover-confirm",{attrs:{title:t.$t("template.是否确认同步？"),content:t.$t("template.关联定时任务的调整将立即生效"),"confirm-handler":t.handleSubmit}},[a("bk-button",{staticClass:"w120",attrs:{theme:"primary"}},[t._v("\n                "+t._s(t.$t("template.立即同步"))+"\n            ")])],1)]},proxy:!0}])},[a("div",{staticClass:"layout-wraper"},[a("div",{staticClass:"layout-left"},[a("scroll-faker",t._l(t.timeTaskList,(function(e){return a("div",{key:e.id,staticClass:"job-tab",class:{active:e.id===t.currentTaskId},on:{click:function(a){return t.handleTabChange(e.id)}}},[a("span",{staticClass:"job-name"},[t._v(t._s(e.name))]),t._v(" "),e.hasConfirm?a("Icon",{staticClass:"job-check",attrs:{type:"check"}}):t._e(),t._v(" "),a("div",{on:{click:function(t){t.stopPropagation()}}},[a("bk-switcher",{staticClass:"job-switch",attrs:{value:e.enable,size:"small",theme:"primary"},on:{change:function(a){return t.handleEnableChange(e.id,a)}}})],1)],1)})),0)],1),t._v(" "),a("div",{staticClass:"layout-right"},[a("scroll-faker",[a("crontab-detail",{key:t.detailInfo.id,attrs:{data:t.detailInfo,"variable-list":t.templateVariableList},on:{"on-change":t.handleVariableChange,"on-update-confirm":t.handleUpdateConfirm}})],1)],1)])])};s._withStripped=!0;var i=a(10643),n=i.Z,r=(a(81749),(0,a(35471).Z)(n,s,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/pages/step3.vue";var l=r.exports},93916:function(t,e,a){var s=a(33391);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("cc4f886e",s,!1,{})},56e3:function(t,e,a){var s=a(84193);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("6084d574",s,!1,{})},46434:function(t,e,a){var s=a(71966);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("20ac3c66",s,!1,{})},82342:function(t,e,a){var s=a(70772);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("928fa142",s,!1,{})},3476:function(t,e,a){var s=a(44623);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("696877df",s,!1,{})},91515:function(t,e,a){var s=a(91281);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("5a361fd2",s,!1,{})},84612:function(t,e,a){var s=a(44042);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("f641cab8",s,!1,{})},91495:function(t,e,a){var s=a(80793);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("55f75eea",s,!1,{})},39964:function(t,e,a){var s=a(14867);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("5edf8ac5",s,!1,{})},16050:function(t,e,a){var s=a(99263);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("46b6fcb9",s,!1,{})},44498:function(t,e,a){var s=a(74665);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("6f2c0f9c",s,!1,{})},16431:function(t,e,a){var s=a(72291);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("7ee45168",s,!1,{})},72262:function(t,e,a){var s=a(63998);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("06073c55",s,!1,{})},96978:function(t,e,a){var s=a(42870);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("9ebe17a0",s,!1,{})},55610:function(t,e,a){var s=a(67869);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("3692a0cc",s,!1,{})},89530:function(t,e,a){var s=a(68334);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("45fdc855",s,!1,{})},5109:function(t,e,a){var s=a(3015);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("7572e20c",s,!1,{})},81749:function(t,e,a){var s=a(18130);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);(0,a(13570).Z)("b453234c",s,!1,{})}}]);