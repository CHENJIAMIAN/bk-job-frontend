(self.webpackChunkjob=self.webpackChunkjob||[]).push([[3162],{85117:function(e,t,a){"use strict";a(87147),a(13118),a(20767);var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(41336),a(91981),a(63898),a(70616),a(59241),a(79951),a(45680),a(14309);var s=i(a(68203)),n=i(a(25190)),r=i(a(66662)),l=i(a(28033)),o=i(a(14590)),c=i(a(89888));function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var d={name:"",components:{GlobalVariableLayout:l.default,GlobalVariable:o.default,Empty:c.default},props:{data:{type:Object,default:function(){return{}}},variableList:{type:Array,required:!0}},data:()=>({isLoading:!1,isEmpty:!1,isEditing:!1,isSubmiting:!1,info:{name:"",enable:!0,hasConfirm:!1,variableValue:[]}}),computed:{readonly(){return!this.data.enable||!this.isEditing&&this.info.hasConfirm}},created(){this.data.id&&(this.info=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.data),this.isEditing=!this.info.hasConfirm,this.info.hasConfirm||(this.info.variableValue=Object.freeze((0,n.default)(this.variableList)),this.fetchData()))},methods:{fetchData(){var e=this;this.isLoading=!0,r.default.getDetail({id:this.data.id}).then((function(t){var a=t.name,i=t.variableValue;if(e.info.name=a,e.variableList.length<1)return e.isEmpty=!0,void e.$emit("on-change",[]);var s=i.reduce((function(e,t){return e[t.id]=t,e}),{});e.info.variableValue.forEach((function(e){if(s[e.id]){var t=s[e.id],a=t.value,i=t.targetValue;e.defaultValue=a,e.defaultTargetValue=i}}))})).finally((function(){e.isLoading=!1}))},handleToggleEdit(){this.isEditing=!0,this.$emit("on-update-confirm",!1)},handleSubmit(){var e=this;Promise.all(this.$refs.variable.map((function(e){return e.validate()}))).then((function(t){window.changeAlert=!1,e.isEditing=!1,e.info.hasConfirm=!0,e.info.variableValue=Object.freeze(t),e.messageSuccess("定时任务确认成功"),e.$emit("on-change",Object.freeze(t))}))},handleReset(){this.$refs.variable.forEach((function(e){return e.reset()}))}}};t.Z=d},17001:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(98495),a(41336),a(59241),a(89336);var s=i(a(34976)),n=i(a(80336)),r=i(a(48042)),l=a(85049),o=a(36878),c=function(e){return!e||!e.variable&&(!(e.hostNodeInfo.topoNodeList.length>0)&&(!(e.hostNodeInfo.ipList.length>0)&&!(e.hostNodeInfo.dynamicGroupList.length>0)))},f={name:"",components:{ScrollFaker:n.default,ServerPanel:r.default},props:{preHost:{type:Object,required:!0},lastHost:{type:Object,required:!0}},data:()=>({isShowDetail:!1,isShowDiff:!1,variableName:"",ipText:"",hostEqual:!0,hostNodeInfo:{},nodeDiff:{},hostDiff:{},groupDiff:{}}),computed:{isNotEmpty(){return this.variableName||this.ipText},diffEnable(){return!c(this.preHost)&&!c(this.lastHost)&&!this.hostEqual}},created(){var e=new s.default({}).hostNodeInfo;this.originHostNodeInfo=Object.freeze(e),this.hostNodeInfo=Object.freeze(e),this.composeNode=[],this.diffNodeMemo={},this.composeHost=[],this.diffHostMemo={},this.composeGroup=[],this.diffGroupMemo={}},mounted(){this.stepParent=(0,l.findParent)(this,"DiffTaskStep"),this.dataSourceParent=(0,l.findParent)(this,"SyncPlanStep2"),this.init(),this.checkDiff()},methods:{init(){var e=this.preHost;if("sync-after"===this.stepParent.type&&(e=this.lastHost),e.variable){this.variableName=e.variable;var t=(0,o.findVariable)(this.dataSourceParent.planVariableList,this.variableName);this.originHostNodeInfo=Object.freeze(t.defaultTargetValue.hostNodeInfo)}else this.originHostNodeInfo=Object.freeze(e.hostNodeInfo),this.ipText=e.text;this.hostNodeInfo=this.originHostNodeInfo},checkDiff(){var e=this,t=this.preHost.hostNodeInfo,a=this.lastHost.hostNodeInfo;if(this.preHost.variable){var i=(0,o.findVariable)(this.dataSourceParent.planVariableList,this.preHost.variable);i&&(t=i.defaultTargetValue.hostNodeInfo)}if(this.lastHost.variable){var s=(0,o.findVariable)(this.dataSourceParent.templateVariableList,this.lastHost.variable);s&&(a=s.defaultTargetValue.hostNodeInfo)}var n={},r=[],l=function(e){return"#".concat(e.type,"#").concat(e.id)};a.topoNodeList.forEach((function(e){n[l(e)]="new",r.push(e)})),t.topoNodeList.forEach((function(e){var t=l(e);n[t]?n[t]="same":(n[t]="delete",r.push(e))})),this.composeNode=Object.freeze(r),this.diffNodeMemo=Object.freeze(n),Object.values(this.diffNodeMemo).forEach((function(t){"same"!==t&&(e.hostEqual=!1)}));var c={},f=[],d=function(e){return"".concat(e.cloudAreaInfo.id,":").concat(e.ip)};a.ipList.forEach((function(e){c[d(e)]="new",f.push(e)})),t.ipList.forEach((function(e){var t=d(e);c[t]?c[t]="same":(c[t]="delete",f.push(e))})),this.composeHost=Object.freeze(f),this.diffHostMemo=Object.freeze(c),Object.values(this.diffHostMemo).forEach((function(t){"same"!==t&&(e.hostEqual=!1)}));var u={},p=[];a.dynamicGroupList.forEach((function(e){u[e]="new",p.push(e)})),t.dynamicGroupList.forEach((function(e){u[e]?u[e]="same":(u[e]="delete",p.push(e))})),this.composeGroup=Object.freeze(p),this.diffGroupMemo=Object.freeze(u),Object.values(this.diffGroupMemo).forEach((function(t){"same"!==t&&(e.hostEqual=!1)}))},handlerView(){this.hostNodeInfo=this.originHostNodeInfo,this.nodeDiff={},this.hostDiff={},this.groupDiff={},this.isShowDetail=!0,this.isShowDiff=!1},handleToggleDiff(e){e?(this.hostNodeInfo=Object.freeze({dynamicGroupList:this.composeGroup,ipList:this.composeHost,topoNodeList:this.composeNode}),this.nodeDiff=this.diffNodeMemo,this.hostDiff=this.diffHostMemo,this.groupDiff=this.diffGroupMemo):this.handlerView()}}};t.Z=f},98909:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s={name:"",components:{HostDetail:i(a(53095)).default},props:{data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}},type:{type:String,default:""}},computed:{classes(){var e="".concat(this.data.realId);return this.diff[e]?this.diff[e].type:""},diffValue(){var e="".concat(this.data.realId);return this.diff[e]&&this.diff[e].value||{}}}};t.Z=s},39098:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(98495),a(41336),a(59241);var s=i(a(7285)),n=i(a(34976)),r=a(85049),l=i(a(80336)),o=i(a(48042)),c={name:"StepViewGlobalVariable",components:{ScrollFaker:l.default,ServerPanel:o.default},props:{type:{type:String,default:""},name:{type:String,required:!0},data:{type:Object,default:function(){return{}}},diffEnable:{type:Boolean,default:!1}},data:()=>({isShowDetail:!1,isShowDiff:!1,hostNodeInfo:{dynamicGroupList:[{},{},{}],ipList:[{},{},{}],topoNodeList:[{},{},{}]},nodeDiff:{},hostDiff:{},groupDiff:{}}),computed:{title(){return this.type?this.type:"全局变量".concat(" - ",this.name)}},mounted(){this.composeNode=[],this.diffNodeMemo={},this.composeHost=[],this.diffHostMemo={},this.composeGroup=[],this.diffGroupMemo={},this.checkDiff()},methods:{checkDiff(){var e=this,t=function(){return{defaultTargetValue:{hostNodeInfo:new n.default({}).hostNodeInfo}}},a=(0,r.findParent)(this,"SyncPlanStep2"),i=(0,s.default)(a.planVariableList,(function(t){return t.name===e.name}));i||(i=t());var l=(0,s.default)(a.templateVariableList,(function(t){return t.name===e.name}));l||(l=t());var o=i.defaultTargetValue.hostNodeInfo,c=l.defaultTargetValue.hostNodeInfo,f={},d=[],u=function(e){return"".concat(e.type,"_").concat(e.id)};c.topoNodeList.forEach((function(e){f[u(e)]="new",d.push(e)})),o.topoNodeList.forEach((function(e){f[u(e)]?f[u(e)]="normal":(f[u(e)]="delete",d.push(e))})),this.composeNode=Object.freeze(d),this.diffNodeMemo=Object.freeze(f);var p={},v=[],h=function(e){return"".concat(e.cloudAreaInfo.id,"_").concat(e.ip)};c.ipList.forEach((function(e){p[h(e)]="new",v.push(e)})),o.ipList.forEach((function(e){p[h(e)]?p[h(e)]="normal":(p[h(e)]="delete",v.push(e))})),this.composeHost=Object.freeze(v),this.diffHostMemo=Object.freeze(p);var _={},m=[];c.dynamicGroupList.forEach((function(e){_[e]="new",m.push(e)})),o.dynamicGroupList.forEach((function(e){_[e]?_[e]="normal":(_[e]="delete",m.push(e))})),this.composeGroup=Object.freeze(m),this.diffGroupMemo=Object.freeze(_)},handlerView(){this.hostNodeInfo=Object.freeze(this.data.hostNodeInfo),this.nodeDiff={},this.hostDiff={},this.groupDiff={},this.isShowDetail=!0},handleToggleDiff(e){e?(this.hostNodeInfo=Object.freeze({dynamicGroupList:this.composeGroup,ipList:this.composeHost,topoNodeList:this.composeNode}),this.nodeDiff=this.diffNodeMemo,this.hostDiff=this.diffHostMemo,this.groupDiff=this.diffGroupMemo):this.handlerView()}}};t.Z=c},50837:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(41336),a(91981),a(63898),a(79951),a(45680),a(59241),a(14309);var s=i(a(13030)),n=i(a(31752)),r={name:"",inheritAttrs:!1,props:{data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}}},data:()=>({renderRoleList:[{},{},{}],renderChannel:""}),created(){var e=this;Promise.all([this.fetchRoleList(),this.fetchAllChannel()]).finally((function(){e.isLoading=!1}))},methods:{fetchRoleList(){var e=this;n.default.fetchRoleList().then((function(t){var a={};t.forEach((function(e){a[e.code]=e.name})),e.renderRoleList=e.data.approvalUser.roleList.map((function(e){return a[e]}))}))},fetchAllChannel(){var e=this;s.default.fetchActiveNotifyChannel().then((function(t){var a={};t.forEach((function(e){a[e.code]=e.name})),e.renderChannel=e.data.notifyChannel.map((function(e){return a[e]})).join("，")}))}}};t.Z=r},72232:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=a(85049),n=i(a(12435)),r=a(36878),l={name:"SyncPlanFileExecuteTarget",components:{IpDetail:n.default},data:()=>({preHost:{},lastHost:{}}),created(){var e=(0,s.findParent)(this,"SyncPlanStep2"),t=(0,s.findParent)(this,"DiffTaskStep").data.realId,a=(0,r.findStep)(e.planStepList,t),i=(0,r.findStep)(e.templateStepList,t);this.preHost=Object.freeze(a.fileStepInfo.fileDestination.server),this.lastHost=Object.freeze(i.fileStepInfo.fileDestination.server)}};t.Z=l},41982:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=i(a(34976)),n=i(a(12435)),r=function(){return new s.default({})},l={name:"SyncPlanFileSourceServer",components:{IpDetail:n.default},props:{preHost:{type:Object,default:function(){return{}}},lastHost:{type:Object,default:function(){return{}}}},created(){this.preHost&&this.preHost.hostNodeInfo?this.realPreHost=this.preHost:this.realPreHost=r(),this.lastHost&&this.lastHost.hostNodeInfo?this.realLastHost=this.lastHost:this.realLastHost=r()}};t.Z=l},95553:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(85376),a(3511),a(41336),a(59241),a(14309),a(77702),a(98495),a(70616);var s=i(a(41844)),n=i(a(3902)),r=i(a(27861)),l=a(85049),o=a(36878),c=i(a(85307)),f={name:"",components:{JbCollapseItem:r.default,FileSourceServer:c.default},props:{id:{type:Number,required:!0},data:{type:Array,default:function(){return[]}},account:{type:Array,default:function(){return[]}}},data:()=>({activeResult:["local","server"],localFileCount:0,serverFileCount:0,localFileList:[{},{},{}],serverFileList:[{},{},{}],localFileDiff:{},serverFileDiff:{}}),computed:{isShowLocalFile(){return this.localFileList.length>0},isShowServerFile(){return this.serverFileList.length>0}},created(){this.preServerList=[],this.lastServerList=[],this.checkDiff()},methods:{generatorAccountAlias(e){var t=this.account.find((function(t){return t.id===e}));return t?t.alias:""},checkDiff(){var e=(0,l.findParent)(this,"SyncPlanStep2"),t=(0,o.findStep)(e.planStepList,this.id),a=(0,o.findStep)(e.templateStepList,this.id),i=[],r=[],c=[],f=[];a.fileStepInfo.fileSourceList.forEach((function(e){var t=new n.default(e);t.isServerFile?r.push(t):i.push(t)})),t.fileStepInfo.fileSourceList.forEach((function(e){var t=new n.default(e);t.isServerFile?f.push(t):c.push(t)}));var d=(0,l.findParent)(this,"DiffTaskStep");if("sync-after"===d.type?(this.localFileCount=i.length,this.serverFileCount=r.length):(this.localFileCount=c.length,this.serverFileCount=f.length),!e.stepDiff[this.id]||e.stepDiff[this.id]&&"new"===e.stepDiff[this.id].type)return this.localFileList=Object.freeze(i),this.localFileDiff=Object.freeze({}),this.preServerList=Object.freeze(r.map((function(e){return{}}))),this.lastServerList=Object.freeze(r),void(this.serverFileDiff=Object.freeze({}));var u=function(e,t){var a={};return["host","account"].forEach((function(i){a[i]=JSON.stringify(e[i])===JSON.stringify(t[i])?"":"changed"})),a},p={},v=[];i.forEach((function(e){v.push(e),p[e.realId]="new"}));for(var h=null,_=0,m=function(e){var t=c[e];if(p[t.realId]){if(p[t.realId]="same",_+=1,h){var a=(0,s.default)(v,(function(e){return e.realId===t.realId}));v.splice(a,0,h),h=null}return"continue"}h&&(_+=1,v.splice(_,0,h)),p[t.realId]="delete",h=t},b=0;b<c.length;b++)m(b);h&&(_+=1,v.splice(_,0,h));for(var y={},g={},C=[],S=0;S<r.length;S++){var I=r[S];if(y[I.realId]){y[I.realId].push(I);var w="".concat(I.realId,"_").concat(Math.random(),"_").concat(Math.random());I.sameFileKey=w,g[w]={type:"new"}}else y[I.realId]=[I];C.push(I),g[I.realId]={type:"new"}}for(var L=null,k=0,j=function(e){var t=f[e];if(g[t.realId]){if(k+=1,L){var a=(0,s.default)(C,(function(e){return e.realId===t.realId}));C.splice(a,0,L),L=null}var i=y[t.realId].shift();if(i)i.sameFileKey?(g[i.sameFileKey]={type:"different",value:u(i,t)},t.sameFileKey=i.sameFileKey):g[t.realId]={type:"different",value:u(i,t)};else{var n=(0,s.default)(C,(function(e){return e.realId===t.realId}));C.splice(n+1,0,L),L=null}return"continue"}L&&(k+=1,C.splice(k,0,L)),g[t.realId]={type:"delete"},L=t},O=0;O<f.length;O++)j(O);L&&(k+=1,C.splice(k,0,L)),this.lastServerList=C,"sync-after"===d.type&&(this.localFileList=Object.freeze(v),this.localFileDiff=Object.freeze(p),this.serverFileList=Object.freeze(C),this.serverFileDiff=Object.freeze(g));for(var x=v.map((function(e){return"new"===p[e.realId]?{}:e})),D=Object.keys(p).reduce((function(e,t){return"different"===p[t].type&&(e[t]=p[t]),e}),{}),T=[],E={},P=0;P<C.length;P++){var V=C[P];if(g[V.sameFileKey]&&"new"===g[V.sameFileKey].type)T.push({});else if("new"!==g[V.realId].type)for(var Z=0;Z<f.length;Z++){var N=f[Z];if(!E[Z]&&(V.sameFileKey&&V.sameFileKey===N.sameFileKey||V.realId===N.realId)){E[Z]=!0,T.push(N);break}}else T.push({})}var M=Object.keys(g).reduce((function(e,t){return"different"===g[t].type&&(e[t]=g[t]),e}),{});"sync-before"===d.type&&(this.localFileList=Object.freeze(x),this.localFileDiff=Object.freeze(D),this.serverFileList=Object.freeze(T),this.serverFileDiff=Object.freeze(M)),this.preServerList=T},checkRowClass(e){return this.serverFileDiff[e.realId]?this.serverFileDiff[e.sameFileKey]?this.serverFileDiff[e.sameFileKey].type:this.serverFileDiff[e.realId].type:""},checkDiffClass(e,t){return this.serverFileDiff[e.realId]?"different"!==this.serverFileDiff[e.realId].type?"":this.serverFileDiff[e.realId].value[t]||"":""}}};t.Z=f},12966:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=i(a(17434));a(41336),a(91981),a(63898),a(79951),a(45680);var n=a(7216),r=i(a(23898)),l=a(85049),o=a(36878),c={name:"",data:()=>({isLoading:!0,isShowContent:!1,content:""}),computed:{dialogStyles:()=>({"z-index":window.__bk_zIndex_manager.nextZIndex()})},created(){var e=this,t=(0,l.findParent)(this,"DiffTaskStep"),a=(0,l.findParent)(this,"SyncPlanStep2"),i=(0,o.findStep)(a.planStepList,t.data.realId),n=(0,o.findStep)(a.templateStepList,t.data.realId);Promise.all([this.fetchContent(i),this.fetchContent(n)]).then((function(t){var a=(0,s.default)(t,2),i=a[0],n=a[1];e.oldCode=i,e.newCode=n})).finally((function(){e.isLoading=!1}))},methods:{fetchContent(e){var t=e.scriptStepInfo;return 1===t.scriptSource?Promise.resolve(n.Base64.decode(t.content)):t.scriptVersionId?r.default.versionDetail({id:t.scriptVersionId}).then((function(e){return n.Base64.decode(e.content)})):Promise.resolve("")},handleView(){var e=this;this.isShowContent=!0,this.$nextTick((function(){document.body.appendChild(e.$refs.dialog)}))},handleClose(){this.$refs.dialog&&document.body.removeChild(this.$refs.dialog),this.isShowContent=!1}}};t.Z=c},42382:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=a(85049),n=i(a(12435)),r=a(36878),l={name:"SyncPlanScriptExecuteTarget",components:{IpDetail:n.default},data:()=>({preHost:{},lastHost:{}}),created(){var e=(0,s.findParent)(this,"SyncPlanStep2"),t=(0,s.findParent)(this,"DiffTaskStep").data.realId,a=(0,r.findStep)(e.planStepList,t),i=(0,r.findStep)(e.templateStepList,t);this.preHost=Object.freeze(a.scriptStepInfo.executeTarget),this.lastHost=Object.freeze(i.scriptStepInfo.executeTarget)}};t.Z=l},86400:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(85376),a(3511),a(41336);var s=i(a(9915)),n=i(a(88760)),r={name:"",components:{FileSource:s.default,FileExecuteTarget:n.default},props:{id:{type:Number,required:!0},data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}},account:{type:Array,default:function(){return[]}}},methods:{findName(e){var t=this.account.find((function(t){return t.id===e}));return t?t.alias:"-"}}};t.Z=r},38644:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=i(a(63557)),n=i(a(46584)),r=i(a(95591)),l=i(a(68483)),o={[s.default.TYPE_SCRIPT]:n.default,[s.default.TYPE_FILE]:r.default,[s.default.TYPE_APPROVAL]:l.default},c={name:"DiffTaskStep",inheritAttrs:!1,props:{data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}},type:{type:String,default:""}},computed:{infoCom(){return o[this.data.type]},info(){var e={[s.default.TYPE_SCRIPT]:"scriptStepInfo",[s.default.TYPE_FILE]:"fileStepInfo",[s.default.TYPE_APPROVAL]:"approvalStepInfo"};return this.data[e[this.data.type]]},classes(){var e="".concat(this.data.realId);return this.diff[e]?this.diff[e].type:""},diffValue(){var e="".concat(this.data.realId);return this.diff[e]&&this.diff[e].value||{}}}};t.Z=c},41012:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(3511),a(41336);var s=i(a(33369)),n=i(a(67822)),r={name:"",components:{ScriptContent:s.default,ScriptExecuteTarget:n.default},props:{data:{type:Object,required:!0},diff:{type:Object,default:function(){return{}}},account:{type:Array,default:function(){return[]}}},methods:{findName(e){var t=this.account.find((function(t){return t.id===e}));return t?t.alias:""}}};t.Z=r},16036:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s={name:"",components:{Empty:i(a(89888)).default},props:{loading:{type:Boolean,default:!1},empty:{type:Boolean,default:!1}}};t.Z=s},27093:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(98495),a(41336),a(59241);var s=i(a(17434)),n=i(a(2771)),r=a(11986),l={name:"",components:{Tips:i(a(59823)).default},props:{variable:{type:Array,required:!0},step:{type:Array,required:!0}},data:()=>({active:"",tips:{name:"",target:""}}),created(){if(this.variable.length>0){var e=(0,s.default)(this.variable,1)[0],t=e.id,a=e.name;this.active="variable_".concat(t,"_").concat(a)}else this.active="".concat(this.step[0].id,"_").concat(this.step[0].name);this.scrollNum=0,this.offsetTopMap={}},mounted(){var e=this,t=document.querySelector("#asynContent").querySelector(".scroll-faker-content");t.addEventListener("scroll",this.setActive),this.$once("hook:beforeDestroy",(function(){t.removeEventListener("scroll",e.setActive)})),this.init()},methods:{init(){var e=this;this.$refs.anchor.querySelectorAll(".item").forEach((function(t){var a="".concat(t.getAttribute("data-anchor"));e.offsetTopMap[a]=document.querySelector("#sync-after_".concat(a)).offsetTop}))},setActive:(0,n.default)((function(e){var t=this;this.scrollNum=0;var a=e.target.scrollTop;for(var i in this.offsetTopMap){if(!(this.offsetTopMap[i]<a+60))break;this.active=i,this.scrollNum+=1}this.$nextTick((function(){t.$refs.scroll.scrollTo(26*t.scrollNum)}))}),50),handleShowTips(e,t){this.tips={name:e,target:t}},handleChoose(e){var t=document.querySelector("#sync-after_".concat(e)).offsetTop-24;this.active=e,(0,r.scrollTopSmooth)(document.querySelector("#asynContent").querySelector(".scroll-faker-content"),t)}}};t.Z=l},76773:function(e,t,a){"use strict";Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var i=a(11986),s={props:{data:{type:Object,required:!0}},data:()=>({position:"left",top:0,left:0}),computed:{styles(){return{position:"absolute",top:"".concat(this.top,"px"),left:"".concat(this.left,"px"),"z-index":window.__bk_zIndex_manager.nextZIndex()}}},mounted(){var e=this;this.$target=document.querySelector(".sync-plan-side-anchor").querySelector('[data-anchor="'.concat(this.data.target,'"]'));var t=(0,i.getScrollParent)(this.$target);t&&(t.addEventListener("scroll",this.calcPosition),this.$once("hook:beforeDestroy",(function(){t.removeEventListener("scroll",e.calcPosition)}))),this.init()},beforeDestroy(){try{this.$refs.detail&&document.body.removeChild(this.$refs.detail)}catch(e){}},methods:{init(){var e=this;this.$nextTick((function(){e.calcPosition()})),document.body.appendChild(this.$refs.tips)},calcPosition(){var e=this.$refs.tips.getBoundingClientRect().height,t=this.$target.getBoundingClientRect(),a=t.top,i=t.left,s=t.height;this.top=a-(e-s)/2,this.left=i}}};t.Z=s},61524:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(41336),a(91981),a(63898),a(59241),a(94354);var s=i(a(51391)),n=i(a(67471)),r=i(a(89867)),l=i(a(76858)),o={name:"",components:{Step1:n.default,Step2:r.default,Step3:l.default},data:()=>({isLoading:!0,curStep:1,templateInfo:{},planInfo:{}}),computed:{stepCom(){return{1:n.default,2:r.default,3:l.default}[this.curStep]}},created(){this.id=this.$route.params.id,this.templateId=this.$route.params.templateId,this.stepList=[{title:"差异总览",icon:1},{title:"差异明细",icon:2},{title:"确认定时任务",icon:3}],"view"===this.$route.query.mode&&this.stepList.pop(),this.fetchData()},methods:{fetchData(e){var t=this;this.$request(s.default.fetchSyncInfo({id:this.id,templateId:this.templateId},{permission:"page"}),(function(){t.isLoading=!0})).then((function(e){var a=e.templateInfo,i=e.planInfo,s={};i.variableList.forEach((function(e){e.realId=e.id,s[e.realId]={defaultTargetValue:e.defaultTargetValue,defaultValue:e.defaultValue}})),i.stepList.forEach((function(e){e.realId=e.templateStepId})),t.planInfo=Object.freeze(i),a.variables.forEach((function(e){e.realId=e.id,s[e.realId]&&(e.defaultTargetValue=s[e.realId].defaultTargetValue,e.defaultValue=s[e.realId].defaultValue)})),a.stepList.forEach((function(e){e.realId=e.id})),t.templateInfo=Object.freeze(a)})).catch((function(e){[1241002,400].includes(e.code)&&setTimeout((function(){t.$router.push({name:"taskList"})}),3e3)})).finally((function(){t.isLoading=!1}))},handleStepChange(e){this.curStep=e},handleCancel(){this.routerBack()},routerBack(){"viewPlan"!==this.$route.query.from?this.$router.push({name:"planList",query:{viewTemplateId:this.templateId,viewPlanId:this.id}}):this.$router.push({name:"viewPlan",params:{templateId:this.templateId},query:{viewPlanId:this.id}})}}};t.Z=o},20262:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0;var s=i(a(17434)),n=i(a(89825)),r=i(a(70481)),l=i(a(86080)),o=i(a(18094)),c=i(a(96187)),f=a(34394),d={name:"SyncPlanStep1",components:{DetailLayout:n.default,DetailItem:r.default,Layout:l.default,RenderGlobalVar:o.default,RenderTaskStep:c.default},props:{templateInfo:{type:Object,default:function(){return{variables:[],stepList:[{},{},{}]}}},planInfo:{type:Object,default:function(){return{variableList:[{},{},{}],stepList:[{},{},{}]}}}},data:()=>({templateVariableList:[{},{},{}],templateStepList:[{},{},{}],variableDiff:{},stepDiff:{}}),created(){this.templateVariableList=Object.freeze((0,f.mergeList)(this.templateInfo.variables,this.planInfo.variableList)),this.variableDiff=Object.freeze((0,f.diffVariableSimple)(this.templateInfo.variables,this.planInfo.variableList));var e=(0,f.diffStepSimple)(this.templateInfo.stepList,this.planInfo.stepList),t=(0,s.default)(e,2),a=t[0],i=t[1];this.templateStepList=Object.freeze(a),this.stepDiff=Object.freeze(i)},methods:{handleNext(){this.$emit("on-change",2)},handleCancel(){this.$emit("on-cancel")}}};t.Z=d},88289:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(70616),a(41336);var s=i(a(17434)),n=i(a(25190)),r=i(a(6869)),l=i(a(80336)),o=i(a(86080)),c=i(a(87307)),f=i(a(76010)),d=i(a(88536)),u=a(34394),p={name:"SyncPlanStep2",components:{ScrollFaker:l.default,Layout:o.default,DiffGlobalVariable:c.default,DiffTaskStep:f.default,SideAnchor:d.default},props:{templateInfo:{type:Object,default:function(){return{variables:[],stepList:[{},{},{}]}}},planInfo:{type:Object,default:function(){return{variableList:[{},{},{}],stepList:[{},{},{}]}}}},data:()=>({accountList:[{},{},{}],templateVariableList:[{},{},{}],templateStepList:[{},{},{}],planVariableList:[{},{},{}],planStepList:[{},{},{}],beforeVariableDiff:{},variableDiff:{},beforeStepDiff:{},stepDiff:{}}),created(){this.isView="view"===this.$route.query.mode,this.fetchAccount(),this.init()},methods:{init(){var e=(0,n.default)(this.templateInfo.variables),t=(0,n.default)(this.templateInfo.stepList),a=(0,n.default)(this.planInfo.variableList),i=(0,n.default)(this.planInfo.stepList),r=(0,u.composeList)(e,a),l=(0,s.default)(r,2),o=l[0],c=l[1];this.templateVariableList=Object.freeze(o),this.planVariableList=Object.freeze(c);var f=(0,u.composeList)(t,i),d=(0,s.default)(f,2),p=d[0],v=d[1];this.templateStepList=Object.freeze(p),this.planStepList=Object.freeze(v);var h=Object.freeze((0,u.diffVariable)(e,a));this.beforeVariableDiff=Object.keys(h).reduce((function(e,t){return"delete"!==h[t].type&&"new"!==h[t].type&&(e[t]=h[t]),e}),{}),this.variableDiff=h;var _=Object.freeze((0,u.diffStep)(t,i));this.beforeStepDiff=Object.keys(_).reduce((function(e,t){return"delete"!==_[t].type&&"new"!==_[t].type&&(e[t]=_[t]),e}),{}),this.stepDiff=_},fetchAccount(){var e=this;r.default.fetchAccountWhole().then((function(t){e.accountList=t}))},handleLast(){this.$emit("on-change",1)},handleNext(){this.$emit("on-change",3)},handleCancel(){this.$emit("on-cancel")}}};t.Z=p},3595:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"X",{value:!0}),t.Z=void 0,a(3511),a(41336),a(91981),a(63898),a(14309),a(13118);var s=i(a(51391)),n=i(a(66662)),r=a(11986),l=i(a(80336)),o=i(a(86080)),c=i(a(17609)),f={name:"",components:{ScrollFaker:l.default,Layout:o.default,CrontabDetail:c.default},props:{templateInfo:{type:Object,default:function(){return{}}}},data:()=>({isLoading:!0,isEmpty:!1,timeTaskList:[{},{},{}],currentTaskId:0}),computed:{detailInfo(){var e=this;return this.timeTaskList.find((function(t){return t.id===e.currentTaskId}))||{}}},created(){this.id=this.$route.params.id,this.templateId=this.$route.params.templateId,this.templateVariableList=this.templateInfo.variables,this.fetchTimeTaskList()},methods:{fetchTimeTaskList(){var e=this;this.isLoading=!0,n.default.fetchTaskOfPlan({id:this.id}).then((function(t){t.length<1?e.isEmpty=!0:(e.timeTaskList=t.map((function(e){return{id:(t=e).id,name:t.name,enable:t.enable,hasConfirm:!1,variableValue:[]};var t})),t.length>0&&(e.currentTaskId=t[0].id))})).finally((function(){e.isLoading=!1}))},handleTabChange(e){this.currentTaskId=e},handleEnableChange(e,t){this.timeTaskList.find((function(t){return t.id===e})).enable=t,window.changeAlert=!0},handleVariableChange(e){var t=this,a=this.timeTaskList.find((function(e){return e.id===t.currentTaskId}));a.variableValue=e,a.hasConfirm=!0,window.changeAlert=!0},handleUpdateConfirm(e){var t=this;this.timeTaskList.find((function(e){return e.id===t.currentTaskId})).hasConfirm=e,window.changeAlert=!0},handleSubmit(){var e=this;if(this.timeTaskList.filter((function(e){return e.enable})).every((function(e){return e.hasConfirm})))return s.default.planSyncInfo({planId:this.id,templateId:this.templateId,templateVersion:this.templateInfo.version}).then((function(){return n.default.updatePlanTask({cronJobInfoList:e.timeTaskList})}),(function(){e.messageError("执行方案同步失败")})).then((function(){return window.changeAlert=!1,e.messageSuccess("同步成功",(function(){e.$router.push({name:"viewPlan",params:{templateId:e.templateId},query:{viewPlanId:e.id}})})),!0}),(function(){e.messageError("定时任务更新失败")}));this.messageWarn("有定时任务还未确认")},handleLast(){var e=this;(0,r.leaveConfirm)().then((function(){e.$emit("on-change",2)}))},handleCancel(){this.$emit("on-cancel")}}};t.Z=f},36878:function(e,t,a){"use strict";var i=a(70534);Object.defineProperty(t,"__esModule",{value:!0}),t.ipStatistics=t.findVariable=t.findStep=void 0;var s=i(a(7285)),n=i(a(63557)),r=i(a(15265));t.ipStatistics=function(e){var t=[];return e.ipList.length>0&&t.push("".concat(e.ipList.length,"个主机")),e.topoNodeList.length>0&&t.push("".concat(e.topoNodeList.length,"个节点")),e.dynamicGroupList.length>0&&t.push("".concat(e.dynamicGroupList.length,"个分组")),t.join("，")};t.findStep=function(e,t,a){var i=(0,s.default)(e,(function(e){return e.realId===t}));return i||new n.default({approvalStepInfo:{},fileStepInfo:{},scriptStepInfo:{}})};t.findVariable=function(e,t){var a=(0,s.default)(e,(function(e){return e.name===t}));return a||new r.default({type:3})}},34394:function(e,t,a){"use strict";a(87147),a(13118),a(59241),a(20767);var i=a(70534);Object.defineProperty(t,"__esModule",{value:!0}),t.mergeList=t.diffVariableSimple=t.diffVariable=t.diffStepSimple=t.diffStep=t.composeList=void 0,a(41336),a(89336),a(94354),a(25910),a(77702),a(79951),a(45680);var s=i(a(17434)),n=i(a(68203)),r=i(a(25190)),l=i(a(41844)),o=i(a(87614));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){(0,n.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=function(e,t){return"".concat(e.realId)==="".concat(t.realId)},u=function(e,t,a){for(var i=[];t<=a;)i.push(e[t].realId),t++;return i},p=function e(t,a){if((0,o.default)(t)){if(t.length!==a.length)return!1;for(var i=0;i<t.length;i++)if(!e(t[i],a[i]))return!1;return!0}if("[object Object]"===Object.prototype.toString.call(t)&&"[object Object]"===Object.prototype.toString.call(a)){for(var s in t)if("id"!==s&&!e(t[s],a[s]))return!1;return!0}return t===a},v=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={},s=a.length>0?a:Object.keys(e),n=0;n<s.length;n++){var r=s[n];i[r]=p(e[r],t[r])?"":"changed"}return Object.freeze(i)},h=function(e,t){return v(e,t,["name","type","defaultValue","defaultTargetValue","description","changeable","required"])},_=function(e,t){var a=v(e,t,["name","type"]),i={};switch(e.type){case 1:i=v(e.scriptStepInfo,t.scriptStepInfo);break;case 2:i=v(e.fileStepInfo,t.fileStepInfo);break;case 3:i=v(e.approvalStepInfo,t.approvalStepInfo);break;default:i={}}return f(f({},a),i)},m=function(e){for(var t={},a=0;a<e.length;a++)t[e[a].realId]=e[a];return t},b=function(e){return"".concat(e.realId)},y=function(e,t){return(0,l.default)(e,(function(e){return e.realId===t.realId}))};t.mergeList=function(e,t){for(var a={},i=[],s=0;s<e.length;s++){var n=e[s];a[n.realId]=1,i.push(n)}for(var r=0;r<t.length;r++){var l=t[r];a[l.realId]||i.push(l)}return i};t.diffStepSimple=function(e,t){e=(0,r.default)(e),t=(0,r.default)(t);for(var a=0,i=e.length-1,s=0,n=t.length-1,l=[],o={};a<=i;){s=0;var c=e[a],f=y(t,c);if(++a,f<0)l.push(c),o[c.id]={type:"new"};else{for(;s<=f;){var d=t[s];++s,y(e,d)>-1||(o[d.id]||(l.push(d),o[d.id]={type:"delete"}))}var u=f-(l.push(c)-0)+1;if(0===u){var p=_(c,t[f]);""!==Object.values(p).join("")?o[c.id]={type:"different"}:o[c.id]={type:"same"}}else o[c.id]={type:"move",value:u}}}for(s=0;s<=n;){var v=t[s];++s,y(l,v)<0&&(l.push(v),o[v.id]={type:"delete"})}return[l,o]};t.diffVariableSimple=function(e,t){e=(0,r.default)(e),t=(0,r.default)(t);for(var a=0,i=e.length-1,n=e,o=(0,s.default)(n,1)[0],c=e[i],f=0,p=t.length-1,v=t,_=(0,s.default)(v,1)[0],m=t[p],b=function(e){return"".concat(e.realId)},y=function(e,t){var a=h(e,t);return""===Object.values(a).join("")?{type:"same"}:{type:"different"}},g={},C=function(e){return e.realId===_.realId};a<=i&&f<=p;)if(d(o,_))g[b(o)]=y(o,_),o=e[++a],_=t[++f];else if(d(c,m))g[b(c)]=y(c,m),c=e[--i],m=t[--p];else if(d(o,m))g[b(o)]=y(o,m),o=e[++a],m=t[--p];else if(d(c,_))g[b(c)]=y(c,_),c=e[--c],_=t[++f];else{if(u(e,a,i).includes(_.realId)){var S=(0,l.default)(e,C);g[b(_)]=y(e[S],_),e.splice(S,1),--i}else g[b(_)]={type:"delete"};_=t[++f]}for(;a<=i;){var I=e[a];++a,I&&(g[b(I)]={type:"new"})}for(;f<=p;){var w=t[f];++f,w&&(g[b(w)]={type:"delete"})}return g};t.composeList=function(e,t){for(var a=e.length,i=t.length,s=[],n=[],r=m(e),l=m(t),o=0,c=0;o<a&&c<i;){var f=e[o],d=t[c];d.realId===f.realId?(n.push(d),s.push(f),delete r[f.realId],delete l[d.realId]):(r[f.realId]&&(s.push(f),l[f.realId]?(n.push(l[f.realId]),delete l[f.realId]):n.push(""),delete r[f.realId]),l[d.realId]&&(n.push(d),r[d.realId]?(s.push(r[d.realId]),delete r[d.realId]):s.push(l[d.realId]),delete l[d.realId])),o++,c++}for(;c<i;){var u=t[c];l[u.realId]&&(n.push(u),s.push(u)),c++}for(;o<a;){var p=e[o];r[p.realId]&&(n.push(""),s.push(p)),o++}return[s,n]};var g=function(e,t,a){e=[...e],t=[...t];for(var i=0,n=e.length-1,r=e,o=(0,s.default)(r,1)[0],c=e[n],f=0,p=t.length-1,v=t,h=(0,s.default)(v,1)[0],_=t[p],m={},y=function(e){return e.realId===h.realId};i<=n&&f<=p;)if(d(o,h))m[b(o)]={type:"different",value:a(o,h)},o=e[++i],h=t[++f];else if(d(c,_))m[b(c)]={type:"different",value:a(c,_)},c=e[--n],_=t[--p];else if(d(o,_))m[b(o)]={type:"different",value:a(o,_)},o=e[++i],_=t[--p];else if(d(c,h))m[b(c)]={type:"different",value:a(c,h)},c=e[--n],h=t[++f];else{if(u(e,i,n).includes(h.realId)){var g=(0,l.default)(e,y);m[b(e[g])]={type:"different",value:a(e[g],h)},e.splice(g,1),--n}else m[b(h)]={type:"delete"};h=t[++f]}for(;i<=n;){var C=e[i];++i,C&&(m[b(C)]={type:"new"})}for(;f<=p;){var S=t[f];++f,S&&(m[b(S)]={type:"delete"})}return m};t.diffVariable=function(e,t){return g(e,t,h)};t.diffStep=function(e,t){return g(e,t,_)}},4842:function(){},78315:function(){},19250:function(){},14542:function(){},88932:function(){},40365:function(){},85884:function(){},98807:function(){},66368:function(){},93344:function(){},81682:function(){},2401:function(){},48092:function(){},27278:function(){},6623:function(){},11046:function(){},93192:function(){},8634:function(){},17609:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading }"}],staticClass:"job-detail",class:{"is-loading":e.isLoading}},[a("bk-alert",{attrs:{title:"同步执行方案需要重新确认定时任务的全局变量，不使用的定时任务可以直接停用。"}}),e._v(" "),a("div",{staticClass:"title"},[a("span",[e._v("「"+e._s(e.info.name)+"」"+e._s("的全局变量"))]),e._v(" "),e.data.enable?e.data.hasConfirm?a("span",{staticClass:"confirm"},[e._v(e._s("已确认"))]):a("span",{staticClass:"waiting"},[e._v(e._s("待确认"))]):a("span",{staticClass:"disable"},[e._v(e._s("已停用"))])]),e._v(" "),e.isLoading?e._e():a("div",[e.isEmpty?a("empty",[a("p",[e._v(e._s("无关联的全局变量"))]),e._v(" "),a("p",{staticStyle:{"margin-top":"8px"}},[e._v(e._s("已直接确认"))])]):a("global-variable-layout",[a("div",e._l(e.info.variableValue,(function(t){return a("global-variable",{key:t.id,ref:"variable",refInFor:!0,attrs:{type:t.type,readonly:e.readonly,data:t}})})),1),e._v(" "),a("div",{staticClass:"global-variable-action"},[a("div",{staticClass:"variable-name"},[a("span")]),e._v(" "),a("div",{staticClass:"variable-value"},[e.isEditing?[a("bk-button",{staticClass:"job-button",attrs:{theme:"primary"},on:{click:e.handleSubmit}},[e._v("\n                            "+e._s("确认")+"\n                        ")]),e._v(" "),a("bk-button",{staticClass:"job-button",on:{click:e.handleReset}},[e._v("\n                            "+e._s("重置")+"\n                        ")])]:a("bk-button",{staticClass:"job-button",attrs:{theme:"primary"},on:{click:e.handleToggleEdit}},[e._v("\n                        "+e._s("编辑")+"\n                    ")])],2)])])],1)],1)};i._withStripped=!0;var s=a(85117),n=s.Z,r=(a(14861),(0,a(51900).Z)(n,i,[],!1,null,"3de37a30",null));r.options.__file="src/views/task-manage/sync-plan/components/crontab-detail.vue";var l=r.exports},12435:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sync-plan-ip-detail"},[e.variableName?a("div",{staticClass:"sync-plan-step-variable",on:{click:e.handlerView}},[a("div",{staticClass:"variable-flag"},[a("Icon",{attrs:{type:"host"}})],1),e._v(" "),a("div",{staticClass:"variable-name",attrs:{"tippy-tips":e.variableName}},[e._v(e._s(e.variableName))])]):a("div",{directives:[{name:"bk-overflow-tips",rawName:"v-bk-overflow-tips"}],staticClass:"ip-text"},[e._v(e._s(e.ipText))]),e._v(" "),e.isNotEmpty?a("Icon",{staticClass:"look-ip-detail",attrs:{type:"audit"},on:{click:e.handlerView}}):e._e(),e._v(" "),a("jb-dialog",{staticClass:"sync-ip-detail-dialog",attrs:{width:1020,"ok-text":"关闭"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v(e._s("执行目标"))]),e._v(" "),a("div",{staticClass:"display-diff"},[e.diffEnable?[a("bk-switcher",{attrs:{value:e.isShowDiff,theme:"primary",size:"large"},on:{change:e.handleToggleDiff}})]:[a("bk-switcher",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:"无差异",expression:"'无差异'"}],attrs:{value:!1,disabled:"",theme:"primary",size:"large"}})],e._v("\n                "+e._s("显示差异")+"\n            ")],2)]},proxy:!0}]),model:{value:e.isShowDetail,callback:function(t){e.isShowDetail=t},expression:"isShowDetail"}},[e._v(" "),a("div",{staticClass:"content-wraper"},[a("scroll-faker",[a("server-panel",{attrs:{"detail-mode":"dialog","host-node-info":e.hostNodeInfo,"node-diff":e.nodeDiff,"host-diff":e.hostDiff,"group-diff":e.groupDiff}})],1)],1)])],1)};i._withStripped=!0;var s=a(17001),n=s.Z,r=(a(86423),a(33306),(0,a(51900).Z)(n,i,[],!1,null,"21fe3c58",null));r.options.__file="src/views/task-manage/sync-plan/components/diff/common/ip-detail.vue";var l=r.exports},87307:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"diff-global-variable",class:e.classes,attrs:{id:e.type+"_variable_"+e.data.id+"_"+e.data.name}},[a("div",{staticClass:"name"},[a("div",{staticClass:"type-flag"},[a("Icon",{attrs:{type:e.data.icon}})],1),e._v(" "),a("span",[e._v(e._s(e.data.name))])]),e._v(" "),a("div",{staticClass:"info"},[a("div",{class:e.diffValue.type},[a("span",{staticClass:"label"},[e._v(e._s("变量类型："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.typeText))])]),e._v(" "),a("div",{class:e.diffValue.name},[a("span",{staticClass:"label"},[e._v(e._s("变量名称："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.name))])]),e._v(" "),e.data.isHost?[a("div",{class:e.diffValue.defaultTargetValue},[a("span",{staticClass:"label"},[e._v(e._s("变量值："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.valueText))]),e._v(" "),a("host-detail",{staticClass:"host-value-detail",attrs:{"diff-enable":"changed"===e.diffValue.defaultTargetValue,data:e.data.defaultTargetValue,name:e.data.name}})],1)]:[a("div",{class:e.diffValue.defaultValue},[a("span",{staticClass:"label"},[e._v(e._s("变量值："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.valueText))])])],e._v(" "),a("div",{class:e.diffValue.description},[a("span",{staticClass:"label"},[e._v(e._s("变量描述："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.description||"-"))])]),e._v(" "),a("div",{class:e.diffValue.changeable},[a("span",{staticClass:"label"},[e._v(e._s("赋值可变："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.changeableText))])]),e._v(" "),a("div",{class:e.diffValue.required},[a("span",{staticClass:"label"},[e._v(e._s("必填："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.requiredText))])])],2)])};i._withStripped=!0;var s=a(98909),n=s.Z,r=(a(71776),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/diff/global-variable.vue";var l=r.exports},53095:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-view-global-variable",on:{click:e.handlerView}},[a("Icon",{staticClass:"type-flag",attrs:{type:"audit"}}),e._v(" "),a("jb-dialog",{staticClass:"host-variable-detail-dialog",attrs:{title:e.title,width:1020,"ok-text":"关闭"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",[e._v(e._s(e.title))]),e._v(" "),a("div",{staticClass:"display-diff"},[e.diffEnable?[a("bk-switcher",{attrs:{value:e.isShowDiff,theme:"primary",size:"large"},on:{change:e.handleToggleDiff}})]:[a("bk-switcher",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:"无差异",expression:"'无差异'"}],attrs:{value:!1,disabled:"",theme:"primary",size:"large"}})],e._v("\n                "+e._s("显示差异")+"\n            ")],2)]},proxy:!0}]),model:{value:e.isShowDetail,callback:function(t){e.isShowDetail=t},expression:"isShowDetail"}},[e._v(" "),a("div",{staticClass:"content-wraper"},[a("scroll-faker",[a("server-panel",{attrs:{"detail-mode":"dialog","host-node-info":e.hostNodeInfo,"node-diff":e.nodeDiff,"host-diff":e.hostDiff,"group-diff":e.groupDiff}})],1)],1)])],1)};i._withStripped=!0;var s=a(39098),n=s.Z,r=(a(4497),a(83606),(0,a(51900).Z)(n,i,[],!1,null,"743fa1e5",null));r.options.__file="src/views/task-manage/sync-plan/components/diff/host-detail.vue";var l=r.exports},68483:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row",class:e.diff.approvalUser},[a("div",{staticClass:"label"},[e._v(e._s("确认人："))]),e._v(" "),a("div",{staticClass:"value"},[a("div",{staticClass:"approval-wraper"},[e._l(e.renderRoleList,(function(t){return a("div",{key:t,staticClass:"item"},[a("Icon",{staticClass:"approval-flag",attrs:{type:"user-group-gray"}}),e._v("\n                    "+e._s(t)+"\n                ")],1)})),e._v(" "),e._l(e.data.approvalUser.userList,(function(t){return a("div",{key:t,staticClass:"item"},[a("Icon",{staticClass:"approval-flag",attrs:{type:"user"}}),e._v("\n                    "+e._s(t)+"\n                ")],1)}))],2)])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.notifyChannel},[a("div",{staticClass:"label"},[e._v(e._s("通知方式："))]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.renderChannel))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.approvalMessage},[a("div",{staticClass:"label"},[e._v(e._s("确认描述："))]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(e.data.approvalMessage||"-"))])])])};i._withStripped=!0;var s=a(50837),n=s.Z,r=(a(15367),(0,a(51900).Z)(n,i,[],!1,null,"d0a7a542",null));r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/approval.vue";var l=r.exports},88760:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("ip-detail",{attrs:{"pre-host":e.preHost,"last-host":e.lastHost}})};i._withStripped=!0;var s=a(72232),n=s.Z,r=(0,a(51900).Z)(n,i,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/file-execute-target.vue";var l=r.exports},85307:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("ip-detail",{attrs:{"pre-host":e.realPreHost,"last-host":e.realLastHost}})};i._withStripped=!0;var s=a(41982),n=s.Z,r=(0,a(51900).Z)(n,i,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/file-source-server.vue";var l=r.exports},9915:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sync-step-server-file"},[e.isShowLocalFile||e.isShowServerFile?a("bk-collapse",{staticClass:"host-detail",attrs:{value:e.activeResult}},[e.isShowLocalFile?a("jb-collapse-item",{attrs:{name:"local",active:e.activeResult},scopedSlots:e._u([{key:"content",fn:function(){return[a("table",{staticClass:"file-table"},[a("tbody",e._l(e.localFileList,(function(t,i){return a("tr",{key:i,class:e.localFileDiff[t.realId]},[a("td",[a("div",{directives:[{name:"bk-overflow-tips",rawName:"v-bk-overflow-tips"}],staticClass:"file-path-text"},[e._v(e._s(t.fileLocationText))])]),e._v(" "),a("td",[e._v(e._s(t.fileSizeText))])])})),0)])]},proxy:!0}],null,!1,3095449856)},[a("span",{staticClass:"collapse-title"},[e._v(e._s("已选择")),a("span",{staticClass:"number"},[e._v(e._s(e.localFileCount))]),e._v(e._s("个本地文件"))])]):e._e(),e._v(" "),e.isShowServerFile?a("jb-collapse-item",{attrs:{name:"server",active:e.activeResult},scopedSlots:e._u([{key:"content",fn:function(){return[a("table",{staticClass:"file-table"},[a("thead",[a("th",[e._v(e._s("文件路径"))]),e._v(" "),a("th",[e._v(e._s("服务器列表"))]),e._v(" "),a("th",[e._v(e._s("服务器账号"))])]),e._v(" "),a("tbody",e._l(e.serverFileList,(function(t,i){return a("tr",{key:i,class:e.checkRowClass(t)},[a("td",[a("div",{directives:[{name:"bk-tooltips",rawName:"v-bk-tooltips",value:t.fileLocationText,expression:"row.fileLocationText"}],staticClass:"file-path-text"},[e._v(e._s(t.fileLocationText))])]),e._v(" "),a("td",{class:e.checkDiffClass(t,"host")},[a("file-source-server",{attrs:{"pre-host":e.preServerList[i].host,"last-host":e.lastServerList[i].host}})],1),e._v(" "),a("td",{class:e.checkDiffClass(t,"account")},[e._v("\n                                "+e._s(e.generatorAccountAlias(t.account))+"\n                            ")])])})),0)])]},proxy:!0}],null,!1,3622149795)},[a("span",{staticClass:"collapse-title"},[e._v(e._s("已选择")),a("span",{staticClass:"number"},[e._v(e._s(e.serverFileCount))]),e._v(e._s("个服务器文件"))])]):e._e()],1):e._e()],1)};i._withStripped=!0;var s=a(95553),n=s.Z,r=(a(66499),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/file-source.vue";var l=r.exports},33369:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sync-plan-script-content"},[a("span",{staticClass:"sript-content-text"},[e._v(e._s("查看脚本"))]),e._v(" "),a("Icon",{staticClass:"script-content-detail",attrs:{type:"audit"},on:{click:e.handleView}}),e._v(" "),e.isShowContent?a("div",{ref:"dialog",staticClass:"script-diff-dialog",style:e.dialogStyles},[a("div",{staticClass:"content-title"},[a("div",{staticClass:"content-old"},[e._v(e._s("同步前"))]),e._v(" "),a("div",{staticClass:"content-new"},[e._v(e._s("同步后"))])]),e._v(" "),a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading }"}],staticClass:"content-wraper"},[a("scroll-faker",[a("jb-diff",{attrs:{"old-content":e.oldCode,"new-content":e.newCode,format:"side-by-side",context:1/0,theme:"dark"}})],1)],1),e._v(" "),a("Icon",{staticClass:"content-close",attrs:{type:"close"},on:{click:e.handleClose}})],1):e._e()],1)};i._withStripped=!0;var s=a(12966),n=s.Z,r=(a(20288),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/script-content.vue";var l=r.exports},67822:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("ip-detail",{attrs:{"pre-host":e.preHost,"last-host":e.lastHost}})};i._withStripped=!0;var s=a(42382),n=s.Z,r=(0,a(51900).Z)(n,i,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/components/script-execute-target.vue";var l=r.exports},95591:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row",class:e.diff.timeout},[a("span",{staticClass:"label"},[e._v(e._s("超时时长："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.timeout)+"(s)")])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.ignoreError},[a("span",{staticClass:"label"},[e._v(e._s("错误处理："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.ignoreErrorText))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.uploadSpeedLimit},[a("span",{staticClass:"label"},[e._v(e._s("上传限速："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.uploadSpeedLimitText))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.downloadSpeedLimit},[a("span",{staticClass:"label"},[e._v(e._s("下载限速："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.downloadSpeedLimitText))])]),e._v(" "),a("div",[a("p",{staticClass:"label"},[e._v(e._s("文件来源："))]),e._v(" "),a("file-source",{attrs:{account:e.account,id:e.id,data:e.data.originFileList}})],1),e._v(" "),a("div",{staticClass:"row",class:e.diff.destinationFileLocation},[a("span",{staticClass:"label"},[e._v(e._s("目标路径："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.destinationFileLocation))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.transferMode},[a("span",{staticClass:"label"},[e._v(e._s("传输模式："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.transferModeText))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.executeAccount},[a("span",{staticClass:"label"},[e._v(e._s("执行帐号："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.findName(e.data.executeAccount)))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.destination},[a("span",{staticClass:"label"},[e._v(e._s("执行目标："))]),e._v(" "),a("file-execute-target")],1)])};i._withStripped=!0;var s=a(86400),n=s.Z,r=(0,a(51900).Z)(n,i,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/file.vue";var l=r.exports},76010:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"diff-task-step",class:e.classes,attrs:{id:e.type+"_step_"+e.data.id}},[a("div",{staticClass:"name"},[a("div",{staticClass:"type-flag"},[a("Icon",{attrs:{type:e.data.icon}})],1),e._v("\n        "+e._s(e.data.name)+"\n    ")]),e._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"row",class:e.diffValue.type},[a("span",{staticClass:"label"},[e._v(e._s("步骤类型："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.typeText))])]),e._v(" "),a("div",{staticClass:"row",class:e.diffValue.name},[a("span",{staticClass:"label"},[e._v(e._s("步骤名称："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.name))])]),e._v(" "),a(e.infoCom,e._b({tag:"component",attrs:{id:e.data.realId,data:e.info,diff:e.diffValue}},"component",e.$attrs,!1))],1)])};i._withStripped=!0;var s=a(38644),n=s.Z,r=(a(92995),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/index.vue";var l=r.exports},46584:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"row",class:e.diff.scriptSourceText},[a("span",{staticClass:"label"},[e._v(e._s("脚本来源："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.scriptSourceText))])]),e._v(" "),a("div",{staticClass:"row",class:[e.diff.content,e.diff.scriptVersionId]},[a("span",{staticClass:"label"},[e._v(e._s("脚本内容："))]),e._v(" "),a("script-content")],1),e._v(" "),a("div",{staticClass:"row",class:e.diff.scriptParam},[a("span",{staticClass:"label"},[e._v(e._s("脚本参数："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.scriptParam||"-"))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.timeout},[a("span",{staticClass:"label"},[e._v(e._s("超时时长："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.timeout)+"(s)")])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.ignoreError},[a("span",{staticClass:"label"},[e._v(e._s("错误处理："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.data.ignoreErrorText))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.executeAccount},[a("span",{staticClass:"label"},[e._v(e._s("执行账号："))]),e._v(" "),a("span",{staticClass:"value"},[e._v(e._s(e.findName(e.data.executeAccount)||"-"))])]),e._v(" "),a("div",{staticClass:"row",class:e.diff.executeTarget},[a("span",{staticClass:"label"},[e._v(e._s("执行目标："))]),e._v(" "),a("script-execute-target")],1)])};i._withStripped=!0;var s=a(41012),n=s.Z,r=(0,a(51900).Z)(n,i,[],!1,null,null,null);r.options.__file="src/views/task-manage/sync-plan/components/diff/task-step/script.vue";var l=r.exports},86080:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.loading},expression:"{ isLoading: loading }"}],staticClass:"sync-plan-layout"},[a("div",{staticClass:"wraper",class:{loading:e.loading}},[e.empty?a("Empty",{staticClass:"layout-empty"},[a("div",{staticClass:"empty-text"},[e._v(e._s("暂无关联的定时任务"))]),e._v(" "),a("div",[e._t("empty")],2)]):[e._t("default")],e._v(" "),a("div",{staticClass:"layout-footer"},[e._t("footer")],2)],2)])};i._withStripped=!0;var s=a(16036),n=s.Z,r=(a(53966),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/layout.vue";var l=r.exports},88536:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sync-plan-side-anchor"},[a("scroll-faker",{ref:"scroll"},[a("div",{ref:"anchor",staticClass:"anchor-wraper"},[a("div",{staticClass:"item-title"},[e._v(e._s("全局变量"))]),e._v(" "),e._l(e.variable,(function(t){return a("div",{key:"variable_"+t.id+"_"+t.name,staticClass:"item",class:{active:e.active==="variable_"+t.id+"_"+t.name},attrs:{"data-anchor":"variable_"+t.id+"_"+t.name},on:{mouseenter:function(a){return e.handleShowTips(t.name,"variable_"+t.id+"_"+t.name)},mouseleave:function(t){return e.handleShowTips("","")},click:function(a){return e.handleChoose("variable_"+t.id+"_"+t.name)}}},[a("div",{staticClass:"anchor-text"},[e._v(e._s(t.name))])])})),e._v(" "),a("div",{staticClass:"item-title"},[e._v(e._s("作业步骤"))]),e._v(" "),e._l(e.step,(function(t){return a("div",{key:"step_"+t.id,staticClass:"item",class:{active:e.active==="step_"+t.id},attrs:{"data-anchor":"step_"+t.id},on:{mouseenter:function(a){return e.handleShowTips(t.name,"step_"+t.id)},mouseleave:function(t){return e.handleShowTips("","")},click:function(a){return e.handleChoose("step_"+t.id)}}},[a("div",{staticClass:"anchor-text"},[e._v(e._s(t.name))])])}))],2),e._v(" "),e.tips.name?a("tips",{key:e.tips.name,attrs:{data:e.tips}}):e._e()],1)],1)};i._withStripped=!0;var s=a(27093),n=s.Z,r=(a(54583),(0,a(51900).Z)(n,i,[],!1,null,"6e674925",null));r.options.__file="src/views/task-manage/sync-plan/components/side-anchor/index.vue";var l=r.exports},59823:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"tips",staticClass:"sync-plan-side-anchor-tips",style:e.styles},[a("div",{ref:"content",staticClass:"wraper"},[e._v("\n        "+e._s(e.data.name)+"\n    ")])])};i._withStripped=!0;var s=a(76773),n=s.Z,r=(a(39123),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/components/side-anchor/tips.vue";var l=r.exports},13162:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"bkloading",rawName:"v-bkloading",value:{isLoading:e.isLoading},expression:"{ isLoading }"}],staticClass:"do-sync-plan"},[a("div",{staticClass:"sync-plan-step"},[a("bk-steps",{staticClass:"step-process",attrs:{steps:e.stepList,"cur-step":e.curStep},on:{"update:curStep":function(t){e.curStep=t},"update:cur-step":function(t){e.curStep=t}}})],1),e._v(" "),a("div",{staticClass:"step-wraper"},[e.isLoading?e._e():a(e.stepCom,{tag:"component",attrs:{"template-info":e.templateInfo,"plan-info":e.planInfo},on:{"on-change":e.handleStepChange,"on-cancel":e.handleCancel}})],1)])};i._withStripped=!0;var s=a(61524),n=s.Z,r=(a(40601),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/index.vue";var l=r.exports},67471:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("layout",{scopedSlots:e._u([{key:"footer",fn:function(){return[a("bk-button",{on:{click:e.handleCancel}},[e._v("\n            "+e._s("取消")+"\n        ")]),e._v(" "),a("bk-button",{staticClass:"w120",attrs:{theme:"primary"},on:{click:e.handleNext}},[e._v("\n            "+e._s("下一步")+"\n        ")])]},proxy:!0}])},[a("div",{staticClass:"sync-plan-step1"},[a("detail-layout",[a("detail-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:"全局变量"}},[a("render-global-var",{attrs:{list:e.templateVariableList,mode:"diff","default-field":"变量值",diff:e.variableDiff}})],1),e._v(" "),a("detail-item",{attrs:{label:"执行步骤"}},[a("render-task-step",{attrs:{list:e.templateStepList,mode:"diff",diff:e.stepDiff}})],1)],1)],1)])};i._withStripped=!0;var s=a(20262),n=s.Z,r=(a(85055),a(2573),(0,a(51900).Z)(n,i,[],!1,null,"24a1c54c",null));r.options.__file="src/views/task-manage/sync-plan/pages/step1.vue";var l=r.exports},89867:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("layout",{staticClass:"sync-step2",scopedSlots:e._u([{key:"footer",fn:function(){return[a("bk-button",{on:{click:e.handleCancel}},[e._v(e._s("取消"))]),e._v(" "),a("bk-button",{on:{click:e.handleLast}},[e._v(e._s("上一步"))]),e._v(" "),e.isView?e._e():a("bk-button",{staticClass:"w120",attrs:{theme:"primary"},on:{click:e.handleNext}},[e._v("\n            "+e._s("下一步")+"\n        ")])]},proxy:!0}])},[a("div",{staticClass:"container"},[a("div",{staticClass:"sync-wraper"},[a("div",{staticClass:"sync-layout sync-header"},[a("div",{staticClass:"sync-before"},[a("div",{staticClass:"title"},[e._v(e._s("同步前"))])]),e._v(" "),a("div",{staticClass:"sync-after"},[a("div",{staticClass:"title"},[e._v(e._s("同步后"))])])]),e._v(" "),a("div",{staticClass:"sync-content"},[a("scroll-faker",{attrs:{id:"asynContent"}},[a("div",{staticClass:"sync-layout"},[a("div",{staticClass:"sync-before block-title"},[e._v("\n                            "+e._s("全局变量")+"\n                            "),a("span",{staticClass:"global-variable-tips"},[e._v(e._s("全局变量的 “初始值” 不会被同步到执行方案"))])]),e._v(" "),a("div",{staticClass:"sync-after block-title"},[e._v("\n                            "+e._s("全局变量")+"\n                            "),a("span",{staticClass:"global-variable-tips"},[e._v(e._s("全局变量的 “初始值” 不会被同步到执行方案"))])])]),e._v(" "),e._l(e.templateVariableList.length,(function(t){return[a("div",{key:"variable"+t,staticClass:"sync-layout"},[a("div",{staticClass:"sync-before"},[e.planVariableList[t-1]?a("diff-global-variable",{attrs:{data:e.planVariableList[t-1],diff:e.beforeVariableDiff}}):e._e()],1),e._v(" "),a("div",{staticClass:"sync-after"},[e.templateVariableList[t-1]?a("diff-global-variable",{attrs:{data:e.templateVariableList[t-1],diff:e.variableDiff,type:"sync-after"}}):e._e()],1)])]})),e._v(" "),a("div",{staticClass:"sync-layout"},[a("div",{staticClass:"sync-before block-title"},[e._v(e._s("作业步骤"))]),e._v(" "),a("div",{staticClass:"sync-after block-title"},[e._v(e._s("作业步骤"))])]),e._v(" "),e._l(e.templateStepList.length,(function(t){return[a("div",{key:"step"+t,staticClass:"sync-layout"},[a("div",{staticClass:"sync-before"},[e.planStepList[t-1]?a("diff-task-step",{attrs:{type:"sync-before",data:e.planStepList[t-1],account:e.accountList,diff:e.beforeStepDiff}}):e._e()],1),e._v(" "),a("div",{staticClass:"sync-after"},[e.templateStepList[t-1]?a("diff-task-step",{attrs:{type:"sync-after",data:e.templateStepList[t-1],account:e.accountList,diff:e.stepDiff}}):e._e()],1)])]}))],2)],1)]),e._v(" "),a("side-anchor",{staticClass:"side-anchor",attrs:{variable:e.templateVariableList,step:e.templateStepList}})],1)])};i._withStripped=!0;var s=a(88289),n=s.Z,r=(a(97881),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/pages/step2.vue";var l=r.exports},76858:function(e,t,a){"use strict";a.r(t),a.d(t,{__esModule:function(){return s.X},default:function(){return l}});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("layout",{staticClass:"sync-plan-step3",attrs:{empty:e.isEmpty,loading:e.isLoading},scopedSlots:e._u([{key:"footer",fn:function(){return[a("bk-button",{on:{click:e.handleCancel}},[e._v(e._s("取消"))]),e._v(" "),a("bk-button",{on:{click:e.handleLast}},[e._v(e._s("上一步"))]),e._v(" "),a("jb-popover-confirm",{attrs:{title:"是否确认同步？",content:"关联定时任务的调整将立即生效","confirm-handler":e.handleSubmit}},[a("bk-button",{staticClass:"w120",attrs:{theme:"primary"}},[e._v("\n                "+e._s("立即同步")+"\n            ")])],1)]},proxy:!0}])},[a("div",{staticClass:"layout-wraper"},[a("div",{staticClass:"layout-left"},[a("scroll-faker",e._l(e.timeTaskList,(function(t){return a("div",{key:t.id,staticClass:"job-tab",class:{active:t.id===e.currentTaskId},on:{click:function(a){return e.handleTabChange(t.id)}}},[a("span",{staticClass:"job-name"},[e._v(e._s(t.name))]),e._v(" "),t.hasConfirm?a("Icon",{staticClass:"job-check",attrs:{type:"check"}}):e._e(),e._v(" "),a("div",{on:{click:function(e){e.stopPropagation()}}},[a("bk-switcher",{staticClass:"job-switch",attrs:{value:t.enable,size:"small",theme:"primary"},on:{change:function(a){return e.handleEnableChange(t.id,a)}}})],1)],1)})),0)],1),e._v(" "),a("div",{staticClass:"layout-right"},[a("scroll-faker",[a("crontab-detail",{key:e.detailInfo.id,attrs:{data:e.detailInfo,"variable-list":e.templateVariableList},on:{"on-change":e.handleVariableChange,"on-update-confirm":e.handleUpdateConfirm}})],1)],1)])])};i._withStripped=!0;var s=a(3595),n=s.Z,r=(a(74603),(0,a(51900).Z)(n,i,[],!1,null,null,null));r.options.__file="src/views/task-manage/sync-plan/pages/step3.vue";var l=r.exports},14861:function(e,t,a){var i=a(4842);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("77d9ec54",i,!1,{})},86423:function(e,t,a){var i=a(78315);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("6789d511",i,!1,{})},33306:function(e,t,a){var i=a(19250);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("ce939ed0",i,!1,{})},71776:function(e,t,a){var i=a(14542);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("422f1870",i,!1,{})},4497:function(e,t,a){var i=a(88932);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("1d7e01f0",i,!1,{})},83606:function(e,t,a){var i=a(40365);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("ae9cd1b0",i,!1,{})},15367:function(e,t,a){var i=a(85884);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("0546b58e",i,!1,{})},66499:function(e,t,a){var i=a(98807);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("09f0991a",i,!1,{})},20288:function(e,t,a){var i=a(66368);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("ffde27d8",i,!1,{})},92995:function(e,t,a){var i=a(93344);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("27ceca0e",i,!1,{})},53966:function(e,t,a){var i=a(81682);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("34996727",i,!1,{})},54583:function(e,t,a){var i=a(2401);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("7ffdc3b7",i,!1,{})},39123:function(e,t,a){var i=a(48092);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("30c77364",i,!1,{})},40601:function(e,t,a){var i=a(27278);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("b0f0c07e",i,!1,{})},85055:function(e,t,a){var i=a(6623);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("7821ee6f",i,!1,{})},2573:function(e,t,a){var i=a(11046);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("9181cfac",i,!1,{})},97881:function(e,t,a){var i=a(93192);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("58b1cdcf",i,!1,{})},74603:function(e,t,a){var i=a(8634);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);(0,a(18086).Z)("3941ad2f",i,!1,{})}}]);