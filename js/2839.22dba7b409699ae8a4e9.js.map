{"version":3,"file":"js/2839.22dba7b409699ae8a4e9.js","mappings":"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","sources":["webpack://job/src/views/script-manage/sync-task/components/script-detail.vue","webpack://job/src/views/script-manage/sync-confirm/index.vue","webpack://job/./src/views/script-manage/sync-confirm/components/script-detail.vue?1150","webpack://job/./src/views/script-manage/sync-confirm/components/script-detail.vue?1557","webpack://job/./src/views/script-manage/sync-confirm/components/script-detail.vue","webpack://job/./src/views/script-manage/sync-confirm/index.vue?e39a","webpack://job/./src/views/script-manage/sync-confirm/index.vue?b99f","webpack://job/./src/views/script-manage/sync-confirm/index.vue?1b01","webpack://job/./src/views/script-manage/sync-confirm/components/script-detail.vue?3176","webpack://job/./src/views/script-manage/sync-confirm/index.vue?ed97"],"sourcesContent":["<template>\n    <jb-sideslider\n        :is-show=\"isShow\"\n        :show-footer=\"false\"\n        @update:isShow=\"handleCancel\"\n        :quick-close=\"true\"\n        :width=\"900\"\n        :title=\"'查看脚本'\">\n        <div v-if=\"isShow\" v-bkloading=\"{ isLoading }\">\n            <script-detail v-if=\"!isLoading\" :script-info=\"scriptInfo\" :offset-bottom=\"0\" />\n        </div>\n    </jb-sideslider>\n</template>\n<script>\n    import ScriptService from '@service/script-manage';\n    import PublicScriptService from '@service/public-script-manage';\n    import {\n        checkPublicScript,\n    } from '@utils/assist';\n    import ScriptDetail from '../../common/detail';\n\n    export default {\n        name: '',\n        components: {\n            ScriptDetail,\n        },\n        props: {\n            isShow: {\n                type: Boolean,\n                default: false,\n            },\n            scriptVersionId: {\n                type: Number,\n                required: true,\n            },\n        },\n        data () {\n            return {\n                isLoading: false,\n                scriptInfo: {},\n            };\n        },\n        watch: {\n            isShow (isShow) {\n                if (isShow && this.scriptVersionId > 0) {\n                    this.fetchScriptDetail();\n                }\n            },\n        },\n        created () {\n            this.publicScript = checkPublicScript(this.$route);\n            this.serviceHandler = this.publicScript ? PublicScriptService : ScriptService;\n        },\n        methods: {\n            fetchScriptDetail () {\n                this.isLoading = true;\n                this.serviceHandler.versionDetail({\n                    id: this.scriptVersionId,\n                }).then((data) => {\n                    this.scriptInfo = Object.freeze(data);\n                })\n                    .finally(() => {\n                        this.isLoading = false;\n                    });\n            },\n            handleCancel () {\n                this.$emit('update:isShow', false);\n            },\n        },\n    };\n</script>\n<style lang='postcss' scoped>\n    %tab-item {\n        display: flex;\n        align-items: center;\n        height: 43px;\n        padding-left: 20px;\n        font-size: 12px;\n    }\n\n    .script-detail {\n        position: relative;\n\n        .detail-layout {\n            margin-bottom: 20px;\n\n            .script-detail-version {\n                font-size: 18px;\n                color: #000;\n            }\n\n            .script-detail-status {\n                width: 46px;\n                height: 16px;\n                padding: 0 5px;\n                margin-right: 10px;\n                margin-left: 8px;\n                font-size: 12px;\n                text-align: center;\n            }\n\n            .status-online {\n                color: #45c272;\n                background-color: #e5f6ea;\n            }\n\n            .status-disabled {\n                color: #9fa2ac;\n                background: #f0f1f5;\n            }\n\n            .detail-item {\n                margin-top: 10px;\n                margin-bottom: 0;\n            }\n        }\n\n        .render-script-version {\n            display: flex;\n            margin-bottom: 60px;\n        }\n\n        .version-tab {\n            display: flex;\n            flex-direction: column;\n            flex: 0 0 280px;\n            border: 1px solid #dcdee5;\n            user-select: none;\n\n            .version-tab-title {\n                @extend %tab-item;\n\n                color: #313238;\n                border-bottom: 1px solid #dcdee5;\n            }\n\n            .version-tab-item {\n                @extend %tab-item;\n\n                color: #63656e;\n                cursor: pointer;\n                background: #fff;\n                border-bottom: 1px solid #dcdee5;\n\n                &.active {\n                    color: #3a84ff;\n                    background: #f0f1f5 !important;\n\n                    .version-active {\n                        display: block;\n                    }\n                }\n\n                &:hover {\n                    background: #fafbfd;\n                }\n\n                .text {\n                    max-width: 150px;\n                    overflow: hidden;\n                    text-overflow: ellipsis;\n                    white-space: normal;\n                }\n\n                .online-flag {\n                    display: flex;\n                    width: 50px;\n                    height: 16px;\n                    margin-left: 8px;\n                    color: #fff;\n                    background: #ea3636;\n                    border-radius: 8px;\n                    align-items: center;\n                    justify-content: center;\n                }\n\n                .version-active {\n                    display: none;\n                    margin-right: 12px;\n                    margin-left: auto;\n                    font-size: 14px;\n                    color: #979ba5;\n                }\n            }\n        }\n\n        .version-content {\n            display: flex;\n            background-color: #f0f1f5;\n            border: 1px solid #dcdee5;\n            flex-direction: column;\n            flex: 1;\n\n            .content-tab {\n                display: flex;\n                border-bottom: 1px solid #dcdee5;\n            }\n\n            .content-tab-item {\n                @extend %tab-item;\n\n                padding-left: 0;\n                color: #313238;\n                cursor: pointer;\n                border-right: 1px solid #dcdee5;\n                flex: 0 0 120px;\n                align-items: center;\n                justify-content: center;\n\n                &.active {\n                    color: #3a84ff;\n                    background: #fff;\n                    border-top: 2px solid #3a84ff;\n                }\n            }\n\n            .content-dispaly {\n                min-height: 300px;\n                background: #fff;\n                flex: 1;\n            }\n        }\n\n        .render-version-log {\n            min-height: 480px;\n            padding: 12px 10px;\n            font-size: 12px;\n            line-height: 20px;\n            color: #63656e;\n            white-space: pre-line;\n        }\n\n        .action-btn {\n            width: 100px;\n            margin-right: 10px;\n        }\n    }\n</style>\n","<template>\n    <div class=\"script-manage-sync-confirm\" v-bkloading=\"{ isLoading }\">\n        <bk-input\n            class=\"search-input\"\n            :placeholder=\"'搜索作业模板'\"\n            :clearable=\"true\"\n            right-icon=\"bk-icon icon-search\"\n            @change=\"handleInputChange\"\n            v-model=\"value\" />\n        <div class=\"table-top\">\n            <span>{{ '同步作业模板' }}</span>\n            <span class=\"table-selected\"> ({{ '已选' }} {{ selectedList.length }}/{{ data.length }}个)</span>\n        </div>\n        <bk-table\n            :data=\"tableData\"\n            row-class-name=\"template-script-record\"\n            @selection-change=\"handleSelectionChange\">\n            <bk-table-column type=\"selection\" width=\"60\" />\n            <bk-table-column\n                :label=\"'作业模板名称'\"\n                prop=\"name\"\n                sortable>\n                <template slot-scope=\"{ row }\">\n                    <bk-button\n                        text\n                        class=\"job-template-name\"\n                        @click=\"handleGoTemplateDetail(row.templateId)\">\n                        {{ row.templateName }}\n                        <Icon type=\"edit\" class=\"template-link\" />\n                    </bk-button>\n                </template>\n            </bk-table-column>\n            <bk-table-column\n                :label=\"'步骤名称'\"\n                prop=\"stepName\" />\n            <bk-table-column\n                :label=\"'引用的版本号'\"\n                prop=\"version\">\n                <template slot-scope=\"{ row }\">\n                    <bk-button\n                        text\n                        @click=\"handleShowScriptDetail(row.scriptVersionId)\">\n                        {{ row.scriptVersion }}\n                    </bk-button>\n                </template>\n            </bk-table-column>\n            <bk-table-column\n                :label=\"'引用版本状态'\"\n                prop=\"status\"\n                :filters=\"statusFilters\"\n                :filter-method=\"statusFilterMethod\"\n                :filter-multiple=\"true\">\n                <template slot-scope=\"{ row }\">\n                    <span v-html=\"row.statusHtml\" />\n                </template>\n            </bk-table-column>\n            <bk-table-column\n                :label=\"'操作'\"\n                width=\"150\">\n                <template slot-scope=\"{ row }\">\n                    <bk-button\n                        text\n                        @click=\"handleComparison(row)\">\n                        {{ '版本对比' }}\n                    </bk-button>\n                </template>\n            </bk-table-column>\n        </bk-table>\n        <div class=\"footer-action\">\n            <bk-button\n                class=\"mr10\"\n                @click=\"handleCancel\">\n                {{ '取消' }}\n            </bk-button>\n            <bk-button\n                class=\"w120\"\n                theme=\"primary\"\n                \n                @click=\"handleSync\">\n                {{ '立即同步' }}\n            </bk-button>\n        </div>\n        <element-teleport v-if=\"lastVersionScriptInfo.version\">\n            <span> - {{ '同步至' }}</span>\n            <span>{{ lastVersionScriptInfo.version }}</span>\n        </element-teleport>\n        <script-detail\n            :is-show.sync=\"showSideslider\"\n            :script-version-id=\"selectScriptVersionId\" />\n        <jb-diff\n            v-if=\"showDiff\"\n            :title=\"'版本对比'\"\n            :data=\"diffList\"\n            :old-version-id=\"selectScriptVersionId\"\n            :new-version-id=\"lastVersionScriptInfo.scriptVersionId\"\n            @close=\"handleDiffClose\" />\n    </div>\n</template>\n<script>\n    import _ from 'lodash';\n       import ScriptService from '@service/script-manage';\n    import PublicScriptService from '@service/public-script-manage';\n    import { checkPublicScript } from '@utils/assist';\n    import JbDiff from '@components/jb-diff';\n    import ScriptDetail from './components/script-detail';\n\n    export default {\n        components: {\n            ScriptDetail,\n            JbDiff,\n        },\n        data () {\n            return {\n                isLoading: false,\n                data: [{},{},{}],\n                selectedList: [{},{},{}],\n                filterData: [],\n                diffList: [{},{},{}],\n                showSideslider: false,\n                scriptVersionId: null,\n                selectScriptVersionId: 0,\n                showDiff: false,\n                lastVersionScriptInfo: {},\n                value: '',\n            };\n        },\n        computed: {\n            tableData () {\n                if (this.value.length) {\n                    return this.filterData;\n                }\n                return this.data;\n            },\n        },\n        created () {\n            this.publicScript = checkPublicScript(this.$route);\n            this.serviceHandler = this.publicScript ? PublicScriptService : ScriptService;\n            this.scriptId = this.$route.params.scriptId;\n            this.scriptVersionId = this.$route.params.scriptVersionId;\n            this.statusFilters = [\n                { value: 0, text: '未上线' },\n                { value: 1, text: '已上线' },\n                { value: 2, text: '已下线' },\n                { value: 3, text: '已禁用' },\n            ];\n            this.fetchData();\n            this.fetchLastScriptVersionDetail();\n        },\n        methods: {\n            /**\n             * @desc 获取引用脚本的模板\n             */\n            fetchData () {\n                this.isLoading = true;\n                this.serviceHandler.scriptRefTemplateSteps({\n                    id: this.scriptId,\n                    scriptVersionId: this.scriptVersionId,\n                }).then((data) => {\n                    this.data = Object.freeze(data);\n                })\n                    .finally(() => {\n                        this.isLoading = false;\n                    });\n            },\n            /**\n             * @desc 最新脚本版本数据\n             */\n            fetchLastScriptVersionDetail () {\n                this.serviceHandler.versionDetail({\n                    id: this.$route.params.scriptVersionId,\n                }).then((data) => {\n                    this.lastVersionScriptInfo = Object.freeze(data);\n                });\n            },\n            /**\n             * @desc 列表搜索\n             */\n            handleInputChange: _.throttle(function () {\n                this.filterData = this.data.filter(item => item.templateName.includes(this.value));\n            }, 300),\n            /**\n             * @desc 跳转模板详情\n             * @param {Number} id 模板ID\n             */\n            handleGoTemplateDetail (id) {\n                const routerUrl = this.$router.resolve({\n                    name: 'templateDetail',\n                    params: {\n                        id,\n                    },\n                });\n                window.open(routerUrl.href, '_blank');\n            },\n            /**\n             * @desc 列表行选择\n             */\n            handleSelectionChange (selection) {\n                this.selectedList = Object.freeze(selection);\n            },\n            /**\n             * @desc 脚本对比\n             * @param {Object}  row 脚本数据\n             */\n            handleComparison (row) {\n                this.serviceHandler.versionDetail({\n                    id: 4 || row.scriptVersionId,\n                }).then((data) => {\n                    this.selectScriptVersionId = data.scriptVersionId;\n                    this.diffList = Object.freeze([\n                        data,\n                        this.lastVersionScriptInfo,\n                    ]);\n                    this.showDiff = true;\n                });\n            },\n            /**\n             * @desc 关闭脚本对比\n             */\n            handleDiffClose () {\n                this.showDiff = false;\n            },\n            /**\n             * @desc 取消\n             */\n            handleCancel () {\n                this.routerBack();\n            },\n            /**\n             * @desc 跳转到同步任务页面\n             */\n            handleSync () {\n                const stepList = this.selectedList.map(({ templateId, stepId }) => ({\n                    templateId,\n                    stepId,\n                }));\n                const routerName = this.publicScript ? 'scriptPublicSyncTask' : 'scriptSyncTask';\n                this.$router.push({\n                    name: routerName,\n                    params: {\n                        scriptId: this.scriptId,\n                        scriptVersionId: this.scriptVersionId,\n                    },\n                });\n                localStorage.setItem('SYNC_TEMPLATE_STEP_SCRIPT', JSON.stringify(stepList));\n            },\n            /**\n             * @desc 列表过滤\n             */\n            statusFilterMethod (value, row, column) {\n                return row.scriptStatus === value;\n            },\n            /**\n             * @desc 显示脚本详情\n             * @param {Number} scriptVersionId 脚本版本id\n             */\n            handleShowScriptDetail (scriptVersionId) {\n                this.selectScriptVersionId = scriptVersionId;\n                this.showSideslider = true;\n            },\n            /**\n             * @desc 路由回退\n             */\n            routerBack () {\n                const routerName = this.publicScript ? 'publicScriptVersion' : 'scriptVersion';\n                this.$router.push({\n                    name: routerName,\n                    params: {\n                        id: this.scriptId,\n                    },\n                });\n            },\n        },\n    };\n</script>\n<style lang=\"postcss\" scoped>\n    .script-manage-sync-confirm {\n        .search-input {\n            width: 500px;\n        }\n\n        .table-top {\n            height: 42px;\n            padding: 0 20px;\n            margin-top: 16px;\n            font-size: 12px;\n            line-height: 42px;\n            background-color: #f0f1f5;\n        }\n\n        .template-script-record {\n            &:hover {\n                .template-link {\n                    display: inline;\n                }\n            }\n        }\n\n        .job-template-name {\n            .template-link {\n                display: none;\n                margin-left: 5px;\n            }\n        }\n\n        .table-selected {\n            color: #a3a6af;\n        }\n\n        .status-action {\n            width: 46px;\n            height: 16px;\n            padding: 0 5px;\n            margin-left: 10px;\n            font-size: 12px;\n            color: #9fa2ac;\n            text-align: center;\n            background: #f0f1f5;\n        }\n\n        .status-online {\n            color: #45c272;\n            background-color: #e5f6ea;\n        }\n\n        .footer-action {\n            position: fixed;\n            bottom: 0;\n            left: 0;\n            display: flex;\n            width: 100%;\n            height: 52px;\n            padding-right: 24px;\n            background: #fff;\n            border-top: 1px solid #e2e2e2;\n            align-items: center;\n            justify-content: flex-end;\n        }\n    }\n</style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"jb-sideslider\",\n    {\n      attrs: {\n        \"is-show\": _vm.isShow,\n        \"show-footer\": false,\n        \"quick-close\": true,\n        width: 900,\n        title: \"查看脚本\",\n      },\n      on: { \"update:isShow\": _vm.handleCancel },\n    },\n    [\n      _vm.isShow\n        ? _c(\n            \"div\",\n            {\n              directives: [\n                {\n                  name: \"bkloading\",\n                  rawName: \"v-bkloading\",\n                  value: { isLoading: _vm.isLoading },\n                  expression: \"{ isLoading }\",\n                },\n              ],\n            },\n            [\n              !_vm.isLoading\n                ? _c(\"script-detail\", {\n                    attrs: {\n                      \"script-info\": _vm.scriptInfo,\n                      \"offset-bottom\": 0,\n                    },\n                  })\n                : _vm._e(),\n            ],\n            1\n          )\n        : _vm._e(),\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./script-detail.vue?vue&type=template&id=4fd136a9&scoped=true&\"\nimport script from \"./script-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./script-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./script-detail.vue?vue&type=style&index=0&id=4fd136a9&lang=postcss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fd136a9\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4fd136a9')) {\n      api.createRecord('4fd136a9', component.options)\n    } else {\n      api.reload('4fd136a9', component.options)\n    }\n    module.hot.accept(\"./script-detail.vue?vue&type=template&id=4fd136a9&scoped=true&\", function () {\n      api.rerender('4fd136a9', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/script-manage/sync-confirm/components/script-detail.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      directives: [\n        {\n          name: \"bkloading\",\n          rawName: \"v-bkloading\",\n          value: { isLoading: _vm.isLoading },\n          expression: \"{ isLoading }\",\n        },\n      ],\n      staticClass: \"script-manage-sync-confirm\",\n    },\n    [\n      _c(\"bk-input\", {\n        staticClass: \"search-input\",\n        attrs: {\n          placeholder: \"搜索作业模板\",\n          clearable: true,\n          \"right-icon\": \"bk-icon icon-search\",\n        },\n        on: { change: _vm.handleInputChange },\n        model: {\n          value: _vm.value,\n          callback: function ($$v) {\n            _vm.value = $$v\n          },\n          expression: \"value\",\n        },\n      }),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"table-top\" }, [\n        _c(\"span\", [_vm._v(_vm._s(\"同步作业模板\"))]),\n        _vm._v(\" \"),\n        _c(\"span\", { staticClass: \"table-selected\" }, [\n          _vm._v(\n            \" (\" +\n              _vm._s(\"已选\") +\n              \" \" +\n              _vm._s(_vm.selectedList.length) +\n              \"/\" +\n              _vm._s(_vm.data.length) +\n              \"个)\"\n          ),\n        ]),\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"bk-table\",\n        {\n          attrs: {\n            data: _vm.tableData,\n            \"row-class-name\": \"template-script-record\",\n          },\n          on: { \"selection-change\": _vm.handleSelectionChange },\n        },\n        [\n          _c(\"bk-table-column\", { attrs: { type: \"selection\", width: \"60\" } }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: { label: \"作业模板名称\", prop: \"name\", sortable: \"\" },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function (ref) {\n                  var row = ref.row\n                  return [\n                    _c(\n                      \"bk-button\",\n                      {\n                        staticClass: \"job-template-name\",\n                        attrs: { text: \"\" },\n                        on: {\n                          click: function ($event) {\n                            return _vm.handleGoTemplateDetail(row.templateId)\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n                    \" +\n                            _vm._s(row.templateName) +\n                            \"\\n                    \"\n                        ),\n                        _c(\"Icon\", {\n                          staticClass: \"template-link\",\n                          attrs: { type: \"edit\" },\n                        }),\n                      ],\n                      1\n                    ),\n                  ]\n                },\n              },\n            ]),\n          }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: { label: \"步骤名称\", prop: \"stepName\" },\n          }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: { label: \"引用的版本号\", prop: \"version\" },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function (ref) {\n                  var row = ref.row\n                  return [\n                    _c(\n                      \"bk-button\",\n                      {\n                        attrs: { text: \"\" },\n                        on: {\n                          click: function ($event) {\n                            return _vm.handleShowScriptDetail(\n                              row.scriptVersionId\n                            )\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n                    \" +\n                            _vm._s(row.scriptVersion) +\n                            \"\\n                \"\n                        ),\n                      ]\n                    ),\n                  ]\n                },\n              },\n            ]),\n          }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: {\n              label: \"引用版本状态\",\n              prop: \"status\",\n              filters: _vm.statusFilters,\n              \"filter-method\": _vm.statusFilterMethod,\n              \"filter-multiple\": true,\n            },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function (ref) {\n                  var row = ref.row\n                  return [\n                    _c(\"span\", {\n                      domProps: { innerHTML: _vm._s(row.statusHtml) },\n                    }),\n                  ]\n                },\n              },\n            ]),\n          }),\n          _vm._v(\" \"),\n          _c(\"bk-table-column\", {\n            attrs: { label: \"操作\", width: \"150\" },\n            scopedSlots: _vm._u([\n              {\n                key: \"default\",\n                fn: function (ref) {\n                  var row = ref.row\n                  return [\n                    _c(\n                      \"bk-button\",\n                      {\n                        attrs: { text: \"\" },\n                        on: {\n                          click: function ($event) {\n                            return _vm.handleComparison(row)\n                          },\n                        },\n                      },\n                      [\n                        _vm._v(\n                          \"\\n                    \" +\n                            _vm._s(\"版本对比\") +\n                            \"\\n                \"\n                        ),\n                      ]\n                    ),\n                  ]\n                },\n              },\n            ]),\n          }),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"footer-action\" },\n        [\n          _c(\n            \"bk-button\",\n            { staticClass: \"mr10\", on: { click: _vm.handleCancel } },\n            [_vm._v(\"\\n            \" + _vm._s(\"取消\") + \"\\n        \")]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"bk-button\",\n            {\n              staticClass: \"w120\",\n              attrs: { theme: \"primary\" },\n              on: { click: _vm.handleSync },\n            },\n            [_vm._v(\"\\n            \" + _vm._s(\"立即同步\") + \"\\n        \")]\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _vm.lastVersionScriptInfo.version\n        ? _c(\"element-teleport\", [\n            _c(\"span\", [_vm._v(\" - \" + _vm._s(\"同步至\"))]),\n            _vm._v(\" \"),\n            _c(\"span\", [_vm._v(_vm._s(_vm.lastVersionScriptInfo.version))]),\n          ])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"script-detail\", {\n        attrs: {\n          \"is-show\": _vm.showSideslider,\n          \"script-version-id\": _vm.selectScriptVersionId,\n        },\n        on: {\n          \"update:isShow\": function ($event) {\n            _vm.showSideslider = $event\n          },\n          \"update:is-show\": function ($event) {\n            _vm.showSideslider = $event\n          },\n        },\n      }),\n      _vm._v(\" \"),\n      _vm.showDiff\n        ? _c(\"jb-diff\", {\n            attrs: {\n              title: \"版本对比\",\n              data: _vm.diffList,\n              \"old-version-id\": _vm.selectScriptVersionId,\n              \"new-version-id\": _vm.lastVersionScriptInfo.scriptVersionId,\n            },\n            on: { close: _vm.handleDiffClose },\n          })\n        : _vm._e(),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a51ed1da&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a51ed1da&lang=postcss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a51ed1da\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('a51ed1da')) {\n      api.createRecord('a51ed1da', component.options)\n    } else {\n      api.reload('a51ed1da', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=a51ed1da&scoped=true&\", function () {\n      api.rerender('a51ed1da', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/script-manage/sync-confirm/index.vue\"\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=style&index=0&id=4fd136a9&lang=postcss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"12babc11\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=style&index=0&id=4fd136a9&lang=postcss&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./script-detail.vue?vue&type=style&index=0&id=4fd136a9&lang=postcss&scoped=true&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=a51ed1da&lang=postcss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"41ebbfeb\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=a51ed1da&lang=postcss&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=a51ed1da&lang=postcss&scoped=true&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}"],"names":["name","components","ScriptDetail","props","isShow","type","default","scriptVersionId","required","data","isLoading","scriptInfo","watch","created","methods","fetchScriptDetail","id","then","finally","handleCancel","JbDiff","selectedList","filterData","diffList","showSideslider","selectScriptVersionId","showDiff","lastVersionScriptInfo","value","computed","tableData","text","fetchData","fetchLastScriptVersionDetail","handleInputChange","handleGoTemplateDetail","params","window","handleSelectionChange","handleComparison","handleDiffClose","handleSync","templateId","stepId","scriptId","localStorage","statusFilterMethod","handleShowScriptDetail","routerBack","render","_vm","this","_h","$createElement","_c","_self","attrs","width","title","on","directives","rawName","expression","_e","_withStripped","component","options","__file","staticClass","placeholder","clearable","change","model","callback","$$v","_v","_s","length","label","prop","sortable","scopedSlots","_u","key","fn","ref","row","click","$event","templateName","scriptVersion","filters","statusFilters","domProps","innerHTML","statusHtml","theme","version","close","content","__esModule","module","locals","exports","add"],"sourceRoot":""}