{"version":3,"file":"js/8619.dfa41c88ca497bcf80f9.js","mappings":"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","sources":["webpack://job/src/views/file-manage/file-list/index.vue","webpack://job/./src/views/file-manage/file-list/index.vue?df16","webpack://job/./src/views/file-manage/file-list/index.vue?1a2a","webpack://job/./src/views/file-manage/file-list/index.vue?96e9","webpack://job/./src/views/file-manage/file-list/index.vue?43e3"],"sourcesContent":["<template>\r\n    <div class=\"file-node-list-page\">\r\n        <list-action-layout>\r\n            <jb-breadcrumb\r\n                class=\"list-breadcrumb\"\r\n                @on-last=\"handleBackLast\"\r\n                :key=\"`${fileSourceInfo.alias}_${path}`\">\r\n                <jb-breadcrumb-item>\r\n                    <Icon type=\"folder-open\" style=\"font-size: 20px;\" />\r\n                    <span @click=\"handleGoFileSource\">{{ '文件源列表' }}</span>\r\n                </jb-breadcrumb-item>\r\n                <jb-breadcrumb-item>\r\n                    <span @click=\"handlePathLocation('')\">{{ fileSourceInfo.alias }}</span>\r\n                </jb-breadcrumb-item>\r\n                <jb-breadcrumb-item\r\n                    v-for=\"(item) in pathStack\"\r\n                    role=\"path\"\r\n                    :key=\"item.path\">\r\n                    <span @click=\"handlePathLocation(item.path)\">{{ item.name }}</span>\r\n                </jb-breadcrumb-item>\r\n            </jb-breadcrumb>\r\n            <template #right>\r\n                <jb-input\r\n                    :placeholder=\"'搜索关键字'\"\r\n                    :value=\"name\"\r\n                    enter-trigger\r\n                    style=\"width: 480px;\"\r\n                    @submit=\"handleSearch\" />\r\n            </template>\r\n        </list-action-layout>\r\n        <render-list\r\n            ref=\"list\"\r\n            :data-source=\"getBucketList\"\r\n            @on-refresh=\"handleListRefresh\">\r\n            <template v-for=\"(column, index) in renderColumns\">\r\n                <render-file-list-column\r\n                    :column=\"column\"\r\n                    :key=\"`${path}_${index}`\"\r\n                    :file-source-id=\"fileSourceId\"\r\n                    :link-handler=\"handleLink\"\r\n                    :action-handler=\"handleAction\"\r\n                    @on-link=\"handleLink\"\r\n                    @on-action=\"handleAction\" />\r\n            </template>\r\n        </render-list>\r\n    </div>\r\n</template>\r\n<script>\r\n    import _ from 'lodash';\r\n       import FileService from '@service/file';\r\n    import ListActionLayout from '@components/list-action-layout';\r\n    import RenderList from '@components/render-list';\r\n    import RenderFileListColumn from '@components/render-file-list-column';\r\n\r\n    export default {\r\n        name: 'FileList',\r\n        components: {\r\n            ListActionLayout,\r\n            RenderList,\r\n            RenderFileListColumn,\r\n        },\r\n        data () {\r\n            return {\r\n                renderColumns: [],\r\n                path: 'a/b/c/d',\r\n                fileSourceInfo: { alias: 'alias' },\r\n            };\r\n        },\r\n        computed: {\r\n            isSkeletonLoading () {\r\n                return this.$refs.list.isLoading;\r\n            },\r\n            /**\r\n             * @desc 面包屑路径\r\n             * @return {Array}\r\n             */\r\n            pathStack () {\r\n                return this.path.split('/').reduce((result, item) => {\r\n                    if (item) {\r\n                        const last = result.length > 0 ? result[result.length - 1].path : '';\r\n                         \r\n                        result.push({\r\n                            path: `${last}${item}/`,\r\n                            name: item,\r\n                        });\r\n                    }\r\n                    return result;\r\n                }, []);\r\n            },\r\n        },\r\n        created () {\r\n            this.parseUrl();\r\n            this.getBucketList = FileService.fetchgetListFileNode;\r\n        },\r\n        mounted () {\r\n            this.fetchData();\r\n        },\r\n        methods: {\r\n            /**\r\n             * @desc 获取bucket储存桶数据\r\n             */\r\n            fetchData () {\r\n                this.$refs.list.$emit('onFetch', {\r\n                    fileSourceId: this.fileSourceId,\r\n                    path: this.path,\r\n                    name: this.name,\r\n                });\r\n            },\r\n            /**\r\n             * @desc 解析url参数\r\n             */\r\n            parseUrl () {\r\n                const {\r\n                    fileSourceId = '',\r\n                    path = '',\r\n                    name = '',\r\n                } = this.$route.query;\r\n\r\n                this.fileSourceId = fileSourceId;\r\n                this.path = path;\r\n                this.name = name;\r\n            },\r\n            /**\r\n             * @desc 文件路径返回上一级\r\n             */\r\n            handleBackLast () {\r\n                const lastPath = this.pathStack[this.pathStack.length - 2];\r\n                this.handlePathLocation(lastPath.path);\r\n            },\r\n            /**\r\n             * @desc 表格数据刷新回调\r\n             * @param {Object} data 用户输入的过滤数据\r\n             *\r\n             * 重新拉取数据\r\n             */\r\n            handleListRefresh (data) {\r\n                // 过滤掉 checkbox 列\r\n                this.renderColumns = Object.freeze(data.metaData.properties.filter(_ => _.type !== 'checkbox'));\r\n                this.fileSourceInfo = Object.freeze(data.fileSourceInfo);\r\n            },\r\n            /**\r\n             * @desc 搜索\r\n             * @param {String} name 搜索文件名\r\n             *\r\n             * 重新拉取数据\r\n             */\r\n            handleSearch (name) {\r\n                this.name = name;\r\n                this.fetchData();\r\n            },\r\n            /**\r\n             * @desc 跳转到文件源列表\r\n             */\r\n            handleGoFileSource () {\r\n                this.$router.push({\r\n                    name: 'sourceFileList',\r\n                });\r\n            },\r\n            /**\r\n             * @desc 面包屑切换列表\r\n             * @param {String} path 文件路径\r\n             */\r\n            handlePathLocation (path) {\r\n                if (_.trim(path, '/') === _.trim(this.path, '/')) {\r\n                    return;\r\n                }\r\n                this.name = '';\r\n                this.path = path;\r\n                this.fetchData();\r\n            },\r\n            /**\r\n             * @desc 行数据跳转链接\r\n             * @param {String} path 文件路径\r\n             */\r\n            handleLink (path) {\r\n                this.name = '';\r\n                this.path = path;\r\n                this.fetchData();\r\n            },\r\n            /**\r\n             * @desc 行数据执行操作\r\n             * @param {String} actionCode 操作类型code\r\n             * @param {Object} params 操作所需参数\r\n             */\r\n            handleAction (actionCode, params) {\r\n                return FileService.executeAction({\r\n                    fileSourceId: this.fileSourceId,\r\n                    actionCode,\r\n                    params,\r\n                }).then(() => {\r\n                    this.messageSuccess('操作成功');\r\n                    this.fetchData();\r\n                });\r\n            },\r\n            /**\r\n             * @desc 跳转到文件源列表页面\r\n             */\r\n            routerBack () {\r\n                this.$router.push({\r\n                    name: 'sourceFileList',\r\n                });\r\n            },\r\n        },\r\n    };\r\n</script>\r\n<style lang=\"postcss\">\r\n    .file-node-list-page {\r\n        .list-action-layout {\r\n            .right-box {\r\n                flex: 1;\r\n            }\r\n\r\n            .list-breadcrumb {\r\n                width: 100%;\r\n            }\r\n        }\r\n    }\r\n</style>\r\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"file-node-list-page\" },\n    [\n      _c(\n        \"list-action-layout\",\n        {\n          scopedSlots: _vm._u([\n            {\n              key: \"right\",\n              fn: function () {\n                return [\n                  _c(\"jb-input\", {\n                    staticStyle: { width: \"480px\" },\n                    attrs: {\n                      placeholder: \"搜索关键字\",\n                      value: _vm.name,\n                      \"enter-trigger\": \"\",\n                    },\n                    on: { submit: _vm.handleSearch },\n                  }),\n                ]\n              },\n              proxy: true,\n            },\n          ]),\n        },\n        [\n          _c(\n            \"jb-breadcrumb\",\n            {\n              key: _vm.fileSourceInfo.alias + \"_\" + _vm.path,\n              staticClass: \"list-breadcrumb\",\n              on: { \"on-last\": _vm.handleBackLast },\n            },\n            [\n              _c(\n                \"jb-breadcrumb-item\",\n                [\n                  _c(\"Icon\", {\n                    staticStyle: { \"font-size\": \"20px\" },\n                    attrs: { type: \"folder-open\" },\n                  }),\n                  _vm._v(\" \"),\n                  _c(\"span\", { on: { click: _vm.handleGoFileSource } }, [\n                    _vm._v(_vm._s(\"文件源列表\")),\n                  ]),\n                ],\n                1\n              ),\n              _vm._v(\" \"),\n              _c(\"jb-breadcrumb-item\", [\n                _c(\n                  \"span\",\n                  {\n                    on: {\n                      click: function ($event) {\n                        return _vm.handlePathLocation(\"\")\n                      },\n                    },\n                  },\n                  [_vm._v(_vm._s(_vm.fileSourceInfo.alias))]\n                ),\n              ]),\n              _vm._v(\" \"),\n              _vm._l(_vm.pathStack, function (item) {\n                return _c(\n                  \"jb-breadcrumb-item\",\n                  { key: item.path, attrs: { role: \"path\" } },\n                  [\n                    _c(\n                      \"span\",\n                      {\n                        on: {\n                          click: function ($event) {\n                            return _vm.handlePathLocation(item.path)\n                          },\n                        },\n                      },\n                      [_vm._v(_vm._s(item.name))]\n                    ),\n                  ]\n                )\n              }),\n            ],\n            2\n          ),\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"render-list\",\n        {\n          ref: \"list\",\n          attrs: { \"data-source\": _vm.getBucketList },\n          on: { \"on-refresh\": _vm.handleListRefresh },\n        },\n        [\n          _vm._l(_vm.renderColumns, function (column, index) {\n            return [\n              _c(\"render-file-list-column\", {\n                key: _vm.path + \"_\" + index,\n                attrs: {\n                  column: column,\n                  \"file-source-id\": _vm.fileSourceId,\n                  \"link-handler\": _vm.handleLink,\n                  \"action-handler\": _vm.handleAction,\n                },\n                on: {\n                  \"on-link\": _vm.handleLink,\n                  \"on-action\": _vm.handleAction,\n                },\n              }),\n            ]\n          }),\n        ],\n        2\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=140aaf2f&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Desktop\\\\bk-job-frontend\\\\node_modules\\\\_vue-hot-reload-api@2.3.4@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('140aaf2f')) {\n      api.createRecord('140aaf2f', component.options)\n    } else {\n      api.reload('140aaf2f', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=140aaf2f&\", function () {\n      api.rerender('140aaf2f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/file-manage/file-list/index.vue\"\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/_mini-css-extract-plugin@2.6.0@mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/_css-loader@6.7.1@css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@6.2.1@postcss-loader/dist/cjs.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/_vue-style-loader@4.1.3@vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"31cb1fe6\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/_mini-css-extract-plugin@2.6.0@mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/_css-loader@6.7.1@css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@6.2.1@postcss-loader/dist/cjs.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\", function() {\n     var newContent = require(\"!!../../../../node_modules/_mini-css-extract-plugin@2.6.0@mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/_css-loader@6.7.1@css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@6.2.1@postcss-loader/dist/cjs.js!../../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}"],"names":["name","components","ListActionLayout","RenderList","RenderFileListColumn","data","renderColumns","path","fileSourceInfo","alias","computed","result","methods","fileSourceId","handleListRefresh","handleSearch","handlePathLocation","handleLink","handleAction","then","render","_vm","this","_h","$createElement","_c","_self","staticClass","scopedSlots","_u","key","fn","staticStyle","width","attrs","placeholder","value","on","submit","proxy","handleBackLast","type","_v","click","handleGoFileSource","_s","$event","_l","pathStack","item","role","ref","getBucketList","column","index","_withStripped","component","options","__file","content","__esModule","default","module","id","locals","exports","add"],"sourceRoot":""}