{"version":3,"file":"js/149.e4a3a3b544f8d8c0e257.js","mappings":"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","sources":["webpack://job/src/views/script-template/index/components/preview-template.vue","webpack://job/src/views/script-template/index/components/render-variable.vue","webpack://job/src/views/script-template/index/components/resizeable-box.vue","webpack://job/src/views/script-template/index/index.vue","webpack://job/./src/views/script-template/index/components/preview-template.vue?fd4e","webpack://job/./src/views/script-template/index/components/preview-template.vue?f817","webpack://job/./src/views/script-template/index/components/preview-template.vue?051e","webpack://job/./src/views/script-template/index/components/render-variable.vue?5bdf","webpack://job/./src/views/script-template/index/components/render-variable.vue?7a1e","webpack://job/./src/views/script-template/index/components/render-variable.vue?6a31","webpack://job/./src/views/script-template/index/components/resizeable-box.vue?56fb","webpack://job/./src/views/script-template/index/components/resizeable-box.vue?76b4","webpack://job/./src/views/script-template/index/components/resizeable-box.vue?53e0","webpack://job/./src/views/script-template/index/index.vue?66b4","webpack://job/./src/views/script-template/index/index.vue?1c89","webpack://job/./src/views/script-template/index/index.vue?65ff","webpack://job/./src/views/script-template/index/components/preview-template.vue?aa2f","webpack://job/./src/views/script-template/index/components/render-variable.vue?e246","webpack://job/./src/views/script-template/index/components/resizeable-box.vue?4e93","webpack://job/./src/views/script-template/index/index.vue?d18c"],"sourcesContent":["<template>\n    <!-- resizeable-box动态调整 -->\n    <resizeable-box :parent-width=\"parentWidth\" :width=\"parentWidth / 2\">\n        <div\n            class=\"script-template-preview-template\"\n            v-bkloading=\"{ isLoading }\">\n            <div class=\"preview-result\">\n                <span>{{ '渲染结果' }}</span>\n                <div\n                    v-if=\"needRefresh\"\n                    class=\"refresh-flag\"\n                    @click=\"handleRefresh\">\n                    <span class=\"dot\">\n                        <Icon type=\"refresh-2\" />\n                    </span>\n                    <span style=\"color: #d74242;\">{{ '有更新' }}</span>\n                </div>\n            </div>\n            <div :id=\"editorId\" class=\"preview-content\" />\n        </div>\n    </resizeable-box>\n</template>\n<script>\n    import _ from 'lodash';\n    import { Base64 } from 'js-base64';\n    import ScriptTemplateService from '@service/script-template';\n    import {\n        formatScriptTypeValue,\n    } from '@utils/assist';\n    import ace from 'ace/ace';\n    import ResizeableBox from './resizeable-box';\n\n    const LANG_MAP = {\n        Shell: 'sh',\n        Bat: 'batchfile',\n        Perl: 'perl',\n        Python: 'python',\n        Powershell: 'powershell',\n        SQL: 'sql',\n    };\n\n    export default {\n        name: '',\n        components: {\n            ResizeableBox,\n        },\n        props: {\n            parentWidth: {\n                type: Number,\n                default: window.innerWidth,\n            },\n            scriptContent: {\n                type: String,\n                default: '',\n            },\n            // 当前的脚本语言\n            scriptLanguage: {\n                type: String,\n                required: true,\n            },\n        },\n        data () {\n            return {\n                isLoading: false,\n                needRefresh: false,\n            };\n        },\n        computed: {\n            mode () {\n                return `ace/mode/${LANG_MAP[this.scriptLanguage]}`;\n            },\n        },\n        watch: {\n            scriptContent: {\n                handler () {\n                    if (this.hasRendered) {\n                        this.needRefresh = true;\n                        return;\n                    }\n                    this.fetchRenderScript();\n                },\n                immediate: true,\n            },\n            scriptLanguage () {\n                setTimeout(() => {\n                    this.editor.getSession().setMode(this.mode);\n                });\n            },\n        },\n        created () {\n            this.hasRendered = false;\n            this.editorId = `scriptTemplatePrevice${_.random(1, 1000)}_${Date.now()}`;\n        },\n        mounted () {\n            this.initEditor();\n        },\n        methods: {\n            /**\n             * 初始化脚本编辑器\n             */\n            initEditor () {\n                const editor = ace.edit(this.editorId);\n                editor.getSession().setMode(this.mode);\n                editor.setOptions({\n                    fontSize: 13,\n                    enableBasicAutocompletion: true,\n                    enableLiveAutocompletion: true,\n                    enableSnippets: true,\n                    wrapBehavioursEnabled: true,\n                    autoScrollEditorIntoView: true,\n                    copyWithEmptySelection: true,\n                    useElasticTabstops: true,\n                    printMarginColumn: true,\n                    printMargin: 80,\n                    scrollPastEnd: 0.2,\n                });\n                editor.setTheme('ace/theme/monokai');\n                editor.setShowPrintMargin(false);\n                editor.$blockScrolling = Infinity;\n                editor.setReadOnly(true);\n                \n                // 先保存 editor 在设置 value\n                editor.scrollToLine(Infinity);\n                editor.setValue('');\n                editor.clearSelection();\n                this.editor = editor;\n                this.$once('hook:beforeDestroy', () => {\n                    editor.destroy();\n                    editor.container.remove();\n                });\n            },\n            /**\n             * @desc 预览脚本模板\n             */\n            fetchRenderScript () {\n                this.isLoading = true;\n                ScriptTemplateService.fetchRenderScript({\n                    scriptContent: this.scriptContent,\n                    scriptLanguage: formatScriptTypeValue(this.scriptLanguage),\n                }).then((data) => {\n                    this.editor.setValue(Base64.decode(data.scriptContent));\n                    this.editor.clearSelection();\n                })\n                    .finally(() => {\n                        this.isLoading = false;\n                        this.hasRendered = true;\n                        this.needRefresh = false;\n                    });\n            },\n            /**\n             * @desc 有更新，重新预览脚本模板\n             */\n            handleRefresh () {\n                this.fetchRenderScript();\n            },\n        },\n    };\n</script>\n<style lang='postcss'>\n    .script-template-preview-template {\n        position: relative;\n        z-index: 0;\n        height: 100%;\n        background: #292929;\n\n        .preview-content {\n            height: calc(100% - 51px);\n            /* stylelint-disable selector-class-pattern */\n            &.ace_editor {\n                background: #292929;\n\n                .ace_gutter {\n                    background: #292929;\n                }\n            }\n        }\n\n        .preview-result {\n            display: flex;\n            align-items: flex-end;\n            padding: 16px 20px;\n            font-size: 14px;\n            line-height: 19px;\n            color: #c4c6cc;\n\n            .refresh-flag {\n                display: flex;\n                margin-left: 9px;\n                font-size: 12px;\n                cursor: pointer;\n\n                .dot {\n                    position: relative;\n                    margin-right: 8px;\n                    font-size: 14px;\n\n                    &::after {\n                        position: absolute;\n                        top: 6px;\n                        right: -3px;\n                        width: 4px;\n                        height: 4px;\n                        background: #d74242;\n                        border-radius: 50%;\n                        content: \"\";\n                    }\n                }\n            }\n        }\n    }\n</style>\n","<template>\n    <resizeable-box>\n        <div class=\"script-template-render-variable\" v-bkloading=\"{ isLoading }\">\n            <scroll-faker theme=\"dark\">\n                <div class=\"title\">{{ '变量列表' }}</div>\n                <table class=\"script-variable-list\">\n                    <thead>\n                        <tr>\n                            <td>{{ '变量名称' }}</td>\n                            <td>{{ '含义' }}</td>\n                            <td>{{ '示例' }}</td>\n                        </tr>\n                    </thead>\n                    <tbody v-for=\"item in variableList\" :key=\"item.name\">\n                        <tr>\n                            <td>\n                                <div\n                                    class=\"variable-name\"\n                                    @click=\"handleCopyScriptVariable(`{{${item.name}}}`)\">\n                                    {{ item.name }}\n                                </div>\n                            </td>\n                            <td>{{ item.description }}</td>\n                            <td>{{ item.demo }}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            </scroll-faker>\n        </div>\n    </resizeable-box>\n</template>\n<script>\n       import ScriptTemplateService from '@service/script-template';\n    import { execCopy } from '@utils/assist';\n    import ResizeableBox from './resizeable-box';\n\n    export default {\n        components: {\n            ResizeableBox,\n        },\n        inheritAttrs: false,\n        data () {\n            return {\n                isLoading: false,\n                variableList: [{},{},{}],\n            };\n        },\n        created () {\n            this.fetchVariableList();\n        },\n        methods: {\n            /**\n             * @desc 获取变量列表\n             */\n            fetchVariableList () {\n                this.isLoading = true;\n                ScriptTemplateService.fetchVaribaleList()\n                    .then((data) => {\n                        this.variableList = Object.freeze(data);\n                    })\n                    .finally(() => {\n                        this.isLoading = false;\n                    });\n            },\n            /**\n             * @desc 复制变量（变量名被 {{}} 包裹）\n             */\n            handleCopyScriptVariable (variableName) {\n                execCopy(variableName, `${'复制成功'} ${variableName}`);\n            },\n        },\n    };\n</script>\n<style lang='postcss'>\n    .script-template-render-variable {\n        height: 100%;\n        padding: 16px 20px;\n        white-space: nowrap;\n        background: #292929;\n\n        .script-variable-list {\n            width: 100%;\n            margin-top: 16px;\n            font-size: 12px;\n\n            thead {\n                background: #3a3b3d;\n            }\n\n            td {\n                height: 32px;\n                padding: 0 16px;\n            }\n\n            tbody {\n                td {\n                    border-bottom: 1px solid #4a4a4a;\n                }\n            }\n\n            .variable-name {\n                height: 24px;\n                padding-left: 10px;\n                margin-left: -10px;\n                line-height: 24px;\n                cursor: pointer;\n\n                &:hover {\n                    background: #3b3c3d;\n                }\n            }\n        }\n    }\n</style>\n","<template>\n    <div ref=\"handle\" class=\"resizeable-box\" :style=\"styles\">\n        <slot />\n        <!-- 拖拽分割条-动态设置父元素宽度 -->\n        <div\n            class=\"mouse-flag\"\n            @mousedown=\"handleMousedown\">\n            <Icon type=\"many-dot\" />\n        </div>\n    </div>\n</template>\n<script>\n    import _ from 'lodash';\n\n    export default {\n        props: {\n            /**\n             * @desc 父容器的宽度\n             */\n            parentWidth: {\n                type: Number,\n                default: window.innerWidth,\n            },\n            /**\n             * @desc 可变容器的默认宽度\n             */\n            width: {\n                type: Number,\n                default: 400,\n            },\n        },\n        data () {\n            return {\n                styles: {\n                    width: `${this.width}px`,\n                },\n            };\n        },\n        created () {\n            this.moveStartWidth = this.width;\n            this.isResizeable = false;\n            this.handleMousemove = _.throttle(this.eventMousemove, 30);\n        },\n        mounted () {\n            document.body.addEventListener('mousemove', this.handleMousemove);\n            document.body.addEventListener('mouseup', this.handleMouseup);\n            this.$once('hook:beforeDestroy', () => {\n                document.body.removeEventListener('mousemove', this.handleMousemove);\n                document.body.removeEventListener('mouseup', this.handleMouseup);\n            });\n        },\n        methods: {\n            /**\n             * @desc mousedown 事件，记录鼠标按下时容器的宽度\n             * @param {Object} event\n             */\n            handleMousedown (event) {\n                this.isResizeable = true;\n                this.screenX = event.screenX;\n                this.moveStartWidth = this.$refs.handle.getBoundingClientRect().width;\n                document.body.style.userSelect = 'none';\n            },\n            /**\n             * @desc mouseup 事件，取消可拖动特性\n             */\n            handleMouseup () {\n                this.isResizeable = false;\n                document.body.style.userSelect = '';\n            },\n            /**\n             * @desc mousemove 事件，动态更新容器宽度\n             * @param {Object} event\n             */\n            eventMousemove (event) {\n                if (!this.isResizeable) {\n                    return;\n                }\n                const MAX_WIDTH = Math.max(0.8 * this.parentWidth, this.parentWidth - 200);\n                const MIN_WIDTH = Math.min(0.1 * this.parentWidth, 200);\n                const { screenX } = event;\n                const newWidth = this.screenX - screenX + this.moveStartWidth;\n                if (newWidth > MAX_WIDTH || newWidth < MIN_WIDTH) {\n                    return;\n                }\n                this.styles = {\n                    width: `${newWidth}px`,\n                };\n                this.$emit('on-resize');\n            },\n        },\n    };\n</script>\n<style lang='postcss'>\n    .resizeable-box {\n        position: relative;\n        height: 100%;\n\n        .mouse-flag {\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            z-index: 1;\n            display: flex;\n            width: 3px;\n            padding-left: 3px;\n            font-size: 23px;\n            color: #63656e;\n            cursor: col-resize;\n            align-items: center;\n\n            &:hover {\n                background: gray;\n            }\n        }\n    }\n</style>\n","<template>\n    <div\n        ref=\"container\"\n        class=\"script-template-page\"\n        v-bkloading=\"{ isLoading }\">\n        <ace-editor\n            ref=\"editor\"\n            class=\"script-template-editor\"\n            :lang=\"scriptLanguage\"\n            :height=\"editorHeight\"\n            :custom-enable=\"false\"\n            :before-lang-change=\"beforeLangChange\"\n            @change=\"handleContentChange\"\n            @on-mode-change=\"handleLangChange\">\n            <template slot=\"action\">\n                <Icon\n                    type=\"variable\"\n                    v-bk-tooltips=\"'内置变量'\"\n                    @click=\"handleSidePanelShow('renderVariable')\" />\n            </template>\n            <div\n                v-if=\"sidePanelComponentName\"\n                slot=\"side\"\n                class=\"script-editor-right-panel\">\n                <component\n                    :is=\"renderSideComponent\"\n                    :parent-width=\"editorWidth\"\n                    @on-resize=\"handleSidePanelResize\"\n                    :script-language=\"scriptLanguage\"\n                    :script-content=\"scriptContent\" />\n                <div\n                    class=\"panel-close\"\n                    @click=\"handleSidePanelHide\">\n                    <Icon type=\"close\" />\n                </div>\n            </div>\n        </ace-editor>\n        <div class=\"action-box\">\n            <bk-button\n                theme=\"primary\"\n                class=\"mr10\"\n                style=\"width: 86px;\"\n                :loading=\"isSubmiting\"\n                @click=\"handleSave\">\n                {{ '保存' }}\n            </bk-button>\n            <div class=\"action-btn mr10\" @click=\"handleEditReset\">{{ '重置' }}</div>\n            <div class=\"action-btn\" @click=\"handleUseDefault\">{{ '还原默认' }}</div>\n            <div\n                class=\"action-btn\"\n                :class=\"{\n                    active: sidePanelComponentName === 'previewTemplate',\n                }\"\n                style=\"margin-left: 60px;\"\n                @click=\"handleSidePanelShow('previewTemplate')\">\n                {{ '渲染预览' }}\n            </div>\n        </div>\n    </div>\n</template>\n<script>\n    import _ from 'lodash';\n       import ScriptTemplateService from '@service/script-template';\n    import {\n        getOffset,\n        leaveConfirm,\n        formatScriptTypeValue,\n    } from '@utils/assist';\n    import AceEditor, { builtInScript } from '@components/ace-editor';\n    import RenderVariable from './components/render-variable';\n    import PreviewTemplate from './components/preview-template';\n\n    export default {\n        name: '',\n        components: {\n            AceEditor,\n            RenderVariable,\n            PreviewTemplate,\n        },\n        data () {\n            return {\n                isLoading: false,\n                isSubmiting: false,\n                editorHeight: 0,\n                editorWidth: 0,\n                isShowVariable: false,\n                scriptLanguage: 'Shell',\n                scriptContent: '',\n                sidePanelComponentName: '',\n            };\n        },\n        computed: {\n            renderSideComponent () {\n                const com = {\n                    previewTemplate: PreviewTemplate,\n                    renderVariable: RenderVariable,\n                };\n                return com[this.sidePanelComponentName];\n            },\n        },\n        created () {\n            // 已经存储的脚本模板\n            this.templateMap = Object.assign({}, builtInScript);\n            this.fetchOriginalTemplate();\n        },\n        mounted () {\n            this.calcEditorSize();\n            window.addEventListener('resize', this.calcEditorSize);\n            this.$once('hook:beforeDestroy', () => {\n                window.removeEventListener('resize', this.calcEditorSize);\n            });\n        },\n        methods: {\n            /**\n             * @desc 获取用户自定义模板\n             */\n            fetchOriginalTemplate () {\n                this.isLoading = true;\n                ScriptTemplateService.fetchOriginalTemplate()\n                    .then((data) => {\n                        data.forEach((item) => {\n                            this.templateMap[formatScriptTypeValue(item.scriptLanguage)] = item.scriptContent;\n                        });\n                        // 如果有自定义脚本模板，通过编辑器 setValue 方法设置值\n                        if (_.has(this.templateMap, this.scriptLanguage)) {\n                            this.$refs.editor.setValue(this.templateMap[this.scriptLanguage]);\n                        }\n                    })\n                    .finally(() => {\n                        this.isLoading = false;\n                    });\n            },\n            /**\n             * @desc 计算编辑器的尺寸\n             */\n            calcEditorSize () {\n                const {\n                    top: offsetTop,\n                } = getOffset(this.$refs.container);\n                const windowHeight = window.innerHeight;\n                this.editorHeight = windowHeight - offsetTop - 72;\n                this.editorWidth = this.$refs.container.getBoundingClientRect().width;\n            },\n            /**\n             * @desc 脚本预览类型切换编辑状态检测\n             * @return {Object} 切换二次确认\n             */\n            beforeLangChange () {\n                window.changeAlert = this.scriptContent !== this.templateMap[this.scriptLanguage];\n                return leaveConfirm();\n            },\n            /**\n             * @desc 切换脚本模板语言\n             * @param {String} scriptLanguage 脚本语言\n             */\n            handleLangChange (scriptLanguage) {\n                this.scriptLanguage = scriptLanguage;\n                setTimeout(() => {\n                    if (_.has(this.templateMap, this.scriptLanguage)) {\n                        this.$refs.editor.setValue(this.templateMap[this.scriptLanguage]);\n                    }\n                });\n            },\n            /**\n             * @desc 编辑脚本模板内容\n             * @param {String} content 脚本语言\n             */\n            handleContentChange (content) {\n                this.scriptContent = content;\n            },\n            /**\n             * @desc 显示编辑器右侧面板\n             * @param {String} componentName 脚本语言\n             */\n            handleSidePanelShow (componentName) {\n                if (this.sidePanelComponentName === componentName) {\n                    this.sidePanelComponentName = '';\n                } else {\n                    this.sidePanelComponentName = componentName;\n                }\n            },\n            /**\n             * @desc 关闭编辑器右侧面板\n             */\n            handleSidePanelHide () {\n                this.sidePanelComponentName = '';\n            },\n            /**\n             * @desc 脚本编辑器 resize\n             */\n            handleSidePanelResize () {\n                this.$refs.editor.resize();\n            },\n            /**\n             * @desc 保存用户自定义模板\n             */\n            handleSave () {\n                this.isSubmiting = true;\n                ScriptTemplateService.updateOriginalTemplate({\n                    scriptLanguage: formatScriptTypeValue(this.scriptLanguage),\n                    scriptContent: this.scriptContent,\n                }).then(() => {\n                    window.changeAlert = false;\n                    this.templateMap[this.scriptLanguage] = this.scriptLanguage;\n                    this.messageSuccess('保存成功');\n                })\n                    .finally(() => {\n                        this.isSubmiting = false;\n                    });\n            },\n            /**\n             * @desc 重置用户编辑状态\n             */\n            handleEditReset () {\n                this.$refs.editor.setValue(this.templateMap[this.scriptLanguage]);\n                this.messageSuccess('重置成功');\n            },\n            /**\n             * @desc 还原脚本模板为默认脚本\n             */\n            handleUseDefault () {\n                this.$refs.editor.resetValue();\n                this.messageSuccess('还原默认成功');\n            },\n        },\n    };\n</script>\n<style lang='postcss'>\n    .script-template-page {\n        .action-box {\n            display: flex;\n            height: 52px;\n            padding-left: 16px;\n            background: #2e2e2e;\n            box-shadow: 0 -2px 4px 0 rgb(0 0 0 / 16%);\n            align-items: center;\n\n            .action-btn {\n                width: 86px;\n                height: 32px;\n                font-size: 14px;\n                line-height: 32px;\n                color: #979ba5;\n                text-align: center;\n                cursor: pointer;\n                background: #242424;\n                border: 1px solid #5c5e66;\n                border-radius: 2px;\n                transition: all 0.15s;\n\n                &:hover {\n                    color: #b1b6c2;\n                    border-color: #878b94;\n                }\n\n                &.active {\n                    color: #699df4;\n                    background: #242424;\n                    border: 1px solid transparent;\n                }\n            }\n        }\n\n        .bk-loading {\n            background: rgb(0 0 0 / 80%) !important;\n        }\n    }\n\n    .script-template-editor {\n        .jb-ace-title {\n            background: #2e2e2e;\n\n            .jb-ace-mode-item {\n                &.active {\n                    background: #1a1a1a;\n                }\n            }\n        }\n        /* stylelint-disable selector-class-pattern */\n        .ace_editor {\n            background: #1a1a1a;\n\n            .ace_gutter {\n                background: #1a1a1a;\n            }\n        }\n    }\n\n    .script-editor-right-panel {\n        position: relative;\n        height: 100%;\n        font-size: 14px;\n        line-height: 19px;\n        color: #c4c6cc;\n        border-left: 1px solid #333;\n\n        .panel-close {\n            position: absolute;\n            top: 0;\n            right: 0;\n            display: flex;\n            width: 26px;\n            height: 26px;\n            font-size: 18px;\n            color: #63656e;\n            cursor: pointer;\n            border-radius: 50%;\n            align-items: center;\n            justify-content: center;\n\n            &:hover {\n                background-color: #313238;\n            }\n        }\n    }\n</style>\n","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"resizeable-box\",\n    { attrs: { \"parent-width\": _vm.parentWidth, width: _vm.parentWidth / 2 } },\n    [\n      _c(\n        \"div\",\n        {\n          directives: [\n            {\n              name: \"bkloading\",\n              rawName: \"v-bkloading\",\n              value: { isLoading: _vm.isLoading },\n              expression: \"{ isLoading }\",\n            },\n          ],\n          staticClass: \"script-template-preview-template\",\n        },\n        [\n          _c(\"div\", { staticClass: \"preview-result\" }, [\n            _c(\"span\", [_vm._v(_vm._s(\"渲染结果\"))]),\n            _vm._v(\" \"),\n            _vm.needRefresh\n              ? _c(\n                  \"div\",\n                  {\n                    staticClass: \"refresh-flag\",\n                    on: { click: _vm.handleRefresh },\n                  },\n                  [\n                    _c(\n                      \"span\",\n                      { staticClass: \"dot\" },\n                      [_c(\"Icon\", { attrs: { type: \"refresh-2\" } })],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _c(\"span\", { staticStyle: { color: \"#d74242\" } }, [\n                      _vm._v(_vm._s(\"有更新\")),\n                    ]),\n                  ]\n                )\n              : _vm._e(),\n          ]),\n          _vm._v(\" \"),\n          _c(\"div\", {\n            staticClass: \"preview-content\",\n            attrs: { id: _vm.editorId },\n          }),\n        ]\n      ),\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./preview-template.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./preview-template.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./preview-template.vue?vue&type=template&id=30cc623e&\"\nimport script from \"./preview-template.vue?vue&type=script&lang=js&\"\nexport * from \"./preview-template.vue?vue&type=script&lang=js&\"\nimport style0 from \"./preview-template.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('30cc623e')) {\n      api.createRecord('30cc623e', component.options)\n    } else {\n      api.reload('30cc623e', component.options)\n    }\n    module.hot.accept(\"./preview-template.vue?vue&type=template&id=30cc623e&\", function () {\n      api.rerender('30cc623e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/script-template/index/components/preview-template.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"resizeable-box\", [\n    _c(\n      \"div\",\n      {\n        directives: [\n          {\n            name: \"bkloading\",\n            rawName: \"v-bkloading\",\n            value: { isLoading: _vm.isLoading },\n            expression: \"{ isLoading }\",\n          },\n        ],\n        staticClass: \"script-template-render-variable\",\n      },\n      [\n        _c(\"scroll-faker\", { attrs: { theme: \"dark\" } }, [\n          _c(\"div\", { staticClass: \"title\" }, [_vm._v(_vm._s(\"变量列表\"))]),\n          _vm._v(\" \"),\n          _c(\n            \"table\",\n            { staticClass: \"script-variable-list\" },\n            [\n              _c(\"thead\", [\n                _c(\"tr\", [\n                  _c(\"td\", [_vm._v(_vm._s(\"变量名称\"))]),\n                  _vm._v(\" \"),\n                  _c(\"td\", [_vm._v(_vm._s(\"含义\"))]),\n                  _vm._v(\" \"),\n                  _c(\"td\", [_vm._v(_vm._s(\"示例\"))]),\n                ]),\n              ]),\n              _vm._v(\" \"),\n              _vm._l(_vm.variableList, function (item) {\n                return _c(\"tbody\", { key: item.name }, [\n                  _c(\"tr\", [\n                    _c(\"td\", [\n                      _c(\n                        \"div\",\n                        {\n                          staticClass: \"variable-name\",\n                          on: {\n                            click: function ($event) {\n                              return _vm.handleCopyScriptVariable(\n                                \"{{\" + item.name + \"}}\"\n                              )\n                            },\n                          },\n                        },\n                        [\n                          _vm._v(\n                            \"\\n                                \" +\n                              _vm._s(item.name) +\n                              \"\\n                            \"\n                          ),\n                        ]\n                      ),\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"td\", [_vm._v(_vm._s(item.description))]),\n                    _vm._v(\" \"),\n                    _c(\"td\", [_vm._v(_vm._s(item.demo))]),\n                  ]),\n                ])\n              }),\n            ],\n            2\n          ),\n        ]),\n      ],\n      1\n    ),\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render-variable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render-variable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./render-variable.vue?vue&type=template&id=223e9ec4&\"\nimport script from \"./render-variable.vue?vue&type=script&lang=js&\"\nexport * from \"./render-variable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./render-variable.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('223e9ec4')) {\n      api.createRecord('223e9ec4', component.options)\n    } else {\n      api.reload('223e9ec4', component.options)\n    }\n    module.hot.accept(\"./render-variable.vue?vue&type=template&id=223e9ec4&\", function () {\n      api.rerender('223e9ec4', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/script-template/index/components/render-variable.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { ref: \"handle\", staticClass: \"resizeable-box\", style: _vm.styles },\n    [\n      _vm._t(\"default\"),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"mouse-flag\", on: { mousedown: _vm.handleMousedown } },\n        [_c(\"Icon\", { attrs: { type: \"many-dot\" } })],\n        1\n      ),\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resizeable-box.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resizeable-box.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./resizeable-box.vue?vue&type=template&id=54c6f02b&\"\nimport script from \"./resizeable-box.vue?vue&type=script&lang=js&\"\nexport * from \"./resizeable-box.vue?vue&type=script&lang=js&\"\nimport style0 from \"./resizeable-box.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('54c6f02b')) {\n      api.createRecord('54c6f02b', component.options)\n    } else {\n      api.reload('54c6f02b', component.options)\n    }\n    module.hot.accept(\"./resizeable-box.vue?vue&type=template&id=54c6f02b&\", function () {\n      api.rerender('54c6f02b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/script-template/index/components/resizeable-box.vue\"\nexport default component.exports","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      directives: [\n        {\n          name: \"bkloading\",\n          rawName: \"v-bkloading\",\n          value: { isLoading: _vm.isLoading },\n          expression: \"{ isLoading }\",\n        },\n      ],\n      ref: \"container\",\n      staticClass: \"script-template-page\",\n    },\n    [\n      _c(\n        \"ace-editor\",\n        {\n          ref: \"editor\",\n          staticClass: \"script-template-editor\",\n          attrs: {\n            lang: _vm.scriptLanguage,\n            height: _vm.editorHeight,\n            \"custom-enable\": false,\n            \"before-lang-change\": _vm.beforeLangChange,\n          },\n          on: {\n            change: _vm.handleContentChange,\n            \"on-mode-change\": _vm.handleLangChange,\n          },\n        },\n        [\n          _c(\n            \"template\",\n            { slot: \"action\" },\n            [\n              _c(\"Icon\", {\n                directives: [\n                  {\n                    name: \"bk-tooltips\",\n                    rawName: \"v-bk-tooltips\",\n                    value: \"内置变量\",\n                    expression: \"'内置变量'\",\n                  },\n                ],\n                attrs: { type: \"variable\" },\n                on: {\n                  click: function ($event) {\n                    return _vm.handleSidePanelShow(\"renderVariable\")\n                  },\n                },\n              }),\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _vm.sidePanelComponentName\n            ? _c(\n                \"div\",\n                {\n                  staticClass: \"script-editor-right-panel\",\n                  attrs: { slot: \"side\" },\n                  slot: \"side\",\n                },\n                [\n                  _c(_vm.renderSideComponent, {\n                    tag: \"component\",\n                    attrs: {\n                      \"parent-width\": _vm.editorWidth,\n                      \"script-language\": _vm.scriptLanguage,\n                      \"script-content\": _vm.scriptContent,\n                    },\n                    on: { \"on-resize\": _vm.handleSidePanelResize },\n                  }),\n                  _vm._v(\" \"),\n                  _c(\n                    \"div\",\n                    {\n                      staticClass: \"panel-close\",\n                      on: { click: _vm.handleSidePanelHide },\n                    },\n                    [_c(\"Icon\", { attrs: { type: \"close\" } })],\n                    1\n                  ),\n                ],\n                1\n              )\n            : _vm._e(),\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"action-box\" },\n        [\n          _c(\n            \"bk-button\",\n            {\n              staticClass: \"mr10\",\n              staticStyle: { width: \"86px\" },\n              attrs: { theme: \"primary\", loading: _vm.isSubmiting },\n              on: { click: _vm.handleSave },\n            },\n            [_vm._v(\"\\n            \" + _vm._s(\"保存\") + \"\\n        \")]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            {\n              staticClass: \"action-btn mr10\",\n              on: { click: _vm.handleEditReset },\n            },\n            [_vm._v(_vm._s(\"重置\"))]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"action-btn\", on: { click: _vm.handleUseDefault } },\n            [_vm._v(_vm._s(\"还原默认\"))]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            {\n              staticClass: \"action-btn\",\n              class: {\n                active: _vm.sidePanelComponentName === \"previewTemplate\",\n              },\n              staticStyle: { \"margin-left\": \"60px\" },\n              on: {\n                click: function ($event) {\n                  return _vm.handleSidePanelShow(\"previewTemplate\")\n                },\n              },\n            },\n            [_vm._v(\"\\n            \" + _vm._s(\"渲染预览\") + \"\\n        \")]\n          ),\n        ],\n        1\n      ),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-1[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8d43cc50&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=postcss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/bk-job-frontend/bk-job-frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('8d43cc50')) {\n      api.createRecord('8d43cc50', component.options)\n    } else {\n      api.reload('8d43cc50', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=8d43cc50&\", function () {\n      api.rerender('8d43cc50', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/script-template/index/index.vue\"\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./preview-template.vue?vue&type=style&index=0&lang=postcss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"05c1234d\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./preview-template.vue?vue&type=style&index=0&lang=postcss&\", function() {\n     var newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./preview-template.vue?vue&type=style&index=0&lang=postcss&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render-variable.vue?vue&type=style&index=0&lang=postcss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"282b6c06\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render-variable.vue?vue&type=style&index=0&lang=postcss&\", function() {\n     var newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render-variable.vue?vue&type=style&index=0&lang=postcss&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resizeable-box.vue?vue&type=style&index=0&lang=postcss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"d172f426\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resizeable-box.vue?vue&type=style&index=0&lang=postcss&\", function() {\n     var newContent = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resizeable-box.vue?vue&type=style&index=0&lang=postcss&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"f956f372\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\", function() {\n     var newContent = require(\"!!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??clonedRuleSet-3[0].rules[0].use[1]!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-3[0].rules[0].use[2]!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=postcss&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}"],"names":["Shell","Bat","Perl","Python","Powershell","SQL","name","components","ResizeableBox","props","parentWidth","type","default","scriptContent","scriptLanguage","required","data","isLoading","needRefresh","computed","mode","watch","handler","immediate","setTimeout","created","mounted","methods","initEditor","editor","fontSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","wrapBehavioursEnabled","autoScrollEditorIntoView","copyWithEmptySelection","useElasticTabstops","printMarginColumn","printMargin","scrollPastEnd","fetchRenderScript","ScriptTemplateService","then","finally","handleRefresh","inheritAttrs","variableList","fetchVariableList","handleCopyScriptVariable","width","styles","document","handleMousedown","handleMouseup","eventMousemove","AceEditor","RenderVariable","PreviewTemplate","isSubmiting","editorHeight","editorWidth","isShowVariable","sidePanelComponentName","renderSideComponent","previewTemplate","renderVariable","window","fetchOriginalTemplate","calcEditorSize","offsetTop","top","beforeLangChange","handleLangChange","handleContentChange","handleSidePanelShow","handleSidePanelHide","handleSidePanelResize","handleSave","handleEditReset","handleUseDefault","render","_vm","this","_h","$createElement","_c","_self","attrs","directives","rawName","value","expression","staticClass","_v","_s","on","click","staticStyle","color","_e","id","editorId","_withStripped","component","options","__file","theme","_l","item","key","$event","description","demo","ref","style","_t","mousedown","lang","height","change","slot","tag","loading","class","active","content","__esModule","module","locals","exports","add"],"sourceRoot":""}